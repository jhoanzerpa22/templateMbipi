var ou=Object.defineProperty,kn=Object.getOwnPropertySymbols,iu=Object.prototype.hasOwnProperty,nu=Object.prototype.propertyIsEnumerable,On=(ct,P,E)=>P in ct?ou(ct,P,{enumerable:!0,configurable:!0,writable:!0,value:E}):ct[P]=E,wn=(ct,P)=>{for(var E in P||(P={}))iu.call(P,E)&&On(ct,E,P[E]);if(kn)for(var E of kn(P))nu.call(P,E)&&On(ct,E,P[E]);return ct};(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[961],{961:(ct,P,E)=>{"use strict";E.r(P),E.d(P,{LayoutModule:()=>eu});var T=E(9808),L=E(4619),M=E(4521),p=E(8783),S=E(7292),g=E(8259),A=E(5226),_=E.n(A),t=E(5e3),C=E(8306),y=E(3099),f=E(685),k=E.n(f);class N{constructor(l){this.config=l,this.subscribersCounter={},this.eventObservables$={},this.emptyConfig={url:"",options:{}},void 0===l&&(l=this.emptyConfig);const e=l.url,o=l.options,i=k()?k():f;this.ioSocket=i(e,o)}of(l){this.ioSocket.of(l)}on(l,e){this.ioSocket.on(l,e)}once(l,e){this.ioSocket.once(l,e)}connect(){return this.ioSocket.connect()}disconnect(l){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(l,...e){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(l,e){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(l){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(l){return this.subscribersCounter[l]||(this.subscribersCounter[l]=0),this.subscribersCounter[l]++,this.eventObservables$[l]||(this.eventObservables$[l]=new C.y(e=>{const o=i=>{e.next(i)};return this.ioSocket.on(l,o),()=>{this.subscribersCounter[l]--,0===this.subscribersCounter[l]&&(this.ioSocket.removeListener(l,o),delete this.eventObservables$[l])}}).pipe((0,y.B)())),this.eventObservables$[l]}fromOneTimeEvent(l){return new Promise(e=>this.once(l,e))}}function J(s){return new N(s)}const D=new t.OlP("__SOCKET_IO_CONFIG__");let V=(()=>{class s{static forRoot(e){return{ngModule:s,providers:[{provide:D,useValue:e},{provide:N,useFactory:J,deps:[D]}]}}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({}),s})();var tt=E(2340);let st=(()=>{class s extends N{constructor(){super({url:tt.N.API,options:{query:{nombreCurso:"Proyecto-"+localStorage.getItem("proyecto_id")},transports:["websocket"],jsonp:!1}}),this.proyecto_id="",this.outEven=new t.vpe,this.outEven2=new t.vpe,this.outEvenUsers=new t.vpe,this.outEvenUsersActive=new t.vpe,this.outEvenTablero=new t.vpe,this.outEvenTableroVoto=new t.vpe,this.outEvenContinue=new t.vpe,this.outEvenContinueVoto=new t.vpe,this.outEvenEtapaActive=new t.vpe,this.outEvenTableroMeta=new t.vpe,this.outEvenTableroVotoMeta=new t.vpe,this.outEvenTableroPreguntas=new t.vpe,this.outEvenTableroVotoPreguntas=new t.vpe,this.outEvenTableroNecesidades=new t.vpe,this.outEvenTableroPropositos=new t.vpe,this.outEvenTableroVotoPropositos=new t.vpe,this.outEvenTableroObjetivos=new t.vpe,this.outEvenTableroAcciones=new t.vpe,this.outEvenTableroMetricas=new t.vpe,this.outEvenTableroProblema=new t.vpe,this.outEvenTableroClientes=new t.vpe,this.outEvenTableroSolucion=new t.vpe,this.outEvenTableroMetricasClave=new t.vpe,this.outEvenTableroPropuesta=new t.vpe,this.outEvenTableroVentajas=new t.vpe,this.outEvenTableroCanales=new t.vpe,this.outEvenTableroEstructura=new t.vpe,this.outEvenTableroFlujo=new t.vpe,this.listen=()=>{this.ioSocket.on("evento",e=>this.outEven.emit(e)),this.ioSocket.on("evento2",e=>this.outEven2.emit(e)),this.ioSocket.on("evento_usuarios",e=>this.outEvenUsers.emit(e)),this.ioSocket.on("evento_usuarios_activos",e=>this.outEvenUsersActive.emit(e)),this.ioSocket.on("evento_tablero",e=>this.outEvenTablero.emit(e)),this.ioSocket.on("evento_tablero_voto",e=>this.outEvenTableroVoto.emit(e)),this.ioSocket.on("evento_continue",e=>this.outEvenContinue.emit(e)),this.ioSocket.on("evento_continue_voto",e=>this.outEvenContinueVoto.emit(e)),this.ioSocket.on("evento_etapa_active",e=>this.outEvenEtapaActive.emit(e)),this.ioSocket.on("evento_tablero_meta",e=>this.outEvenTableroMeta.emit(e)),this.ioSocket.on("evento_tablero_voto_meta",e=>this.outEvenTableroVotoMeta.emit(e)),this.ioSocket.on("evento_tablero_preguntas",e=>this.outEvenTableroPreguntas.emit(e)),this.ioSocket.on("evento_tablero_voto_preguntas",e=>this.outEvenTableroVotoPreguntas.emit(e)),this.ioSocket.on("evento_tablero_necesidades",e=>this.outEvenTableroNecesidades.emit(e)),this.ioSocket.on("evento_tablero_objetivos",e=>this.outEvenTableroObjetivos.emit(e)),this.ioSocket.on("evento_tablero_propositos",e=>this.outEvenTableroPropositos.emit(e)),this.ioSocket.on("evento_tablero_voto_propositos",e=>this.outEvenTableroVotoPropositos.emit(e)),this.ioSocket.on("evento_tablero_acciones",e=>this.outEvenTableroAcciones.emit(e)),this.ioSocket.on("evento_tablero_metricas",e=>this.outEvenTableroMetricas.emit(e)),this.ioSocket.on("evento_tablero_problema",e=>this.outEvenTableroProblema.emit(e)),this.ioSocket.on("evento_tablero_cliente",e=>this.outEvenTableroClientes.emit(e)),this.ioSocket.on("evento_tablero_solucion",e=>this.outEvenTableroSolucion.emit(e)),this.ioSocket.on("evento_tablero_metricas_clave",e=>this.outEvenTableroMetricasClave.emit(e)),this.ioSocket.on("evento_tablero_propuesta",e=>this.outEvenTableroPropuesta.emit(e)),this.ioSocket.on("evento_tablero_ventajas",e=>this.outEvenTableroVentajas.emit(e)),this.ioSocket.on("evento_tablero_canales",e=>this.outEvenTableroCanales.emit(e)),this.ioSocket.on("evento_tablero_estructura",e=>this.outEvenTableroEstructura.emit(e)),this.ioSocket.on("evento_tablero_flujo",e=>this.outEvenTableroFlujo.emit(e))},this.emitLogin=e=>{this.ioSocket.emit("login",e)},this.emitEvent=(e={})=>{this.ioSocket.emit("evento",e)},this.emitEventGetEtapa=(e={})=>{this.ioSocket.emit("evento_get_etapa",e)},this.emitEventSetEtapa=(e="")=>{this.ioSocket.emit("evento_set_etapa",e)},this.emitEventGet=(e={})=>{this.ioSocket.emit("evento_get",e)},this.emitEventGetClasi=(e={})=>{this.ioSocket.emit("evento_get_clasi",e)},this.emitEvent2=(e={})=>{this.ioSocket.emit("evento2",e)},this.emitEventUsers=(e={})=>{this.ioSocket.emit("evento_usuarios",e)},this.emitEventUsersActive=(e={})=>{this.ioSocket.emit("evento_usuarios_activos",e)},this.emitEventUsersInactive=(e={})=>{console.log("usuarios_inactivos_nombre_curso",localStorage.getItem("proyecto_id")),this.ioSocket.emit("evento_usuarios_inactivos",e)},this.emitEventTablero=(e={})=>{console.log("evento_tablero",e),this.ioSocket.emit("evento_tablero",e)},this.emitEventTableroVoto=(e={})=>{console.log("evento_tablero_voto",e),this.ioSocket.emit("evento_tablero_voto",e)},this.emitEventTableroSave=(e={})=>{console.log("evento_tablero_save",e),this.ioSocket.emit("evento_tablero_save",e)},this.emitEventTableroSaveClasi=(e={})=>{console.log("evento_tablero_save_clasi",e),this.ioSocket.emit("evento_tablero_save_clasi",e)},this.emitEventTableroSaveVoto=(e={})=>{console.log("evento_tablero_save_voto",e),this.ioSocket.emit("evento_tablero_save_voto",e)},this.emitEventTableroDelete=(e={})=>{console.log("evento_tablero_delete",e),this.ioSocket.emit("evento_tablero_delete",e)},this.emitEventTableroUpdate=(e={})=>{console.log("evento_tablero_update",e),this.ioSocket.emit("evento_tablero_update",e)},this.emitEventTableroMeta=(e={})=>{console.log("evento_tablero_meta",e),this.ioSocket.emit("evento_tablero_meta",e)},this.emitEventTableroVotoMeta=(e={})=>{console.log("evento_tablero_voto_meta",e),this.ioSocket.emit("evento_tablero_voto_meta",e)},this.emitEventTableroSaveMeta=(e={})=>{console.log("evento_tablero_save_meta",e),this.ioSocket.emit("evento_tablero_save_meta",e)},this.emitEventTableroSaveVotoMeta=(e={})=>{console.log("evento_tablero_save_voto_meta",e),this.ioSocket.emit("evento_tablero_save_voto_meta",e)},this.emitEventTableroDeleteMeta=(e={})=>{console.log("evento_tablero_delete_meta",e),this.ioSocket.emit("evento_tablero_delete_meta",e)},this.emitEventTableroUpdateMeta=(e={})=>{console.log("evento_tablero_update_meta",e),this.ioSocket.emit("evento_tablero_update_meta",e)},this.emitEventTableroPreguntas=(e={})=>{console.log("evento_tablero_preguntas",e),this.ioSocket.emit("evento_tablero_preguntas",e)},this.emitEventTableroVotoPreguntas=(e={})=>{console.log("evento_tablero_voto_preguntas",e),this.ioSocket.emit("evento_tablero_voto_preguntas",e)},this.emitEventTableroSavePreguntas=(e={})=>{console.log("evento_tablero_save_preguntas",e),this.ioSocket.emit("evento_tablero_save_preguntas",e)},this.emitEventTableroSaveVotoPreguntas=(e={})=>{console.log("evento_tablero_save_voto_preguntas",e),this.ioSocket.emit("evento_tablero_save_voto_preguntas",e)},this.emitEventTableroDeletePreguntas=(e={})=>{console.log("evento_tablero_delete_preguntas",e),this.ioSocket.emit("evento_tablero_delete_preguntas",e)},this.emitEventTableroUpdatePreguntas=(e={})=>{console.log("evento_tablero_update_preguntas",e),this.ioSocket.emit("evento_tablero_update_preguntas",e)},this.emitEventTableroSaveMapa=(e={})=>{console.log("evento_tablero_save_mapa",e),this.ioSocket.emit("evento_tablero_save_mapa",e)},this.emitEventTableroSaveNecesidades=(e={})=>{console.log("evento_tablero_save_necesidades",e),this.ioSocket.emit("evento_tablero_save_necesidades",e)},this.emitEventTableroUpdateNecesidades=(e={})=>{console.log("evento_tablero_update_necesidades",e),this.ioSocket.emit("evento_tablero_update_necesidades",e)},this.emitEventTableroNecesidades=(e={})=>{console.log("evento_tablero_necesidades",e),this.ioSocket.emit("evento_tablero_necesidades",e)},this.emitEventTableroDeleteNecesidades=(e={})=>{console.log("evento_tablero_delete_necesidades",e),this.ioSocket.emit("evento_tablero_delete_necesidades",e)},this.emitEventTableroPropositos=(e={})=>{console.log("evento_tablero_propositos",e),this.ioSocket.emit("evento_tablero_propositos",e)},this.emitEventTableroVotoPropositos=(e={})=>{console.log("evento_tablero_voto_propositos",e),this.ioSocket.emit("evento_tablero_voto_propositos",e)},this.emitEventTableroSavePropositos=(e={})=>{console.log("evento_tablero_save_propositos",e),this.ioSocket.emit("evento_tablero_save_propositos",e)},this.emitEventTableroSaveVotoPropositos=(e={})=>{console.log("evento_tablero_save_voto_propositos",e),this.ioSocket.emit("evento_tablero_save_voto_propositos",e)},this.emitEventTableroDeletePropositos=(e={})=>{console.log("evento_tablero_delete_propositos",e),this.ioSocket.emit("evento_tablero_delete_propositos",e)},this.emitEventTableroUpdatePropositos=(e={})=>{console.log("evento_tablero_update_propositos",e),this.ioSocket.emit("evento_tablero_update_propositos",e)},this.emitEventTableroSaveObjetivos=(e={})=>{console.log("evento_tablero_save_objetivos",e),this.ioSocket.emit("evento_tablero_save_objetivos",e)},this.emitEventTableroUpdateObjetivos=(e={})=>{console.log("evento_tablero_update_objetivos",e),this.ioSocket.emit("evento_tablero_update_objetivos",e)},this.emitEventTableroObjetivos=(e={})=>{console.log("evento_tablero_objetivos",e),this.ioSocket.emit("evento_tablero_objetivos",e)},this.emitEventTableroDeleteObjetivos=(e={})=>{console.log("evento_tablero_delete_objetivos",e),this.ioSocket.emit("evento_tablero_delete_objetivos",e)},this.emitEventTableroSaveAcciones=(e={})=>{console.log("evento_tablero_save_acciones",e),this.ioSocket.emit("evento_tablero_save_acciones",e)},this.emitEventTableroUpdateAcciones=(e={})=>{console.log("evento_tablero_update_acciones",e),this.ioSocket.emit("evento_tablero_update_acciones",e)},this.emitEventTableroAcciones=(e={})=>{console.log("evento_tablero_acciones",e),this.ioSocket.emit("evento_tablero_acciones",e)},this.emitEventTableroDeleteAcciones=(e={})=>{console.log("evento_tablero_delete_acciones",e),this.ioSocket.emit("evento_tablero_delete_acciones",e)},this.emitEventTableroSaveMetricas=(e={})=>{console.log("evento_tablero_save_metricas",e),this.ioSocket.emit("evento_tablero_save_metricas",e)},this.emitEventTableroUpdateMetricas=(e={})=>{console.log("evento_tablero_update_metricas",e),this.ioSocket.emit("evento_tablero_update_metricas",e)},this.emitEventTableroMetricas=(e={})=>{console.log("evento_tablero_metricas",e),this.ioSocket.emit("evento_tablero_metricas",e)},this.emitEventTableroDeleteMetricas=(e={})=>{console.log("evento_tablero_delete_metricas",e),this.ioSocket.emit("evento_tablero_delete_metricas",e)},this.emitEventTableroSaveProblema=(e={})=>{console.log("evento_tablero_save_problema",e),this.ioSocket.emit("evento_tablero_save_problema",e)},this.emitEventTableroUpdateProblema=(e={})=>{console.log("evento_tablero_update_problema",e),this.ioSocket.emit("evento_tablero_update_problema",e)},this.emitEventTableroProblema=(e={})=>{console.log("evento_tablero_problema",e),this.ioSocket.emit("evento_tablero_problema",e)},this.emitEventTableroDeleteProblema=(e={})=>{console.log("evento_tablero_delete_problema",e),this.ioSocket.emit("evento_tablero_delete_problema",e)},this.emitEventTableroSaveClientes=(e={})=>{console.log("evento_tablero_save_clientes",e),this.ioSocket.emit("evento_tablero_save_clientes",e)},this.emitEventTableroUpdateClientes=(e={})=>{console.log("evento_tablero_update_clientes",e),this.ioSocket.emit("evento_tablero_update_clientes",e)},this.emitEventTableroClientes=(e={})=>{console.log("evento_tablero_clientes",e),this.ioSocket.emit("evento_tablero_clientes",e)},this.emitEventTableroDeleteClientes=(e={})=>{console.log("evento_tablero_delete_clientes",e),this.ioSocket.emit("evento_tablero_delete_clientes",e)},this.emitEventTableroSaveSolucion=(e={})=>{console.log("evento_tablero_save_solucion",e),this.ioSocket.emit("evento_tablero_save_solucion",e)},this.emitEventTableroUpdateSolucion=(e={})=>{console.log("evento_tablero_update_solucion",e),this.ioSocket.emit("evento_tablero_update_solucion",e)},this.emitEventTableroSolucion=(e={})=>{console.log("evento_tablero_solucion",e),this.ioSocket.emit("evento_tablero_solucion",e)},this.emitEventTableroDeleteSolucion=(e={})=>{console.log("evento_tablero_delete_solucion",e),this.ioSocket.emit("evento_tablero_delete_solucion",e)},this.emitEventTableroSaveMetricasClave=(e={})=>{console.log("evento_tablero_save_metricas_clave",e),this.ioSocket.emit("evento_tablero_save_metricas_clave",e)},this.emitEventTableroUpdateMetricasClave=(e={})=>{console.log("evento_tablero_update_metricas_clave",e),this.ioSocket.emit("evento_tablero_update_metricas_clave",e)},this.emitEventTableroMetricasClave=(e={})=>{console.log("evento_tablero_metricas_clave",e),this.ioSocket.emit("evento_tablero_metricas_clave",e)},this.emitEventTableroDeleteMetricasClave=(e={})=>{console.log("evento_tablero_delete_metricas_clave",e),this.ioSocket.emit("evento_tablero_delete_metricas_clave",e)},this.emitEventTableroSavePropuesta=(e={})=>{console.log("evento_tablero_save_propuesta",e),this.ioSocket.emit("evento_tablero_save_propuesta",e)},this.emitEventTableroUpdatePropuesta=(e={})=>{console.log("evento_tablero_update_propuesta",e),this.ioSocket.emit("evento_tablero_update_propuesta",e)},this.emitEventTableroPropuesta=(e={})=>{console.log("evento_tablero_propuesta",e),this.ioSocket.emit("evento_tablero_propuesta",e)},this.emitEventTableroDeletePropuesta=(e={})=>{console.log("evento_tablero_delete_propuesta",e),this.ioSocket.emit("evento_tablero_delete_propuesta",e)},this.emitEventTableroSaveVentajas=(e={})=>{console.log("evento_tablero_save_ventajas",e),this.ioSocket.emit("evento_tablero_save_ventajas",e)},this.emitEventTableroUpdateVentajas=(e={})=>{console.log("evento_tablero_update_ventajas",e),this.ioSocket.emit("evento_tablero_update_ventajas",e)},this.emitEventTableroVentajas=(e={})=>{console.log("evento_tablero_ventajas",e),this.ioSocket.emit("evento_tablero_ventajas",e)},this.emitEventTableroDeleteVentajas=(e={})=>{console.log("evento_tablero_delete_ventajas",e),this.ioSocket.emit("evento_tablero_delete_ventajas",e)},this.emitEventTableroSaveCanales=(e={})=>{console.log("evento_tablero_save_canales",e),this.ioSocket.emit("evento_tablero_save_canales",e)},this.emitEventTableroUpdateCanales=(e={})=>{console.log("evento_tablero_update_canales",e),this.ioSocket.emit("evento_tablero_update_canales",e)},this.emitEventTableroCanales=(e={})=>{console.log("evento_tablero_canales",e),this.ioSocket.emit("evento_tablero_canales",e)},this.emitEventTableroDeleteCanales=(e={})=>{console.log("evento_tablero_delete_canales",e),this.ioSocket.emit("evento_tablero_delete_canales",e)},this.emitEventTableroSaveEstructura=(e={})=>{console.log("evento_tablero_save_estructura",e),this.ioSocket.emit("evento_tablero_save_estructura",e)},this.emitEventTableroUpdateEstructura=(e={})=>{console.log("evento_tablero_update_estructura",e),this.ioSocket.emit("evento_tablero_update_estructura",e)},this.emitEventTableroEstructura=(e={})=>{console.log("evento_tablero_estructura",e),this.ioSocket.emit("evento_tablero_estructura",e)},this.emitEventTableroDeleteEstructura=(e={})=>{console.log("evento_tablero_delete_estructura",e),this.ioSocket.emit("evento_tablero_delete_estructura",e)},this.emitEventTableroSaveFlujo=(e={})=>{console.log("evento_tablero_save_flujo",e),this.ioSocket.emit("evento_tablero_save_flujo",e)},this.emitEventTableroUpdateFlujo=(e={})=>{console.log("evento_tablero_update_flujo",e),this.ioSocket.emit("evento_tablero_update_flujo",e)},this.emitEventTableroFlujo=(e={})=>{console.log("evento_tablero_flujo",e),this.ioSocket.emit("evento_tablero_flujo",e)},this.emitEventTableroDeleteFlujo=(e={})=>{console.log("evento_tablero_delete_flujo",e),this.ioSocket.emit("evento_tablero_delete_flujo",e)},this.proyecto_id=localStorage.getItem("proyecto_id"),this.listen()}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var j=E(4728);let X=(()=>{class s{constructor(){this.loader=!1}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-loadmask"]],inputs:{loader:"loader"},decls:8,vars:0,consts:[[1,"loadWrapper"],[1,"loader"],[2,"margin","auto","display","table"],[1,"loader-label"],[1,"loader-label2"],[2,"color","#ffffff","margin","auto","display","table","font-family","Arial","align-items","center","padding-bottom","10px"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"Mb\xa0p\xa0"),t.qZA(),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"h5",5),t._uU(7,"Espere por favor ..."),t.qZA()()())},styles:['body[_ngcontent-%COMP%]{font-family:RobotoLight,sans-serif}.loadWrapper[_ngcontent-%COMP%]{background:rgb(0 0 0);width:100%;height:100%;position:fixed;top:0px;left:0px;z-index:99999}.loader[_ngcontent-%COMP%]{display:block;top:50%;left:50%;align-items:center;justify-content:center;transform:translate(-50%,-50%);position:relative}.loader-label[_ngcontent-%COMP%]{color:#fff;display:table;margin:auto;position:relative;font-family:Arial,Helvetica,sans-serif;font-size:48px;letter-spacing:4px;box-sizing:border-box;float:left}.loader-label[_ngcontent-%COMP%]:before{content:"";position:absolute;right:55px;bottom:20px;height:24px;width:7px;outline:1px solid #FFF;color:#027561;box-sizing:border-box;animation:animloader1 1s linear infinite alternate}.loader-label[_ngcontent-%COMP%]:after{content:"";width:4px;height:4px;background:rgb(2 117 97);position:absolute;right:57px;top:8px;box-sizing:border-box;animation:animloader 1s ease-out infinite alternate}.loader-label2[_ngcontent-%COMP%]{color:#fff;display:table;margin:auto;position:relative;font-family:Arial,Helvetica,sans-serif;font-size:48px;letter-spacing:4px;box-sizing:border-box;float:left}.loader-label2[_ngcontent-%COMP%]:before{content:"";position:absolute;right:9px;bottom:-52px;height:24px;width:7px;outline:1px solid #FFF;color:#027561;box-sizing:border-box;animation:animloader1 1s linear infinite alternate}.loader-label2[_ngcontent-%COMP%]:after{content:"";width:4px;height:4px;background:rgb(2 117 97);position:absolute;right:11px;top:8px;box-sizing:border-box;animation:animloader 1s ease-out infinite alternate}@keyframes animloader{0%{top:8px;transform:rotate(0) scale(1)}to{top:0px;transform:rotate(180deg) scale(1.5)}}@keyframes animloader1{0%{box-shadow:0 0 inset}to{box-shadow:0 -28px inset}}']}),s})(),ot=(()=>{class s{constructor(e,o){this.ref=e,this._proyectsService=o,this.title="cronometro",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.proyecto_id="",this.rol="Decisor",this.running=!1}ngOnInit(){this.start()}start(){this.running?(this.stop(),this.ref.detectChanges()):(this.running=!0,this.startTimer=setInterval(()=>{if(this.ms++,this.ms=this.ms<10?"0"+this.ms:this.ms,this.ms>=100&&(this.sec++,this.sec=this.sec<10?"0"+this.sec:this.sec,this.ms="00"),this.sec>=60&&(this.min++,this.min=this.min<10?"0"+this.min:this.min,this.sec="00","Decisor"==this.rol)){let e={tiempo:this.hr+":"+this.min};this._proyectsService.updateTime(this.proyecto_id,e).subscribe(o=>{console.log("tiempo_guardado",e)},o=>{})}this.min>=60&&(this.hr++,this.hr=this.hr<10?"0"+this.hr:this.hr,this.min="00"),this.ref.detectChanges()},10))}stop(){clearInterval(this.startTimer),this.running=!1,this.ref.detectChanges()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.sBO),t.Y36(j.a))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-timer"]],inputs:{ms:"ms",sec:"sec",min:"min",hr:"hr",proyecto_id:"proyecto_id",rol:"rol"},decls:8,vars:3,consts:[[1,"sw-container"],[1,"stopwatch"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()()()),2&e&&(t.xp6(3),t.hij("",o.hr," : "),t.xp6(2),t.hij("",o.min," : "),t.xp6(2),t.Oqu(o.sec))},styles:[".sw-container[_ngcontent-%COMP%]{background-color:#000;padding:0;border-radius:10px;color:#fff;text-align:center;width:200px;box-shadow:0 3px 6px #81818129,0 3px 6px #6969693b}.stopwatch[_ngcontent-%COMP%]{font-size:35px;margin-bottom:15px}.button.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:white;border:none;outline:0;cursor:pointer;border-radius:50%;width:35px}.button.container[_ngcontent-%COMP%]   .btn-play-pause[_ngcontent-%COMP%]{margin-right:10px}"]}),s})();const u=["acc"];function ht(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let gt=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(u,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,ht,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const vt=["ktAside"],Ot=["ktHeaderMobile"],Ct=["ktHeader"];function Tt(s,l){if(1&s&&t._UZ(0,"app-loadmask",39),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function St(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",40)(2,"span",41),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function kt(s,l){if(1&s&&t._UZ(0,"app-timer",42),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Et(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",43)(1,"div",44)(2,"span",45),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",46),t._UZ(4,"path",47),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",48),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Zt(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"path",51),t.qZA()(),t.BQk()}}function Ft(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",50),t._UZ(2,"path",52),t.qZA()()}}function Lt(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Qt=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_cache=[],this.notes_all=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTablero.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].notascp&&"como podriamos"==this.proyecto.proyecto_recursos[n].notascp.categoria&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].notascp.id,content:this.proyecto.proyecto_recursos[n].notascp.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note")),document.querySelectorAll("app-note").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all",this.notes_all),localStorage.setItem("notes_all",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapa(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase2",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase2"),this.socketWebService.emitEventTableroSave({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase2"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createNotaCp({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.nota_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_all",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdate({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_all",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdate(e),this._proyectsService.updateNotaCp(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTablero({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTablero({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDelete(n),localStorage.setItem("notes_all",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteNotaCp(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-layout"]],viewQuery:function(e,o){if(1&e&&(t.Gf(vt,7),t.Gf(Ot,7),t.Gf(Ct,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:46,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Tt,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,St,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,kt,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Entrevista al experto "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-entender-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"ul"),t.YNc(26,Et,7,2,"li",21),t.qZA(),t.TgZ(27,"div",22)(28,"textarea",23),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(29,"div",24),t.TgZ(30,"div",25),t._UZ(31,"video",26),t.qZA(),t.TgZ(32,"div",27)(33,"div",28),t.YNc(34,Zt,4,0,"ng-container",29),t.YNc(35,Ft,3,0,"ng-template",null,30,t.W1O),t.qZA(),t.TgZ(37,"div",31),t.YNc(38,Lt,2,0,"a",32),t.TgZ(39,"a",33),t._uU(40,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(41,"div",34)(42,"span",35),t.O4$(),t.TgZ(43,"svg",36),t._UZ(44,"rect",37)(45,"path",38),t.qZA()()()()),2&e){const i=t.MAs(36);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,gt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();var Wt=E(4189),At=E(4707),Dt=E(7579);const It=["canvasRef"],te=["tableroRef"];function zt(s,l){if(1&s&&t._UZ(0,"app-loadmask",33),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function ee(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",34)(2,"span",35),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function oe(s,l){if(1&s&&t._UZ(0,"app-timer",36),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function ce(s,l){if(1&s){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",37)(1,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.entrar("entender",i.fase>=1)}),t._uU(2," Dia 1 "),t.TgZ(3,"label",39),t._uU(4,"Entender"),t.qZA()(),t.TgZ(5,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.entrar("enfoque",i.fase>=9)}),t._uU(6," Dia 2 "),t.TgZ(7,"label",39),t._uU(8,"Enfoque soluci\xf3n"),t.qZA()(),t.TgZ(9,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.entrar("modelo",i.fase>=23)}),t._uU(10," Dia 3 "),t.TgZ(11,"label",39),t._uU(12,"Modelo de Negocios"),t.qZA()(),t.TgZ(13,"div",35),t._uU(14," Dia 4 "),t.TgZ(15,"label",39),t._uU(16,"Dia 4"),t.qZA()(),t.TgZ(17,"div",35),t._uU(18," Dia 5 "),t.TgZ(19,"label",39),t._uU(20,"Dia 5"),t.qZA()(),t.TgZ(21,"div",35),t._uU(22," Dia 6 "),t.TgZ(23,"label",39),t._uU(24,"Dia 6"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",e.fase>=1?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=9?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=23?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=41?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=41?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=41?"categoria-principal":"categoria-inactiva")}}function xe(s,l){if(1&s){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",37)(1,"div",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().entrar("principal",!0)}),t.TgZ(2,"label",41),t._uU(3,"Principal"),t.qZA()(),t.TgZ(4,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase1",i.fase>=1)}),t._uU(5," Entender - Paso 1 "),t.TgZ(6,"label",39),t._uU(7,"Entender al experto"),t.qZA()(),t.TgZ(8,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase4",i.fase>=4)}),t._uU(9," Entender - Paso 2 "),t.TgZ(10,"label",39),t._uU(11,"Metas a largo plazo"),t.qZA()(),t.TgZ(12,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase6",i.fase>=6)}),t._uU(13," Entender - Paso 3 "),t.TgZ(14,"label",39),t._uU(15,"Preguntas del Sprint"),t.qZA()(),t.TgZ(16,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase8",i.fase>=8)}),t._uU(17," Entender - Paso 4 "),t.TgZ(18,"label",42),t._uU(19,"Mapa de Experiencia de Usuario"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",e.fase>=1?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=4?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=6?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=8?"categoria-mapa-principal":"categoria-mapa-inactiva")}}function vi(s,l){if(1&s){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",37)(1,"div",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().entrar("principal",!0)}),t.TgZ(2,"label",41),t._uU(3,"Principal"),t.qZA()(),t.TgZ(4,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase9",i.fase>=9)}),t._uU(5," Scope-Canvas - Paso 1 "),t.TgZ(6,"label",39),t._uU(7,"Necesidades"),t.qZA()(),t.TgZ(8,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase13",i.fase>=13)}),t._uU(9," Scope-Canvas - Paso 2 "),t.TgZ(10,"label",39),t._uU(11,"Prop\xf3sito"),t.qZA()(),t.TgZ(12,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase15",i.fase>=15)}),t._uU(13," Scope-Canvas - Paso 3 "),t.TgZ(14,"label",39),t._uU(15,"Objetivos"),t.qZA()(),t.TgZ(16,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase19",i.fase>=19)}),t._uU(17," Scope-Canvas - Paso 4 "),t.TgZ(18,"label",39),t._uU(19,"Acciones"),t.qZA()(),t.TgZ(20,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase21",i.fase>=21)}),t._uU(21," Scope-Canvas - Paso 5 "),t.TgZ(22,"label",39),t._uU(23,"M\xe9tricas"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",e.fase>=9?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=13?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=15?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=19?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=21?"categoria-principal":"categoria-inactiva")}}function bi(s,l){if(1&s){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",37)(1,"div",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().entrar("principal",!0)}),t.TgZ(2,"label",41),t._uU(3,"Principal"),t.qZA()(),t.TgZ(4,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase23",i.fase>=23)}),t._uU(5," Lean-Canvas - Paso 1 "),t.TgZ(6,"label",39),t._uU(7,"Segmento Clientes"),t.qZA()(),t.TgZ(8,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase25",i.fase>=25)}),t._uU(9," Lean-Canvas - Paso 2 "),t.TgZ(10,"label",39),t._uU(11,"Problema"),t.qZA()(),t.TgZ(12,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase27",i.fase>=27)}),t._uU(13," Lean-Canvas - Paso 3 "),t.TgZ(14,"label",39),t._uU(15,"Soluci\xf3n"),t.qZA()(),t.TgZ(16,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase29",i.fase>=29)}),t._uU(17," Lean-Canvas - Paso 4 "),t.TgZ(18,"label",39),t._uU(19,"M\xe9tricas Clave"),t.qZA()(),t.TgZ(20,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase31",i.fase>=31)}),t._uU(21," Lean-Canvas - Paso 5 "),t.TgZ(22,"label",39),t._uU(23,"Propuesta de Valor"),t.qZA()(),t.TgZ(24,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase33",i.fase>=33)}),t._uU(25," Lean-Canvas - Paso 6 "),t.TgZ(26,"label",39),t._uU(27,"Ventaja Especial"),t.qZA()(),t.TgZ(28,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase35",i.fase>=35)}),t._uU(29," Lean-Canvas - Paso 7 "),t.TgZ(30,"label",39),t._uU(31,"Canales"),t.qZA()(),t.TgZ(32,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase37",i.fase>=37)}),t._uU(33," Lean-Canvas - Paso 8 "),t.TgZ(34,"label",39),t._uU(35,"Estructura de Costos"),t.qZA()(),t.TgZ(36,"div",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.ir("/fase39",i.fase>=39)}),t._uU(37," Lean-Canvas - Paso 9 "),t.TgZ(38,"label",39),t._uU(39,"Flujo de Ingresos"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",e.fase>=23?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=25?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=27?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=29?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=31?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=33?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=35?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=37?"categoria-principal":"categoria-inactiva"),t.xp6(4),t.Q6J("ngClass",e.fase>=39?"categoria-principal":"categoria-inactiva")}}function xi(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",45),t.qZA()(),t.BQk()}}function be(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"path",46),t.qZA()()}}let He=(()=>{class s{constructor(e,o,i,n,a,v){this.route=e,this.socketWebService=o,this._proyectsService=i,this.el=n,this.ref=a,this._router=v,this.notas=[],this.tablero=[],this.tablero2=[],this.votos=[],this.voto_tablero=[],this.voto_maximo=[],this._user={},this.equipo=[],this.etapa="principal",this.fase="",this.filteredTablero=new At.t(1),this.filteredNotas=new At.t(1),this._onDestroy=new Dt.x,this.width=50,this.height=50,this.points=[],this.isAvailabe=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(H=>{const{usuarios_active:G}=H;this.readUsersActive(G,!1)});const U=localStorage.getItem("usuario");let R=JSON.parse(U);this.usuario=R,this.usuario.active=!0}ngOnInit(){this.route.params.subscribe(o=>{this.proyecto_id=o.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id);const e=localStorage.getItem("usuario");this._user=JSON.parse(e)}ngAfterViewInit(){const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),this._onDestroy.next(),this._onDestroy.complete()}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(R=>R.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let R=this.proyecto.tiempo.split(":");this.hr=R[0],this.min=R[1]}this.showTimer=!0;let n=this.proyecto.etapa_activa.split("/");this.fase=parseInt((n.length>0?n[n.length-1]:"").substring(4)),this.tablero=[],this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}entrar(e,o){o&&(this.etapa=e,this.ref.detectChanges())}ir(e,o){o&&this._router.navigate(["/proyect-init/"+this.proyecto_id+e])}onPlayPause(){if(this.playing=!0,$("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),$("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=$("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),$("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),$("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.gz),t.Y36(st),t.Y36(j.a),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(M.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-principal"]],viewQuery:function(e,o){if(1&e&&(t.Gf(It,5),t.Gf(te,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},decls:39,vars:12,consts:[[1,"",2,"overflow","hidden"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],["class","container principal-container",4,"ngIf"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[1,"container","principal-container"],[3,"ngClass","click"],[1,"label-principal"],[1,"button-principal",3,"click"],[1,"label-button-principal"],[1,"label-mapa-principal"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,zt,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,ee,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,oe,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.YNc(19,ce,25,6,"div",18),t.YNc(20,xe,20,4,"div",18),t.YNc(21,vi,24,5,"div",18),t.YNc(22,bi,40,9,"div",18),t.kcU(),t._UZ(23,"div",19),t.TgZ(24,"div",20),t._UZ(25,"video",21),t.qZA(),t.TgZ(26,"div",22)(27,"div",23),t.YNc(28,xi,4,0,"ng-container",24),t.YNc(29,be,3,0,"ng-template",null,25,t.W1O),t.qZA(),t.TgZ(31,"div",26)(32,"a",27),t._uU(33,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(34,"div",28)(35,"span",29),t.O4$(),t.TgZ(36,"svg",30),t._UZ(37,"rect",31)(38,"path",32),t.qZA()()()()),2&e){const i=t.MAs(30);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(7),t.Q6J("ngIf","principal"==o.etapa),t.xp6(1),t.Q6J("ngIf","entender"==o.etapa),t.xp6(1),t.Q6J("ngIf","enfoque"==o.etapa),t.xp6(1),t.Q6J("ngIf","modelo"==o.etapa),t.xp6(1),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,M.yS],styles:[".fondo-video{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1140px 0 0;opacity:.9}.video-container{text-align:center;position:absolute;width:100%;margin:-1110px 0 0}.video-container video{border-radius:10px;box-shadow:0 0 10px 3px #fff}.title-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container h1{width:1320px;text-align:start;color:#fff}.instructions-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.categoria-inactiva{width:300px;height:300px;margin:10px;float:left;background:#7c7c7c;color:#fff;align-items:center;align-content:center;position:relative}.categoria-principal{width:300px;height:300px;margin:10px;float:left;background:#13263c;color:#fff;align-items:center;align-content:center;position:relative;cursor:pointer}.categoria-principal:hover{width:300px;height:300px;margin:10px;float:left;background:#03A588;color:#fff;align-items:center;align-content:center;position:relative;cursor:pointer}.categoria-mapa-inactiva{width:940px;height:300px;margin:10px;float:left;background:#7c7c7c;color:#fff;align-items:center;align-content:center;position:relative}.categoria-mapa-principal{width:940px;height:300px;margin:10px;float:left;background:#13263c;color:#fff;align-items:center;align-content:center;position:relative;cursor:pointer}.categoria-mapa-principal:hover{width:940px;height:300px;margin:10px;float:left;background:#03A588;color:#fff;align-items:center;align-content:center;position:relative;cursor:pointer}.button-principal{width:940px;height:50px;margin:10px;float:left;background:#13263c;color:#fff;align-items:center;align-content:center;position:relative;cursor:pointer}.button-principal:hover{width:940px;height:50px;margin:10px;float:left;background:#03A588;color:#fff;align-items:center;align-content:center;position:relative;cursor:pointer}.label-principal{position:absolute;left:30%;top:50%;cursor:pointer}.label-mapa-principal{position:absolute;left:40%;top:50%;cursor:pointer}.label-button-principal{position:absolute;left:45%;top:25%;cursor:pointer}.principal-container{width:1000px;min-height:600px;overflow:auto;position:relative;padding:20px 20px 40px;margin:auto auto 70px}:host{height:100%;margin:0}:host .flex-root{height:100%}.page-loaded app-layout{opacity:1;transition:opacity 1s ease-in-out}.videoOn{display:inline}.videoOff{display:none}.app{width:250px;float:left;margin-left:10px}.toolbar{position:fixed;right:60px;height:55px;width:100%;background:transparent;color:gray;font-weight:700}.add-category{float:right;margin-left:auto;color:#fff;cursor:pointer;background:#2592f1;width:160px;height:40px;border:1px solid #fff;border-radius:67px;padding-left:5px;padding-top:10px}.dark-modal{background-color:#292b2c!important;color:#fff!important}.dark-modal .close{color:#fff!important}.notes-container{width:100%;max-width:100%;height:230px;margin:0 25px 25px 0;display:grid}.notes-list{border:solid 1px #ccc;min-height:170px;background:#cccaca;border-radius:4px;overflow:auto;display:flex;padding:10px}.notes-box{padding:0 10px;border-bottom:solid 1px #ccc;word-break:break-all;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#ffc904;font-size:14px;width:150px;min-width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin-left:20px;margin-bottom:0}.example-container{width:300px;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.example-container:first-child{width:100%;background-color:#000!important;max-width:100%;height:230px;margin:0 25px 25px 0;display:grid}.example-list{border:solid 1px #ccc;min-height:60px;background:#cccaca;border-radius:4px;overflow:hidden;display:block;padding:10px}.example-box{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;word-break:break-all;justify-content:space-between;box-sizing:border-box;cursor:move;background:#ffc904;font-size:14px;width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin:auto auto 20px}.example-box:nth-child(even){transform:rotate(0)}.example-box:nth-child(odd){transform:rotate(0)}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box:last-child{border:none}.example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.votos{position:absolute;top:10px;right:10px;color:#fff;width:24px;height:24px;font-size:16px;padding-left:6px;padding-right:6px;background-color:#000;border:1px solid #000;border-radius:50%}.voto-maximo{position:absolute;top:-10px;left:-12px;font-size:28px;width:32px!important;height:32px!important;color:green}.votar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#05b8ff;border:1px solid #05b8ff;border-radius:10%}.votar:hover{background-color:#0751ff}.votar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#00c749;border:1px solid #00c749;border-radius:10%}.votar-maximo:hover{background-color:#05720d}.quitar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar:hover{background-color:#ff0707}.quitar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar-maximo:hover{background-color:#ff0707}canvas{position:absolute}@media (max-width: 1200px){.video-container{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}\n"],encapsulation:2,changeDetection:0}),s})();var ut=E(3737),mt=E(5698),$t=E(2722);const yi=["acc"];function Ci(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let wi=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-categorizacion-notas-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(yi,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Ci,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();var De=E(393);const Eo=["canvasRef"],Be=["tableroRef"];function ye(s,l){if(1&s&&t._UZ(0,"app-loadmask",46),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Te(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",47)(2,"span",48),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function qe(s,l){if(1&s&&t._UZ(0,"app-timer",49),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function ki(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div",55)(1,"span",56),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),n=i.$implicit,a=i.index;return t.oxw().deleteCategory(n.data,a)}),t.O4$(),t.TgZ(2,"svg",57),t._UZ(3,"path",58),t.qZA()()()}}function Xe(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"h2",59),t.NdJ("blur",function(i){t.CHM(e);const n=t.oxw().index;return t.oxw().onFocusOut(i,n)}),t._uU(1),t.qZA()}if(2&s){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.title)}}function No(s,l){if(1&s&&(t.TgZ(0,"h2",60),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.title)}}function Do(s,l){if(1&s&&(t.TgZ(0,"div",61),t._uU(1),t.qZA()),2&s){const e=l.$implicit,o=t.oxw().index;t.Q6J("ngClass",0==o?"notes-box":"example-box"),t.xp6(1),t.hij("",e.content," ")}}function Oi(s,l){if(1&s){const e=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"div",48),t.YNc(2,ki,4,0,"div",50),t.YNc(3,Xe,2,1,"h2",51),t.YNc(4,No,2,1,"h2",52),t.TgZ(5,"div",53),t.NdJ("cdkDropListDropped",function(i){return t.CHM(e),t.oxw().drop(i)}),t.YNc(6,Do,2,2,"div",54),t.qZA()(),t.BQk()}if(2&s){const e=l.$implicit,o=l.index;t.xp6(1),t.Q6J("ngClass",0==o?"notes-container":"example-container"),t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",o>0),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("cdkDropListData",e.data)("ngClass",0==o?"notes-list":"example-list"),t.xp6(1),t.Q6J("ngForOf",e.data)}}function Fe(s,l){if(1&s&&(t.O4$(),t.kcU(),t.ynx(0),t._UZ(1,"img",62),t.TgZ(2,"label",63),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function je(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",64),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",65),t._UZ(3,"path",66),t.qZA()(),t.BQk()}}function qo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",64),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",65),t._UZ(2,"path",67),t.qZA()()}}function Fo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",68),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveCategoryAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let he=(()=>{class s{constructor(e,o,i,n,a,v){this.route=e,this.socketWebService=o,this._proyectsService=i,this.el=n,this.ref=a,this._router=v,this.notas=[],this.tablero=[],this.tablero2=[],this.votos=[],this.voto_tablero=[],this.voto_maximo=[],this._user={},this.equipo=[],this.filteredTablero=new At.t(1),this.filteredNotas=new At.t(1),this._onDestroy=new Dt.x,this.width=50,this.height=50,this.points=[],this.isAvailabe=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.onMouseMove=H=>{this.write(H)},this.onClick=H=>{"canvasId"===H.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEven.subscribe(H=>{const{tablero:G}=H;this.readBoard(G,!1)}),this.socketWebService.outEvenContinueVoto.subscribe(H=>{this.continue()}),this.socketWebService.outEven2.subscribe(H=>{const{prevPost:G}=H;let m=G.usuario.split(" ")[0].replace("-","");m=m.replace(".",""),m=m.replace("@",""),-1==this.equipo.findIndex(Yt=>Yt==m)&&this.equipo.push(m),this.ref.detectChanges(),jQuery("#puntero-"+m).css({left:G.x,top:G.y,display:"block"}),jQuery("#equipo-"+m).css({left:G.x+30,top:G.y,display:"block"}),this.writeSingle(G,!1)}),this.socketWebService.outEvenUsersActive.subscribe(H=>{const{usuarios_active:G}=H;this.readUsersActive(G,!1)}),this.socketWebService.outEvenEtapaActive.subscribe(H=>{this.etapa_active(H)});const U=localStorage.getItem("usuario");let R=JSON.parse(U);this.usuario=R,this.usuario.active=!0}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}ngOnInit(){this.route.params.subscribe(o=>{this.proyecto_id=o.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id);const e=localStorage.getItem("usuario");this._user=JSON.parse(e)}ngAfterViewInit(){this.setInitialValue(),this.render();const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),$("#myVideo").trigger("play"),window.addEventListener("scroll",this.disableScroll),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),this._onDestroy.next(),this._onDestroy.complete(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0,this.tablero=[];let i=[],n=[];for(let a in this.proyecto.proyecto_recursos)if(null!=this.proyecto.proyecto_recursos[a].notascp)if("como podriamos"!=this.proyecto.proyecto_recursos[a].notascp.categoria){-1==i.findIndex(R=>R.categoria==this.proyecto.proyecto_recursos[a].notascp.categoria)&&i.push({categoria:this.proyecto.proyecto_recursos[a].notascp.categoria,data:[]});const U=i.findIndex(R=>R.categoria==this.proyecto.proyecto_recursos[a].notascp.categoria);i[U].data.push({id:this.proyecto.proyecto_recursos[a].notascp.id,content:this.proyecto.proyecto_recursos[a].notascp.contenido,votos:this.proyecto.proyecto_recursos[a].notascp.votos,detalle:this.proyecto.proyecto_recursos[a].notascp.detalle})}else n.push({id:this.proyecto.proyecto_recursos[a].notascp.id,content:this.proyecto.proyecto_recursos[a].notascp.contenido,votos:this.proyecto.proyecto_recursos[a].notascp.votos,detalle:this.proyecto.proyecto_recursos[a].notascp.detalle});console.log("categorias",i),this.tablero.push(n.length>0?{title:"como podriamos",data:n}:{title:"como podriamos",data:[]});for(let a in i)this.tablero.push({title:i[a].categoria,data:i[a].data});this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice()),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}setInitialValue(){this.filteredTablero.pipe((0,mt.q)(1),(0,$t.R)(this._onDestroy)).subscribe(()=>{}),this.filteredNotas.pipe((0,mt.q)(1),(0,$t.R)(this._onDestroy)).subscribe(()=>{})}writeBoard(){console.log("notas",this.notas),this.socketWebService.emitEvent({tablero:JSON.stringify(this.tablero)}),this.saveCategoryBD()}readBoard(e,o){const i=JSON.parse(e);console.log("readBoard",i),this.tablero=[];for(let n in i)this.tablero.push({title:i[n].title,data:i[n].data});this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice())}readNotas(e,o){const i=JSON.parse(e);console.log("readNota",i),this.notas=i,this.filteredNotas.next(this.notas.slice())}addCategory(){this.tablero.push({title:"Categoria "+this.tablero.length,data:[]}),this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice()),this.socketWebService.emitEvent({tablero:JSON.stringify(this.tablero)})}deleteCategory(e,o){console.log("contenido",e);for(let i=0;i<e.length;i++)this.tablero[0].data.push(e[i]);this.tablero.splice(o,1),this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice()),this.socketWebService.emitEvent({tablero:JSON.stringify(this.tablero)}),this.saveCategoryBD()}onFocusOut(e,o){this.tablero[o].title=e.target.innerText,this.tablero2=JSON.stringify(this.tablero),this.socketWebService.emitEvent({tablero:JSON.stringify(this.tablero)})}saveCategoryBD(){let e=0,o=[];if(this.tablero.length>1){for(let n in this.tablero){let a=[];for(let v in this.tablero[n].data)a.push({id:this.tablero[n].data[v].id,label:this.tablero[n].data[v].content,votos:this.tablero[n].data[v].votos,voto_maximo:!1,detalle:this.tablero[n].data[v].detalle});o.push({title:this.tablero[n].title,data:a}),e+=1}this._proyectsService.updateEtapa(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase2",tablero:o,type:"clasificacion"}).subscribe(n=>{},n=>{})}}saveCategoryAll(){console.log("save_category_all",this.tablero),localStorage.setItem("category_all",this.tablero2);let e=0,o=[];for(let n in this.tablero){let a=[];for(let v in this.tablero[n].data)a.push({id:this.tablero[n].data[v].id,label:this.tablero[n].data[v].content,votos:this.tablero[n].data[v].votos,voto_maximo:!1,detalle:this.tablero[n].data[v].detalle});e>0&&o.push({title:this.tablero[n].title,data:a}),e+=1}console.log("guardar_clasificacion",o),this._proyectsService.updateEtapa(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase3",tablero:o,type:"clasificacion"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase3"),this.socketWebService.emitEventTableroSaveClasi({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase3"])}etapa_active(e){""!=e&&this._router.navigate([e])}onPlayPause(){if(this.playing=!0,$("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),$("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=$("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),$("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),$("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,this.ref.detectChanges()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.gz),t.Y36(st),t.Y36(j.a),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(M.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-boards"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Eo,5),t.Gf(Be,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:56,vars:13,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],["tableroRef",""],[1,"flex","flex-auto","p-6","sm:p-10"],["cdkDropListGroup",""],["id","toolbar","tabindex","0",1,"toolbar",2,"position","static !important"],[1,"add-category","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus",2,"margin-top","-40px","margin-left","120px"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["class","note_toolbar text-end","style","position: absolute; width: 300px;cursor: text;",4,"ngIf"],["style","color: #fff;text-transform: capitalize;line-height: 2;","onkeypress","return (this.innerText.length <= 20)","contenteditable","true","data-max-length","20",3,"blur",4,"ngIf"],["style","color: #fff;text-transform: capitalize;",4,"ngIf"],["cdkDropList","",3,"cdkDropListData","ngClass","cdkDropListDropped"],["cdkDrag","",3,"ngClass",4,"ngFor","ngForOf"],[1,"note_toolbar","text-end",2,"position","absolute","width","300px","cursor","text"],[1,"close","material-icons",2,"cursor","pointer","color","#fff",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["onkeypress","return (this.innerText.length <= 20)","contenteditable","true","data-max-length","20",2,"color","#fff","text-transform","capitalize","line-height","2",3,"blur"],[2,"color","#fff","text-transform","capitalize"],["cdkDrag","",3,"ngClass"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,ye,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Te,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,qe,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Categorizaci\xf3n de notas "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-categorizacion-notas-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"div",21,22)(27,"div",23)(28,"div",24)(29,"div",25)(30,"a",26),t.NdJ("click",function(){return o.addCategory()}),t._uU(31," Agregar Categoria "),t.O4$(),t.TgZ(32,"svg",27),t._UZ(33,"path",28),t.qZA()()(),t.YNc(34,Oi,7,7,"ng-container",9),t.ALo(35,"async"),t.qZA()()(),t.YNc(36,Fe,4,3,"ng-container",9),t.kcU(),t._UZ(37,"canvas",29,30),t.qZA(),t._UZ(39,"div",31),t.TgZ(40,"div",32),t._UZ(41,"video",33),t.qZA(),t.TgZ(42,"div",34)(43,"div",35),t.YNc(44,je,4,0,"ng-container",36),t.YNc(45,qo,3,0,"ng-template",null,37,t.W1O),t.qZA(),t.TgZ(47,"div",38),t.YNc(48,Fo,2,0,"a",39),t.TgZ(49,"a",40),t._uU(50,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(51,"div",41)(52,"span",42),t.O4$(),t.TgZ(53,"svg",43),t._UZ(54,"rect",44)(55,"path",45),t.qZA()()()()),2&e){const i=t.MAs(46);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(22),t.Q6J("ngForOf",t.lcZ(35,11,o.filteredTablero)),t.xp6(2),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,wi,De.PQ,ut.Fd,ut.Wj,ut.Zt,M.yS],pipes:[T.Ov],styles:[".fondo-video{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1140px 0 0;opacity:.9}.video-container{text-align:center;position:absolute;width:100%;margin:-1110px 0 0}.video-container video{border-radius:10px;box-shadow:0 0 10px 3px #fff}.title-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container h1{width:1320px;text-align:start;color:#fff}.instructions-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.tablero-container{min-width:100%;min-height:600px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0}:host{height:100%;margin:0}:host .flex-root{height:100%}.page-loaded app-layout{opacity:1;transition:opacity 1s ease-in-out}.videoOn{display:inline}.videoOff{display:none}.app{width:250px;float:left;margin-left:10px}.toolbar{position:fixed;right:60px;height:55px;width:100%;background:transparent;color:gray;font-weight:700}.add-category{float:right;margin-left:auto;color:#fff;cursor:pointer;background:#2592f1;width:160px;height:40px;border:1px solid #fff;border-radius:67px;padding-left:5px;padding-top:10px}.dark-modal{background-color:#292b2c!important;color:#fff!important}.dark-modal .close{color:#fff!important}.notes-container{width:100%;max-width:100%;height:230px;margin:0 25px 25px 0;display:grid}.notes-list{border:solid 1px #ccc;min-height:170px;background:#cccaca;border-radius:4px;overflow:auto;display:flex;padding:10px}.notes-box{padding:0 10px;border-bottom:solid 1px #ccc;word-break:break-all;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#ffc;font-size:14px;width:150px;min-width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin-left:20px;margin-bottom:0}.notes-box:nth-child(even){background:#cfc}.notes-box:nth-child(3n){background:#ccf}.notes-box:nth-child(5n){background:#ffc}.notes-box:hover,ul li:focus{box-shadow:10px 10px 7px #000000b3}.example-container{width:300px;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.example-container:first-child{width:100%;background-color:#000!important;max-width:100%;height:230px;margin:0 25px 25px 0;display:grid}.example-list{border:solid 1px #ccc;min-height:60px;background:#cccaca;border-radius:4px;overflow:hidden;display:block;padding:10px}.example-box{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;word-break:break-all;justify-content:space-between;box-sizing:border-box;cursor:move;background:#ffc;font-size:14px;width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin:auto auto 20px}.example-box:nth-child(even){background:#cfc}.example-box:nth-child(3n){background:#ccf}.example-box:nth-child(5n){background:#ffc}.example-box:hover,ul li:focus{box-shadow:10px 10px 7px #000000b3}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box:last-child{border:none}.example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.votos{position:absolute;top:10px;right:10px;color:#fff;width:24px;height:24px;font-size:16px;padding-left:6px;padding-right:6px;background-color:#000;border:1px solid #000;border-radius:50%}.voto-maximo{position:absolute;top:-10px;left:-12px;font-size:28px;width:32px!important;height:32px!important;color:green}.votar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#05b8ff;border:1px solid #05b8ff;border-radius:10%}.votar:hover{background-color:#0751ff}.votar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#00c749;border:1px solid #00c749;border-radius:10%}.votar-maximo:hover{background-color:#05720d}.quitar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar:hover{background-color:#ff0707}.quitar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar-maximo:hover{background-color:#ff0707}canvas{position:absolute}@media (max-width: 1200px){.video-container{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}\n"],encapsulation:2,changeDetection:0}),s})();const ne=["acc"];function po(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Ti=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-voto-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ne,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,po,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Io=["canvasRef"],Uo=["tableroRef"];function Ie(s,l){if(1&s&&t._UZ(0,"app-loadmask",42),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Ue(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",43)(2,"span",44),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Mi(s,l){if(1&s&&t._UZ(0,"app-timer",45),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Pi(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().quitar(n,i)}),t._uU(1,"Quitar"),t.qZA()}}function uo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().votar(n,i)}),t._uU(1,"Votar"),t.qZA()}}function Ke(s,l){if(1&s&&(t.TgZ(0,"div",50),t._uU(1),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.YNc(4,Pi,2,0,"button",52),t.YNc(5,uo,2,0,"button",53),t.qZA()),2&s){const e=l.$implicit,o=l.index,i=t.oxw().index,n=t.oxw();t.xp6(1),t.hij("",e.label," "),t.xp6(2),t.Oqu(e.votos?e.votos:0),t.xp6(1),t.Q6J("ngIf",n.verifyVoto(i,o)&&e.votos>0),t.xp6(1),t.Q6J("ngIf",n.num_votos<n.maximo_votos)}}function Si(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",46)(2,"h2",47),t._uU(3),t.qZA(),t.TgZ(4,"div",48),t.NdJ("cdkDropListDropped",function(i){return t.CHM(e),t.oxw().drop(i)}),t.YNc(5,Ke,6,4,"div",49),t.qZA()(),t.BQk()}if(2&s){const e=l.$implicit;t.xp6(3),t.Oqu(e.title),t.xp6(1),t.Q6J("cdkDropListData",e.data),t.xp6(1),t.Q6J("ngForOf",e.data)}}function Ai(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",56),t.TgZ(2,"label",57),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Zi(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"path",60),t.qZA()(),t.BQk()}}function Lo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",59),t._UZ(2,"path",61),t.qZA()()}}function Ei(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",62),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveVotoAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Ni=(()=>{class s{constructor(e,o,i,n,a,v){this.route=e,this.socketWebService=o,this._proyectsService=i,this.el=n,this.ref=a,this._router=v,this.notas=[],this.tablero=[],this.tablero2=[],this.votos=[],this.voto_tablero=[],this.voto_maximo=[],this.maximo_votos=0,this.num_votos=0,this._user={},this.equipo=[],this.filteredTablero=new At.t(1),this._onDestroy=new Dt.x,this.width=50,this.height=50,this.points=[],this.isAvailabe=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.onMouseMove=H=>{this.write(H)},this.onClick=H=>{"canvasId"===H.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenTableroVoto.subscribe(H=>{const{tablero:G}=H;this.readBoard(G,!1)}),this.socketWebService.outEven2.subscribe(H=>{const{prevPost:G}=H;let m=G.usuario.split(" ")[0].replace("-","");m=m.replace(".",""),m=m.replace("@",""),-1==this.equipo.findIndex(Yt=>Yt==m)&&this.equipo.push(m),this.ref.detectChanges(),jQuery("#puntero-"+m).css({left:G.x,top:G.y,display:"block"}),jQuery("#equipo-"+m).css({left:G.x+30,top:G.y,display:"block"}),this.writeSingle(G,!1)}),this.socketWebService.outEvenUsersActive.subscribe(H=>{const{usuarios_active:G}=H;this.readUsersActive(G,!1)}),this.socketWebService.outEvenEtapaActive.subscribe(H=>{this.etapa_active(H)}),this.socketWebService.outEvenContinueVoto.subscribe(H=>{this.continue()});const U=localStorage.getItem("usuario");let R=JSON.parse(U);this.usuario=R,this.usuario.active=!0}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}ngOnInit(){this.route.params.subscribe(o=>{this.proyecto_id=o.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id);const e=localStorage.getItem("usuario");this._user=JSON.parse(e)}ngAfterViewInit(){this.setInitialValue(),this.render();const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),this._onDestroy.next(),this._onDestroy.complete(),window.removeEventListener("scroll",this.disableScroll)}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase4"])}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,this.maximo_votos="Decisor"==this.rol?4:2,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0,this.tablero=[];let i=[];for(let n in this.proyecto.proyecto_recursos)if(null!=this.proyecto.proyecto_recursos[n].notascp){-1==i.findIndex(H=>H.categoria==this.proyecto.proyecto_recursos[n].notascp.categoria)&&i.push({categoria:this.proyecto.proyecto_recursos[n].notascp.categoria,data:[]});const v=i.findIndex(H=>H.categoria==this.proyecto.proyecto_recursos[n].notascp.categoria);i[v].data.push({id:this.proyecto.proyecto_recursos[n].notascp.id,label:this.proyecto.proyecto_recursos[n].notascp.contenido,votos:this.proyecto.proyecto_recursos[n].notascp.votos,detalle:JSON.parse(this.proyecto.proyecto_recursos[n].notascp.detalle)||[]});let U=JSON.parse(this.proyecto.proyecto_recursos[n].notascp.detalle)||[];const R=U.findIndex(H=>H.usuario_id==this.usuario.id);-1!=R&&(this.num_votos=this.num_votos+U[R].votos)}for(let n in i)this.tablero.push({title:i[n].categoria,data:i[n].data});this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice()),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}saveVotoAll(){console.log("save_voto_all",this.tablero);let e=[],o=[],i=[],n="",a="",v="",U=0;for(let H in this.tablero){let G=[];for(let lt in this.tablero[H].data){G.push({id:this.tablero[H].data[lt].id,label:this.tablero[H].data[lt].label,votos:this.tablero[H].data[lt].votos,voto_maximo:!1,detalle:this.tablero[H].data[lt].detalle});for(let m in this.usuarios_active)n=this.tablero[H].data[lt].detalle.findIndex(Z=>Z.usuario_id==this.usuarios_active[m].id),-1!=n&&(a=o.findIndex(Z=>Z==this.usuarios_active[m].id),-1==a?(o.push(this.usuarios_active[m].id),i.push({usuario_id:this.usuarios_active[m].id,votos:this.tablero[H].data[lt].detalle[n].votos})):(v=i.findIndex(Z=>Z.usuario_id==this.usuarios_active[m].id),i[v].votos=i[v].votos+this.tablero[H].data[lt].detalle[n].votos))}e.push({title:this.tablero[H].title,data:G})}let R="";for(let H in this.usuarios_active)R=i.findIndex(G=>G.usuario_id==this.usuarios_active[H].id),U+=this.usuarios_active[H].id==this.usuario.id&&i[R].votos>=4||this.usuarios_active[H].id!=this.usuario.id&&i[R].votos>=2?1:0;this.usuarios_active.length==o.length&&this.usuarios_active.length==U?(console.log("guardar_votos",e),this._proyectsService.updateEtapa(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase4",tablero:e,type:"voto"}).subscribe(G=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase4"),this.socketWebService.emitEventTableroSaveVoto({tablero:JSON.stringify(e)})},G=>{})):_().fire({text:"Ups, no todos los participantes han votado.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}})}etapa_active(e){""!=e&&this._router.navigate([e])}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}setInitialValue(){this.filteredTablero.pipe((0,mt.q)(1),(0,$t.R)(this._onDestroy)).subscribe(()=>{})}writeBoard(){this.socketWebService.emitEventTableroVoto({tablero:JSON.stringify(this.tablero)})}readBoard(e,o){const i=JSON.parse(e);this.tablero=[];for(let n in i)this.tablero.push({title:i[n].title,data:i[n].data});this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice())}votar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos+1;const i=this.votos.findIndex(R=>R.id==e+":"+o);-1==i?this.votos.push({id:e+":"+o,votos:1}):this.votos[i].votos=this.votos[i].votos+1,-1==this.voto_tablero.findIndex(R=>R==e)&&this.voto_tablero.push(e),this.num_votos=this.num_votos+1;const v=this.tablero[e].data[o].detalle.findIndex(R=>R.usuario_id==this.usuario.id);-1==v?this.tablero[e].data[o].detalle.push({usuario_id:this.usuario.id,votos:1}):this.tablero[e].data[o].detalle[v].votos=this.tablero[e].data[o].detalle[v].votos+1,this._proyectsService.updateNotaCp(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle}).subscribe(R=>{},R=>{}),this.writeBoard()}votarMaximo(e,o){this.voto_maximo.push(e+":"+o),this.voto_tablero.push(e),this.tablero[e].data[o].voto_maximo=!0,this.writeBoard()}quitar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos-1,this.num_votos=this.num_votos-1;const i=this.votos.findIndex(U=>U.id==e+":"+o);if(-1!=i&&(this.votos[i].votos=this.votos[i].votos-1,0==this.votos[i].votos)){this.votos.splice(i,1);const U=this.voto_tablero.findIndex(R=>R==e);-1!=U&&this.voto_tablero.splice(U,1)}const a=this.tablero[e].data[o].detalle.findIndex(U=>U.usuario_id==this.usuario.id);if(-1!=a){let U=this.tablero[e].data[o].detalle[a].votos-1;U<1?this.tablero[e].data[o].detalle.splice(a,1):this.tablero[e].data[o].detalle[a].votos=U}this._proyectsService.updateNotaCp(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle}).subscribe(U=>{},U=>{}),this.writeBoard()}quitarMaximo(e,o){const i=this.voto_maximo.findIndex(a=>a==e+":"+o);-1!=i&&this.voto_maximo.splice(i,1);const n=this.voto_tablero.findIndex(a=>a==e);-1!=n&&this.voto_tablero.splice(n,1),this.tablero[e].data[o].voto_maximo=!1,this.writeBoard()}verifyVoto(e,o){const i=this.votos.findIndex(v=>v.id==e+":"+o),a=this.tablero[e].data[o].detalle.findIndex(v=>v.usuario_id==this.usuario.id);return-1!=i||-1!=a}verifyVotoMaximo(e,o){return 1==this.tablero[e].data[o].voto_maximo}verifyVotoTablero(e){return-1!=this.voto_tablero.findIndex(i=>i==e)}onPlayPause(){if(this.playing=!0,$("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),$("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=$("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),$("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),$("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,this.ref.detectChanges()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.gz),t.Y36(st),t.Y36(j.a),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(M.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-boards-voto"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Io,5),t.Gf(Uo,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:51,vars:13,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],["tableroRef",""],[1,"flex","flex-auto","p-6","sm:p-10"],["cdkDropListGroup",""],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[1,"clasificacion-container"],[2,"color","#fff"],["cdkDropList","",1,"clasificacion-list",3,"cdkDropListData","cdkDropListDropped"],["class","clasificacion-box","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"clasificacion-box"],[1,"votos"],["class","quitar-maximo",3,"click",4,"ngIf"],["class","votar",3,"click",4,"ngIf"],[1,"quitar-maximo",3,"click"],[1,"votar",3,"click"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ie,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Ue,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Mi,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Votaci\xf3n "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-voto-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"div",21,22)(27,"div",23)(28,"div",24),t.YNc(29,Si,6,3,"ng-container",9),t.ALo(30,"async"),t.qZA()()(),t.YNc(31,Ai,4,3,"ng-container",9),t._UZ(32,"canvas",25,26),t.qZA(),t._UZ(34,"div",27),t.TgZ(35,"div",28),t._UZ(36,"video",29),t.qZA(),t.TgZ(37,"div",30)(38,"div",31),t.YNc(39,Zi,4,0,"ng-container",32),t.YNc(40,Lo,3,0,"ng-template",null,33,t.W1O),t.qZA(),t.TgZ(42,"div",34),t.YNc(43,Ei,2,0,"a",35),t.TgZ(44,"a",36),t._uU(45,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(46,"div",37)(47,"span",38),t.O4$(),t.TgZ(48,"svg",39),t._UZ(49,"rect",40)(50,"path",41),t.qZA()()()()),2&e){const i=t.MAs(41);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(17),t.Q6J("ngForOf",t.lcZ(30,11,o.filteredTablero)),t.xp6(2),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Ti,De.PQ,ut.Fd,ut.Wj,ut.Zt,M.yS],pipes:[T.Ov],styles:[".fondo-video{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container{text-align:center;position:absolute;width:100%;margin:-1010px 0 0}.video-container video{border-radius:10px;box-shadow:0 0 10px 3px #fff}.title-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container h1{width:1320px;text-align:start;color:#fff}.instructions-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.tablero-container{min-width:100%;height:600px;overflow:auto;background-color:#232323;position:relative;padding:20px;margin:0}:host{height:100%;margin:0}:host .flex-root{height:100%}.page-loaded app-layout{opacity:1;transition:opacity 1s ease-in-out}.videoOn{display:inline}.videoOff{display:none}.app{width:250px;float:left;margin-left:10px}.dark-modal{background-color:#292b2c!important;color:#fff!important}.dark-modal .close{color:#fff!important}.clasificacion-container{width:400px;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.clasificacion-list{border:solid 1px #ccc;min-height:60px;background:#cccaca;border-radius:4px;overflow:hidden;display:block;padding:50px}.clasificacion-box{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;word-break:break-all;justify-content:space-between;box-sizing:border-box;cursor:move;background:#ffc;font-size:14px;width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin:auto auto 20px}.clasificacion-box:nth-child(even){transform:rotate(0);background:#cfc}.clasificacion-box:nth-child(odd){transform:rotate(0);background:#ccf}.clasificacion-box:nth-child(3n){transform:rotate(0);background:#ccf}.clasificacion-box:nth-child(5n){transform:rotate(0);background:#ffc}.clasificacion-box:hover,.clasificacion-box:focus{transform:rotate(0);box-shadow:10px 10px 7px #000000b3}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.clasificacion-box:last-child{border:none}.clasificacion-list.cdk-drop-list-dragging .clasificacion-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.votos{position:absolute;top:10px;right:10px;color:#fff;width:24px;height:24px;font-size:16px;padding-left:6px;padding-right:6px;background-color:#000;border:1px solid #000;border-radius:50%}.voto-maximo{position:absolute;top:-10px;left:-12px;font-size:28px;width:32px!important;height:32px!important;color:green}.votar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#05b8ff;border:1px solid #05b8ff;border-radius:10%}.votar:hover{background-color:#0751ff}.votar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#00c749;border:1px solid #00c749;border-radius:10%}.votar-maximo:hover{background-color:#05720d}.quitar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar:hover{background-color:#ff0707}.quitar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar-maximo:hover{background-color:#ff0707}canvas{position:absolute}@media (max-width: 1200px){.video-container{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}\n"],encapsulation:2,changeDetection:0}),s})();const Jo=["acc"];function Di(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Le=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-metas-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Jo,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Di,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ho=["ktAside"],ho=["ktHeaderMobile"],to=["ktHeader"];function Bo(s,l){if(1&s&&t._UZ(0,"app-loadmask",39),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function qi(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",40)(2,"span",41),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function We(s,l){if(1&s&&t._UZ(0,"app-timer",42),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function jo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",43)(1,"div",44)(2,"span",45),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",46),t._UZ(4,"path",47),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",48),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Wo(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"path",51),t.qZA()(),t.BQk()}}function Qo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",50),t._UZ(2,"path",52),t.qZA()()}}function Vo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Fi=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroMeta.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_meta");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].metaslp&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].metaslp.id,content:this.proyecto.proyecto_recursos[n].metaslp.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_meta",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-meta")),document.querySelectorAll("app-note-meta").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_meta",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_meta",this.notes_all),localStorage.setItem("notes_all_meta",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaMeta(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase5",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase5"),this.socketWebService.emitEventTableroSaveMeta({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase5"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createMetaLp({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.meta_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_metas",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateMeta({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_meta",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateMeta(e),this._proyectsService.updateMetaLp(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroMeta({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroMeta({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteMeta(n),localStorage.setItem("notes_meta",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteMetaLp(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metas"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ho,7),t.Gf(ho,7),t.Gf(to,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:46,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Bo,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,qi,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,We,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Metas a Largo Plazo "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-entender-metas-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"ul"),t.YNc(26,jo,7,2,"li",21),t.qZA(),t.TgZ(27,"div",22)(28,"textarea",23),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(29,"div",24),t.TgZ(30,"div",25),t._UZ(31,"video",26),t.qZA(),t.TgZ(32,"div",27)(33,"div",28),t.YNc(34,Wo,4,0,"ng-container",29),t.YNc(35,Qo,3,0,"ng-template",null,30,t.W1O),t.qZA(),t.TgZ(37,"div",31),t.YNc(38,Vo,2,0,"a",32),t.TgZ(39,"a",33),t._uU(40,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(41,"div",34)(42,"span",35),t.O4$(),t.TgZ(43,"svg",36),t._UZ(44,"rect",37)(45,"path",38),t.qZA()()()()),2&e){const i=t.MAs(36);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Le,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const go=["acc"];function Ii(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Ro=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metas-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(go,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Ii,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ui=["canvasRef"],Yo=["tableroRef"];function zo(s,l){if(1&s&&t._UZ(0,"app-loadmask",41),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function fo(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",42)(2,"span",43),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Go(s,l){if(1&s&&t._UZ(0,"app-timer",44),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function se(s,l){1&s&&t._UZ(0,"div",56)}function Je(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().quitar(n,i)}),t._uU(1,"Quitar"),t.qZA()}}function eo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().votar(n,i)}),t._uU(1,"Votar"),t.qZA()}}function Li(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().votarMaximo(n,i)}),t._uU(1,"Seleccionar"),t.qZA()}}function Ji(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().quitarMaximo(n,i)}),t._uU(1,"Quitar"),t.qZA()}}function _o(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div",49),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index,v=t.oxw().index;return t.oxw().onDragMove(i,v,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index,v=t.oxw().index;return t.oxw().onDragEnded(i,v,a)}),t._uU(1),t.TgZ(2,"label",50),t._uU(3),t.qZA(),t.YNc(4,se,1,0,"div",51),t.YNc(5,Je,2,0,"button",52),t.YNc(6,eo,2,0,"button",53),t.YNc(7,Li,2,0,"button",54),t.YNc(8,Ji,2,0,"button",55),t.qZA()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw().index,n=t.oxw();t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",n.dragPosition[o]),t.xp6(1),t.hij("",e.label," "),t.xp6(2),t.Oqu(e.votos?e.votos:0),t.xp6(1),t.Q6J("ngIf",n.verifyVotoMaximo(i,o)),t.xp6(1),t.Q6J("ngIf",n.verifyVoto(i,o)&&"Decisor"!=n.rol&&e.votos>0),t.xp6(1),t.Q6J("ngIf",n.num_votos<n.maximo_votos&&"Decisor"!=n.rol),t.xp6(1),t.Q6J("ngIf",!n.verifyVotoMaximo(i,o)&&!n.verifyVotoTablero(i)&&"Decisor"==n.rol),t.xp6(1),t.Q6J("ngIf",n.verifyVotoMaximo(i,o)&&"Decisor"==n.rol)}}function $o(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",45)(2,"h2",46),t._uU(3),t.qZA(),t.TgZ(4,"div",47),t.YNc(5,_o,9,9,"div",48),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Q6J("ngForOf",e.data)}}function oo(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",61),t.TgZ(2,"label",62),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Xo(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",63),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",64),t._UZ(3,"path",65),t.qZA()(),t.BQk()}}function Hi(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",63),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",64),t._UZ(2,"path",66),t.qZA()()}}function Bi(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveVotoAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let _e=(()=>{class s{constructor(e,o,i,n,a,v){this.route=e,this.socketWebService=o,this._proyectsService=i,this.el=n,this.ref=a,this._router=v,this.notas=[],this.tablero=[],this.tablero2=[],this.votos=[],this.voto_tablero=[],this.voto_maximo=[],this.maximo_votos=0,this.num_votos=0,this._user={},this.equipo=[],this.filteredTablero=new At.t(1),this._onDestroy=new Dt.x,this.width=50,this.height=50,this.points=[],this.isAvailabe=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isLoading=!0,this.onMouseMove=H=>{this.write(H)},this.onClick=H=>{"canvasId"===H.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenTableroVotoMeta.subscribe(H=>{const{tablero:G}=H;this.readBoard(G,!1)}),this.socketWebService.outEven2.subscribe(H=>{const{prevPost:G}=H;let m=G.usuario.split(" ")[0].replace("-","");m=m.replace(".",""),m=m.replace("@",""),-1==this.equipo.findIndex(Yt=>Yt==m)&&this.equipo.push(m),this.ref.detectChanges(),jQuery("#puntero-"+m).css({left:G.x,top:G.y,display:"block"}),jQuery("#equipo-"+m).css({left:G.x+30,top:G.y,display:"block"}),this.writeSingle(G,!1)}),this.socketWebService.outEvenUsersActive.subscribe(H=>{const{usuarios_active:G}=H;this.readUsersActive(G,!1)}),this.socketWebService.outEvenEtapaActive.subscribe(H=>{this.etapa_active(H)}),this.socketWebService.outEvenContinueVoto.subscribe(H=>{this.continue()});const U=localStorage.getItem("usuario");let R=JSON.parse(U);this.usuario=R,this.usuario.active=!0}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){console.log("fin",e),this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.tablero[o].data[i].position=i,this.tablero[o].data[i].dragPosition=this.dragPosition[i],this._proyectsService.updateMetaLp(this.tablero[o].data[i].id,{votos:this.tablero[o].data[i].votos,detalle:this.tablero[o].data[i].detalle,seleccionado:this.tablero[o].data[i].seleccionado,position:this.tablero[o].data[i].position,dragPosition:this.tablero[o].data[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(o=>{this.proyecto_id=o.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id);const e=localStorage.getItem("usuario");this._user=JSON.parse(e)}ngAfterViewInit(){this.setInitialValue(),this.render();const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),this._onDestroy.next(),this._onDestroy.complete(),window.removeEventListener("scroll",this.disableScroll)}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase6"])}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,this.maximo_votos="Decisor"==this.rol?2:1,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0,this.tablero=[];let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)if(null!=this.proyecto.proyecto_recursos[a].metaslp){i.push({id:this.proyecto.proyecto_recursos[a].metaslp.id,label:this.proyecto.proyecto_recursos[a].metaslp.contenido,votos:this.proyecto.proyecto_recursos[a].metaslp.votos,seleccionado:this.proyecto.proyecto_recursos[a].metaslp.seleccionado,voto_maximo:this.proyecto.proyecto_recursos[a].metaslp.seleccionado,detalle:JSON.parse(this.proyecto.proyecto_recursos[a].metaslp.detalle)||[],position:this.proyecto.proyecto_recursos[a].metaslp.position?this.proyecto.proyecto_recursos[a].metaslp.position:n,dragPosition:this.proyecto.proyecto_recursos[a].metaslp.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].metaslp.dragPosition):{x:0,y:0}}),this.proyecto.proyecto_recursos[a].metaslp.seleccionado&&this.voto_tablero.push(0),this.dragPosition.push(this.proyecto.proyecto_recursos[a].metaslp.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].metaslp.dragPosition):{x:0,y:0});let v=JSON.parse(this.proyecto.proyecto_recursos[a].metaslp.detalle)||[];const U=v.findIndex(R=>R.usuario_id==this.usuario.id);-1!=U&&(this.num_votos=this.num_votos+v[U].votos),this.voto_maximo.push("0:"+n),n++}console.log("metas",i),this.tablero.push({title:"Metas a largo plazo",data:i}),this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice()),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}saveVotoAll(){console.log("save_voto_all_metas",this.tablero);let e=[],o=[],i="",n="";for(let a in this.tablero){let v=[];for(let U in this.tablero[a].data){v.push({id:this.tablero[a].data[U].id,label:this.tablero[a].data[U].label,votos:this.tablero[a].data[U].votos,seleccionado:this.tablero[a].data[U].seleccionado,detalle:this.tablero[a].data[U].detalle,position:this.tablero[a].data[U].position,dragPosition:this.tablero[a].data[U].dragPosition}),this.tablero[a].data[U].seleccionado&&o.push(this.usuario.id);for(let R in this.usuarios_active)i=this.tablero[a].data[U].detalle.findIndex(H=>H.usuario_id==this.usuarios_active[R].id),-1!=i&&(n=o.findIndex(H=>H==this.usuarios_active[R].id),-1==n&&o.push(this.usuarios_active[R].id))}e.push({title:this.tablero[a].title,data:v})}this.usuarios_active.length==o.length?(console.log("guardar_votos",e),this._proyectsService.updateEtapaMeta(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase6",tablero:e,type:"voto"}).subscribe(v=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase6"),this.socketWebService.emitEventTableroSaveVotoMeta({tablero:JSON.stringify(e)})},v=>{})):_().fire({text:"Ups, no todos los participantes han votado.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}})}etapa_active(e){""!=e&&this._router.navigate([e])}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}setInitialValue(){this.filteredTablero.pipe((0,mt.q)(1),(0,$t.R)(this._onDestroy)).subscribe(()=>{})}writeBoard(){this.socketWebService.emitEventTableroVotoMeta({tablero:JSON.stringify(this.tablero)})}readBoard(e,o){const i=JSON.parse(e);this.tablero=[];for(let n in i)this.tablero.push({title:i[n].title,data:i[n].data});this.tablero2=JSON.stringify(this.tablero);for(let n in this.tablero[0].data)this.dragPosition[this.tablero[0].data[n].position]=this.tablero[0].data[n].dragPosition;this.filteredTablero.next(this.tablero.slice())}votar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos+1;const i=this.votos.findIndex(R=>R.id==e+":"+o);-1==i?this.votos.push({id:e+":"+o,votos:1}):this.votos[i].votos=this.votos[i].votos+1,-1==this.voto_tablero.findIndex(R=>R==e)&&this.voto_tablero.push(e),this.num_votos=this.num_votos+1;const v=this.tablero[e].data[o].detalle.findIndex(R=>R.usuario_id==this.usuario.id);-1==v?this.tablero[e].data[o].detalle.push({usuario_id:this.usuario.id,votos:1}):this.tablero[e].data[o].detalle[v].votos=this.tablero[e].data[o].detalle[v].votos+1,this._proyectsService.updateMetaLp(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(R=>{},R=>{}),this.writeBoard()}votarMaximo(e,o){this.voto_maximo.push(e+":"+o),this.voto_tablero.push(e),this.tablero[e].data[o].voto_maximo=!0,this.tablero[e].data[o].seleccionado=!0,this._proyectsService.updateMetaLp(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(n=>{},n=>{}),this.writeBoard()}quitar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos-1,this.num_votos=this.num_votos-1;const i=this.votos.findIndex(U=>U.id==e+":"+o);if(-1!=i&&(this.votos[i].votos=this.votos[i].votos-1,0==this.votos[i].votos)){this.votos.splice(i,1);const U=this.voto_tablero.findIndex(R=>R==e);-1!=U&&this.voto_tablero.splice(U,1)}const a=this.tablero[e].data[o].detalle.findIndex(U=>U.usuario_id==this.usuario.id);if(-1!=a){let U=this.tablero[e].data[o].detalle[a].votos-1;U<1?this.tablero[e].data[o].detalle.splice(a,1):this.tablero[e].data[o].detalle[a].votos=U}this._proyectsService.updateMetaLp(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}quitarMaximo(e,o){const i=this.voto_maximo.findIndex(v=>v==e+":"+o);-1!=i&&this.voto_maximo.splice(i,1);const n=this.voto_tablero.findIndex(v=>v==e);-1!=n&&this.voto_tablero.splice(n,1),this.tablero[e].data[o].voto_maximo=!1,this.tablero[e].data[o].seleccionado=!1,this._proyectsService.updateMetaLp(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(v=>{},v=>{}),this.writeBoard()}verifyVoto(e,o){const i=this.votos.findIndex(v=>v.id==e+":"+o),a=this.tablero[e].data[o].detalle.findIndex(v=>v.usuario_id==this.usuario.id);return-1!=i||-1!=a}verifyVotoMaximo(e,o){return 1==this.tablero[e].data[o].voto_maximo}verifyVotoTablero(e){return-1!=this.voto_tablero.findIndex(i=>i==e)}onPlayPause(){if(this.playing=!0,$("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),$("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=$("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),$("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),$("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,this.ref.detectChanges()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.gz),t.Y36(st),t.Y36(j.a),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(M.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metas-voto"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ui,5),t.Gf(Yo,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:50,vars:13,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],["tableroRef",""],[1,"flex","flex-auto","p-6","sm:p-10"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[1,"clasificacion-container"],[2,"color","#fff"],[1,"clasificacion-list"],["class","clasificacion-box","cdkDragBoundary",".clasificacion-container","cdkDrag","",3,"cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["cdkDragBoundary",".clasificacion-container","cdkDrag","",1,"clasificacion-box",3,"cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"votos"],["class","voto-maximo bg-success position-absolute h-8px w-8px rounded-circle",4,"ngIf"],["class","quitar",3,"click",4,"ngIf"],["class","votar",3,"click",4,"ngIf"],["class","votar-maximo",3,"click",4,"ngIf"],["class","quitar-maximo",3,"click",4,"ngIf"],[1,"voto-maximo","bg-success","position-absolute","h-8px","w-8px","rounded-circle"],[1,"quitar",3,"click"],[1,"votar",3,"click"],[1,"votar-maximo",3,"click"],[1,"quitar-maximo",3,"click"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,zo,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,fo,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Go,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Votaci\xf3n Meta Largo Plazo "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-metas-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"div",21,22)(27,"div",23),t.YNc(28,$o,6,2,"ng-container",9),t.ALo(29,"async"),t.qZA()(),t.YNc(30,oo,4,3,"ng-container",9),t._UZ(31,"canvas",24,25),t.qZA(),t._UZ(33,"div",26),t.TgZ(34,"div",27),t._UZ(35,"video",28),t.qZA(),t.TgZ(36,"div",29)(37,"div",30),t.YNc(38,Xo,4,0,"ng-container",31),t.YNc(39,Hi,3,0,"ng-template",null,32,t.W1O),t.qZA(),t.TgZ(41,"div",33),t.YNc(42,Bi,2,0,"a",34),t.TgZ(43,"a",35),t._uU(44,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(45,"div",36)(46,"span",37),t.O4$(),t.TgZ(47,"svg",38),t._UZ(48,"rect",39)(49,"path",40),t.qZA()()()()),2&e){const i=t.MAs(40);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(16),t.Q6J("ngForOf",t.lcZ(29,11,o.filteredTablero)),t.xp6(2),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Ro,De.PQ,ut.Zt,M.yS],pipes:[T.Ov],styles:[".fondo-video{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container{text-align:center;position:absolute;width:100%;margin:-1010px 0 0}.video-container video{border-radius:10px;box-shadow:0 0 10px 3px #fff}.title-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container h1{width:1320px;text-align:start;color:#fff}.instructions-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.tablero-container{min-width:100%;height:600px;overflow:auto;background-color:#232323;position:relative;padding:20px;margin:0}:host{height:100%;margin:0}:host .flex-root{height:100%}.page-loaded app-layout{opacity:1;transition:opacity 1s ease-in-out}.videoOn{display:inline}.videoOff{display:none}.app{width:250px;float:left;margin-left:10px}.dark-modal{background-color:#292b2c!important;color:#fff!important}.dark-modal .close{color:#fff!important}.clasificacion-container{width:100%;max-width:100%;height:460px;margin:0 25px 25px 0;display:grid}.clasificacion-list{border:solid 1px #ccc;min-height:490px;background:#cccaca;border-radius:4px;overflow:auto;display:block;padding:10px}.clasificacion-box{padding:0 10px;border-bottom:solid 1px #ccc;color:#000000de;display:inline-flex;flex-direction:row;align-items:center;justify-content:space-between;word-break:break-all;box-sizing:border-box;cursor:move;background:#ffc;font-size:14px;width:150px;min-width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin-left:20px;margin-bottom:20px}.clasificacion-box:nth-child(even){background:#cfc}.clasificacion-box:nth-child(3n){background:#ccf}.clasificacion-box:nth-child(5n){background:#ffc}.clasificacion-box:hover,.clasificacion-box:focus{box-shadow:10px 10px 7px #000000b3}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.clasificacion-box:last-child{border:none}.clasificacion-list.cdk-drop-list-dragging .clasificacion-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.votos{position:absolute;top:10px;right:10px;color:#fff;width:24px;height:24px;font-size:16px;padding-left:6px;padding-right:6px;background-color:#000;border:1px solid #000;border-radius:50%}.voto-maximo{position:absolute;top:-10px;left:-12px;font-size:28px;width:32px!important;height:32px!important;color:green}.votar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#05b8ff;border:1px solid #05b8ff;border-radius:10%}.votar:hover{background-color:#0751ff}.votar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:100px;height:25px;background-color:#00c749;border:1px solid #00c749;border-radius:10%}.votar-maximo:hover{background-color:#05720d}.quitar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar:hover{background-color:#ff0707}.quitar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar-maximo:hover{background-color:#ff0707}canvas{position:absolute}@media (max-width: 1200px){.video-container{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}\n"],encapsulation:2,changeDetection:0}),s})();const Ko=["acc"];function Qe(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let ji=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-preguntas-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Ko,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Qe,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Wi=["ktAside"],Me=["ktHeaderMobile"],Pe=["ktHeader"];function mo(s,l){if(1&s&&t._UZ(0,"app-loadmask",39),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Qi(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",40)(2,"span",41),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function ti(s,l){if(1&s&&t._UZ(0,"app-timer",42),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function ei(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",43)(1,"div",44)(2,"span",45),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",46),t._UZ(4,"path",47),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",48),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Ve(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"path",51),t.qZA()(),t.BQk()}}function oi(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",50),t._UZ(2,"path",52),t.qZA()()}}function vo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Vi=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroPreguntas.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_preguntas");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].preguntasprint&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].preguntasprint.id,content:this.proyecto.proyecto_recursos[n].preguntasprint.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_preguntas",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-pregunta")),document.querySelectorAll("app-note-pregunta").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_preguntas",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_preguntas",this.notes_all),localStorage.setItem("notes_all_preguntas",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaPreguntas(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase7",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase7"),this.socketWebService.emitEventTableroSavePreguntas({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase7"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createPreguntaSprint({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.pregunta_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_preguntas",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdatePreguntas({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_preguntas",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdatePreguntas(e),this._proyectsService.updatePreguntaSprint(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroPreguntas({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroPreguntas({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeletePreguntas(n),localStorage.setItem("notes_preguntas",JSON.stringify(this.notes)),i>0&&this._proyectsService.deletePreguntaSprint(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-preguntas"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Wi,7),t.Gf(Me,7),t.Gf(Pe,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:46,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,mo,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Qi,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,ti,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Preguntas del Sprint "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-entender-preguntas-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"ul"),t.YNc(26,ei,7,2,"li",21),t.qZA(),t.TgZ(27,"div",22)(28,"textarea",23),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(29,"div",24),t.TgZ(30,"div",25),t._UZ(31,"video",26),t.qZA(),t.TgZ(32,"div",27)(33,"div",28),t.YNc(34,Ve,4,0,"ng-container",29),t.YNc(35,oi,3,0,"ng-template",null,30,t.W1O),t.qZA(),t.TgZ(37,"div",31),t.YNc(38,vo,2,0,"a",32),t.TgZ(39,"a",33),t._uU(40,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(41,"div",34)(42,"span",35),t.O4$(),t.TgZ(43,"svg",36),t._UZ(44,"rect",37)(45,"path",38),t.qZA()()()()),2&e){const i=t.MAs(36);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,ji,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const ii=["acc"];function Ri(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Yi=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-preguntas-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ii,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Ri,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const bo=["canvasRef"],zi=["tableroRef"];function Gi(s,l){if(1&s&&t._UZ(0,"app-loadmask",41),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function $i(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",42)(2,"span",43),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Xi(s,l){if(1&s&&t._UZ(0,"app-timer",44),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Ki(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().quitar(n,i)}),t._uU(1,"Quitar"),t.qZA()}}function tn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().votar(n,i)}),t._uU(1,"Votar"),t.qZA()}}function en(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div",49),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index,v=t.oxw().index;return t.oxw().onDragMove(i,v,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index,v=t.oxw().index;return t.oxw().onDragEnded(i,v,a)}),t._uU(1),t.TgZ(2,"label",50),t._uU(3),t.qZA(),t.YNc(4,Ki,2,0,"button",51),t.YNc(5,tn,2,0,"button",52),t.qZA()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw().index,n=t.oxw();t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",n.dragPosition[o]),t.xp6(1),t.hij("",e.label," "),t.xp6(2),t.Oqu(e.votos?e.votos:0),t.xp6(1),t.Q6J("ngIf",n.verifyVoto(i,o)&&e.votos>0),t.xp6(1),t.Q6J("ngIf",n.num_votos<n.maximo_votos)}}function ni(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",45)(2,"h2",46),t._uU(3),t.qZA(),t.TgZ(4,"div",47),t.YNc(5,en,6,6,"div",48),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Q6J("ngForOf",e.data)}}function xo(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",55),t.TgZ(2,"label",56),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function si(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",57),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",58),t._UZ(3,"path",59),t.qZA()(),t.BQk()}}function yo(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",57),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",58),t._UZ(2,"path",60),t.qZA()()}}function ri(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveVotoAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let ai=(()=>{class s{constructor(e,o,i,n,a,v){this.route=e,this.socketWebService=o,this._proyectsService=i,this.el=n,this.ref=a,this._router=v,this.notas=[],this.tablero=[],this.tablero2=[],this.votos=[],this.voto_tablero=[],this.voto_maximo=[],this.maximo_votos=0,this.num_votos=0,this._user={},this.equipo=[],this.filteredTablero=new At.t(1),this._onDestroy=new Dt.x,this.width=50,this.height=50,this.points=[],this.isAvailabe=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isLoading=!0,this.onMouseMove=H=>{this.write(H)},this.onClick=H=>{"canvasId"===H.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenTableroVotoPreguntas.subscribe(H=>{const{tablero:G}=H;this.readBoard(G,!1)}),this.socketWebService.outEven2.subscribe(H=>{const{prevPost:G}=H;let m=G.usuario.split(" ")[0].replace("-","");m=m.replace(".",""),m=m.replace("@",""),-1==this.equipo.findIndex(Yt=>Yt==m)&&this.equipo.push(m),this.ref.detectChanges(),jQuery("#puntero-"+m).css({left:G.x,top:G.y,display:"block"}),jQuery("#equipo-"+m).css({left:G.x+30,top:G.y,display:"block"}),this.writeSingle(G,!1)}),this.socketWebService.outEvenUsersActive.subscribe(H=>{const{usuarios_active:G}=H;this.readUsersActive(G,!1)}),this.socketWebService.outEvenEtapaActive.subscribe(H=>{this.etapa_active(H)}),this.socketWebService.outEvenContinueVoto.subscribe(H=>{this.continue()});const U=localStorage.getItem("usuario");let R=JSON.parse(U);this.usuario=R,this.usuario.active=!0}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){console.log("fin",e),this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.tablero[o].data[i].position=i,this.tablero[o].data[i].dragPosition=this.dragPosition[i],this._proyectsService.updatePreguntaSprint(this.tablero[o].data[i].id,{votos:this.tablero[o].data[i].votos,detalle:this.tablero[o].data[i].detalle,position:this.tablero[o].data[i].position,dragPosition:this.tablero[o].data[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(o=>{this.proyecto_id=o.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id);const e=localStorage.getItem("usuario");this._user=JSON.parse(e)}ngAfterViewInit(){this.setInitialValue(),this.render();const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),this._onDestroy.next(),this._onDestroy.complete(),window.removeEventListener("scroll",this.disableScroll)}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase8"])}getCoordenadas(e,o){return{x:e,y:o}}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,this.maximo_votos="Decisor"==this.rol?4:2,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0,this.tablero=[];let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)if(null!=this.proyecto.proyecto_recursos[a].preguntasprint){i.push({id:this.proyecto.proyecto_recursos[a].preguntasprint.id,label:this.proyecto.proyecto_recursos[a].preguntasprint.contenido,votos:this.proyecto.proyecto_recursos[a].preguntasprint.votos,detalle:JSON.parse(this.proyecto.proyecto_recursos[a].preguntasprint.detalle)||[],position:this.proyecto.proyecto_recursos[a].preguntasprint.position?this.proyecto.proyecto_recursos[a].preguntasprint.position:n,dragPosition:this.proyecto.proyecto_recursos[a].preguntasprint.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].preguntasprint.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].preguntasprint.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].preguntasprint.dragPosition):{x:0,y:0});let v=JSON.parse(this.proyecto.proyecto_recursos[a].preguntasprint.detalle)||[];const U=v.findIndex(R=>R.usuario_id==this.usuario.id);-1!=U&&(this.num_votos=this.num_votos+v[U].votos),n+=1}console.log("preguntas",i),this.tablero.push({title:"Preguntas",data:i}),this.tablero2=JSON.stringify(this.tablero),console.log("tablero_inicial:",this.tablero),this.filteredTablero.next(this.tablero.slice()),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}saveVotoAll(){console.log("save_voto_all_preguntas",this.tablero);let e=[],o=[],i=[],n="",a="",v="",U=0;for(let H in this.tablero){let G=[];for(let lt in this.tablero[H].data){G.push({id:this.tablero[H].data[lt].id,label:this.tablero[H].data[lt].label,votos:this.tablero[H].data[lt].votos,detalle:this.tablero[H].data[lt].detalle,position:this.tablero[H].data[lt].position,dragPosition:this.tablero[H].data[lt].dragPosition});for(let m in this.usuarios_active)n=this.tablero[H].data[lt].detalle.findIndex(Z=>Z.usuario_id==this.usuarios_active[m].id),-1!=n&&(a=o.findIndex(Z=>Z==this.usuarios_active[m].id),-1==a?(o.push(this.usuarios_active[m].id),i.push({usuario_id:this.usuarios_active[m].id,votos:this.tablero[H].data[lt].detalle[n].votos})):(v=i.findIndex(Z=>Z.usuario_id==this.usuarios_active[m].id),i[v].votos=i[v].votos+this.tablero[H].data[lt].detalle[n].votos))}e.push({title:this.tablero[H].title,data:G})}let R="";for(let H in this.usuarios_active)R=i.findIndex(G=>G.usuario_id==this.usuarios_active[H].id),U+=this.usuarios_active[H].id==this.usuario.id&&i[R].votos>=4||this.usuarios_active[H].id!=this.usuario.id&&i[R].votos>=2?1:0;this.usuarios_active.length==o.length&&this.usuarios_active.length==U?(console.log("guardar_votos",e),this._proyectsService.updateEtapaPreguntas(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase8",tablero:e,type:"voto"}).subscribe(G=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase8"),this.socketWebService.emitEventTableroSaveVotoPreguntas({tablero:JSON.stringify(e)})},G=>{})):_().fire({text:"Ups, no todos los participantes han votado.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}})}etapa_active(e){""!=e&&this._router.navigate([e])}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}setInitialValue(){this.filteredTablero.pipe((0,mt.q)(1),(0,$t.R)(this._onDestroy)).subscribe(()=>{})}writeBoard(){this.socketWebService.emitEventTableroVotoPreguntas({tablero:JSON.stringify(this.tablero)})}readBoard(e,o){const i=JSON.parse(e);this.tablero=[];for(let n in i)this.tablero.push({title:i[n].title,data:i[n].data});this.tablero2=JSON.stringify(this.tablero);for(let n in this.tablero[0].data)this.dragPosition[this.tablero[0].data[n].position]=this.tablero[0].data[n].dragPosition;this.filteredTablero.next(this.tablero.slice())}votar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos+1;const i=this.votos.findIndex(R=>R.id==e+":"+o);-1==i?this.votos.push({id:e+":"+o,votos:1}):this.votos[i].votos=this.votos[i].votos+1,-1==this.voto_tablero.findIndex(R=>R==e)&&this.voto_tablero.push(e),this.num_votos=this.num_votos+1;const v=this.tablero[e].data[o].detalle.findIndex(R=>R.usuario_id==this.usuario.id);-1==v?this.tablero[e].data[o].detalle.push({usuario_id:this.usuario.id,votos:1}):this.tablero[e].data[o].detalle[v].votos=this.tablero[e].data[o].detalle[v].votos+1,this._proyectsService.updatePreguntaSprint(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(R=>{},R=>{}),this.writeBoard()}votarMaximo(e,o){this.voto_maximo.push(e+":"+o),this.voto_tablero.push(e),this.tablero[e].data[o].voto_maximo=!0,this.writeBoard()}quitar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos-1,this.num_votos=this.num_votos-1;const i=this.votos.findIndex(U=>U.id==e+":"+o);if(-1!=i&&(this.votos[i].votos=this.votos[i].votos-1,0==this.votos[i].votos)){this.votos.splice(i,1);const U=this.voto_tablero.findIndex(R=>R==e);-1!=U&&this.voto_tablero.splice(U,1)}const a=this.tablero[e].data[o].detalle.findIndex(U=>U.usuario_id==this.usuario.id);if(-1!=a){let U=this.tablero[e].data[o].detalle[a].votos-1;U<1?this.tablero[e].data[o].detalle.splice(a,1):this.tablero[e].data[o].detalle[a].votos=U}this._proyectsService.updatePreguntaSprint(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}quitarMaximo(e,o){const i=this.voto_maximo.findIndex(a=>a==e+":"+o);-1!=i&&this.voto_maximo.splice(i,1);const n=this.voto_tablero.findIndex(a=>a==e);-1!=n&&this.voto_tablero.splice(n,1),this.tablero[e].data[o].voto_maximo=!1,this.writeBoard()}verifyVoto(e,o){const i=this.votos.findIndex(v=>v.id==e+":"+o),a=this.tablero[e].data[o].detalle.findIndex(v=>v.usuario_id==this.usuario.id);return-1!=i||-1!=a}verifyVotoMaximo(e,o){return 1==this.tablero[e].data[o].voto_maximo}verifyVotoTablero(e){return-1!=this.voto_tablero.findIndex(i=>i==e)}onPlayPause(){if(this.playing=!0,$("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),$("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=$("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),$("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),$("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,this.ref.detectChanges()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.gz),t.Y36(st),t.Y36(j.a),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(M.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-preguntas-voto"]],viewQuery:function(e,o){if(1&e&&(t.Gf(bo,5),t.Gf(zi,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:50,vars:13,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],["tableroRef",""],[1,"flex","flex-auto","p-6","sm:p-10"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[1,"clasificacion-container"],[2,"color","#fff"],[1,"clasificacion-list"],["class","clasificacion-box","cdkDragBoundary",".clasificacion-container","cdkDrag","",3,"cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["cdkDragBoundary",".clasificacion-container","cdkDrag","",1,"clasificacion-box",3,"cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"votos"],["class","quitar-maximo",3,"click",4,"ngIf"],["class","votar",3,"click",4,"ngIf"],[1,"quitar-maximo",3,"click"],[1,"votar",3,"click"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Gi,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,$i,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Xi,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Votaci\xf3n Preguntas Sprint "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-preguntas-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"div",21,22)(27,"div",23),t.YNc(28,ni,6,2,"ng-container",9),t.ALo(29,"async"),t.qZA()(),t.YNc(30,xo,4,3,"ng-container",9),t._UZ(31,"canvas",24,25),t.qZA(),t._UZ(33,"div",26),t.TgZ(34,"div",27),t._UZ(35,"video",28),t.qZA(),t.TgZ(36,"div",29)(37,"div",30),t.YNc(38,si,4,0,"ng-container",31),t.YNc(39,yo,3,0,"ng-template",null,32,t.W1O),t.qZA(),t.TgZ(41,"div",33),t.YNc(42,ri,2,0,"a",34),t.TgZ(43,"a",35),t._uU(44,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(45,"div",36)(46,"span",37),t.O4$(),t.TgZ(47,"svg",38),t._UZ(48,"rect",39)(49,"path",40),t.qZA()()()()),2&e){const i=t.MAs(40);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(16),t.Q6J("ngForOf",t.lcZ(29,11,o.filteredTablero)),t.xp6(2),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Yi,De.PQ,ut.Zt,M.yS],pipes:[T.Ov],styles:[".fondo-video{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container{text-align:center;position:absolute;width:100%;margin:-1010px 0 0}.video-container video{border-radius:10px;box-shadow:0 0 10px 3px #fff}.title-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container h1{width:1320px;text-align:start;color:#fff}.instructions-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.tablero-container{min-width:100%;height:600px;overflow:auto;background-color:#232323;position:relative;padding:20px;margin:0}:host{height:100%;margin:0}:host .flex-root{height:100%}.page-loaded app-layout{opacity:1;transition:opacity 1s ease-in-out}.videoOn{display:inline}.videoOff{display:none}.app{width:250px;float:left;margin-left:10px}.dark-modal{background-color:#292b2c!important;color:#fff!important}.dark-modal .close{color:#fff!important}.clasificacion-container{width:100%;max-width:100%;height:460px;margin:0 25px 25px 0;display:grid}.clasificacion-list{border:solid 1px #ccc;min-height:490px;background:#cccaca;border-radius:4px;overflow:auto;display:block;padding:10px}.clasificacion-box{padding:0 10px;border-bottom:solid 1px #ccc;color:#000000de;display:inline-flex;flex-direction:row;align-items:center;justify-content:space-between;word-break:break-all;box-sizing:border-box;cursor:move;background:#ffc;font-size:14px;width:150px;min-width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin-left:20px;margin-bottom:20px}.clasificacion-box:nth-child(even){background:#cfc}.clasificacion-box:nth-child(3n){background:#ccf}.clasificacion-box:nth-child(5n){background:#ffc}.clasificacion-box:hover,ul li:focus{box-shadow:10px 10px 7px #000000b3}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.clasificacion-box:last-child{border:none}.clasificacion-list.cdk-drop-list-dragging .clasificacion-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.votos{position:absolute;top:10px;right:10px;color:#fff;width:24px;height:24px;font-size:16px;padding-left:6px;padding-right:6px;background-color:#000;border:1px solid #000;border-radius:50%}.voto-maximo{position:absolute;top:-10px;left:-12px;font-size:28px;width:32px!important;height:32px!important;color:green}.votar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#05b8ff;border:1px solid #05b8ff;border-radius:10%}.votar:hover{background-color:#0751ff}.votar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#00c749;border:1px solid #00c749;border-radius:10%}.votar-maximo:hover{background-color:#05720d}.quitar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar:hover{background-color:#ff0707}.quitar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar-maximo:hover{background-color:#ff0707}canvas{position:absolute}@media (max-width: 1200px){.video-container{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}\n"],encapsulation:2,changeDetection:0}),s})();var Co=E(60),on=E.n(Co);const nn=["acc"];function sn(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Re=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-mapa-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(nn,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,sn,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const ci=["ktAside"],wo=["ktHeaderMobile"],rn=["ktHeader"];function an(s,l){if(1&s&&t._UZ(0,"app-loadmask",44),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function cn(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",45)(2,"span",46),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function r(s,l){if(1&s&&t._UZ(0,"app-timer",47),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function c(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",48),t.NdJ("dragstart",function(i){return t.CHM(e),t.oxw().onDragStart(i)}),t._uU(2),t.TgZ(3,"div",49)(4,"div",50),t._UZ(5,"div",51),t.qZA()()(),t.BQk()}if(2&s){const e=l.$implicit;t.xp6(2),t.hij(" ",e.name," ")}}function d(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function h(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function b(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}const x=function(s){return{display:s}};let w=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.tablero=[],this.tablero2=[],this.filteredTablero=new At.t(1),this.dataNode=[],this.nodes=[],this.nodesDrawn=[],this.locked=!1,this.idNode=0,this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_preguntas");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.initializeList(1),this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);this.drawFlowHtmlElement=document.getElementById("drawflow"),this.initDrawFlow(this.drawFlowHtmlElement),this.editor.on("keydown",o=>{}),this.editor.on("nodeDataChanged",o=>{console.log("Node Data Changed"+o),console.log("!!!!!!!!!!!!!!!!!!!!!!"),this.writeBoard()}),this.editor.on("nodeCreated",o=>{console.log("Editor Event :>> Node created "+o,this.editor.getNodeFromId(o)),this.writeBoard()}),this.editor.on("nodeRemoved",o=>{console.log("Editor Event :>> Node removed "+o),this.writeBoard()}),this.editor.on("nodeSelected",o=>{console.log("Editor Event :>> Node selected "+o,this.editor.getNodeFromId(o)),this.writeBoard(),this.getNodeHeight()}),this.editor.on("nodeUnselected",o=>{console.log("Editor Event :>> Node unselected "),this.writeBoard(),this.getNodeHeight()}),this.editor.on("moduleCreated",o=>{console.log("Editor Event :>> Module Created "+o),this.writeBoard()}),this.editor.on("moduleChanged",o=>{console.log("Editor Event :>> Module Changed "+o),this.writeBoard()}),this.editor.on("connectionCreated",o=>{console.log("Editor Event :>> Connection created ",o),this.writeBoard()}),this.editor.on("connectionRemoved",o=>{console.log("Editor Event :>> Connection removed ",o),this.writeBoard()}),this.editor.on("nodeMoved",o=>{console.log("Editor Event :>> Node moved "+o),this.writeBoard()}),this.editor.on("zoom",o=>{console.log("Editor Event :>> Zoom level "+o),this.writeBoard()}),this.editor.on("addReroute",o=>{console.log("Editor Event :>> Reroute added "+o),this.writeBoard()}),this.editor.on("removeReroute",o=>{console.log("Editor Event :>> Reroute removed "+o),this.writeBoard()}),console.log(this.editor.drawflow);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}initializeList(e){for(let o=0;o<e;o++)this.nodes.push({id:o+1,name:"node "+(o+1),inputs:1,outputs:1})}initDrawFlow(e){this.editor=new(on())(e),this.editor.reroute=!1,this.editor.reroute_fix_curvature=!0,this.editor.force_first_input=!1,this.editor.curvature=.5,this.editor.reroute_width=1,this.editor.line_path=1,this.editor.editor_mode="edit",this.editor.draggable_inputs=!1,this.editor.start(),this.editor.import({drawflow:{Home:{data:{1:{id:1,name:"node 1",data:{template:""},class:"template",html:'\n        <div>\n          <div class="box">\n <span class="txtAreaStyle" df-template id="textarea-1" contenteditable></span>\n          </div>\n        </div>\n          ',typenode:!1,inputs:{input_1:{connections:[]}},outputs:{output_1:{connections:[]}},pos_x:299,pos_y:84}}}}})}getNodeHeight(){this.nodeHeight=document.getElementById("node-1")}onDragStart(e){"dragstart"===e.type&&(console.log("onDragStart :>> e :>> ",e),this.selectedItem=this.nodes.find(o=>o.name===e.target.outerText))}onDragEnter(e){console.log("onDragEnter :>> e :>> ",e)}onDragLeave(e){console.log("onDragLeave :>> e :>> ",e)}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.lastMousePositionEv=e}onDragEnd(e){console.log("onDragend :>> e :>> ",e)}onDrop(e){"drop"===e.type&&(console.log("onDrop :>> e :>> ",e),e.preventDefault(),this.addNodeToDrawBoard(e.clientX,e.clientY),this.resetAllInputsOutputs())}resetAllInputsOutputs(){this.nodes.forEach(e=>{e.inputs=1,e.outputs=1})}addNodeToDrawBoard(e,o){if("edit"===this.editor.editor_mode){e=e*(this.editor.precanvas.clientWidth/(this.editor.precanvas.clientWidth*this.editor.zoom))-this.editor.precanvas.getBoundingClientRect().x*(this.editor.precanvas.clientWidth/(this.editor.precanvas.clientWidth*this.editor.zoom)),o=o*(this.editor.precanvas.clientHeight/(this.editor.precanvas.clientHeight*this.editor.zoom))-this.editor.precanvas.getBoundingClientRect().y*(this.editor.precanvas.clientHeight/(this.editor.precanvas.clientHeight*this.editor.zoom)),this.idNode+=1;const n=this.selectedItem.name,a=this.editor.addNode(this.selectedItem.name,this.selectedItem.inputs,this.selectedItem.outputs,e,o,"template",{template:""},'\n        <div>\n          <div class="box">\n            <span class="txtAreaStyle" df-template id="textarea-'+this.idNode+'" contenteditable></span>\n          </div>\n        </div>\n          ',!1);this.nodesDrawn.push({nodeId:a,nodeName:n})}}onClear(){this.editor.clear()}changeMode(){this.locked=!this.locked,this.editor.editor_mode=this.locked?"fixed":"edit"}onZoomOut(){this.editor.zoom_out()}onZoomIn(){this.editor.zoom_in()}onZoomReset(){this.editor.zoom_reset()}onSubmit(){const e=this.editor.export();console.log("dataExport :>> ",e)}writeBoard(){const e=this.editor.export();console.log("dataToImport",e),this.socketWebService.emitEvent({tablero:JSON.stringify(e)}),this._proyectsService.updateMapaux(this.proyecto_id,{contenido:e}).subscribe(o=>{},o=>{})}readBoard(e,o){const i=JSON.parse(e);console.log("data",i),this.editor.import(i)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(i=>i.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let i=this.proyecto.tiempo.split(":");this.hr=i[0],this.min=i[1]}this.showTimer=!0,this.isLoading=!1;for(let i in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[i].mapaux&&this.readBoard(this.proyecto.proyecto_recursos[i].mapaux.contenido,!1);this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}saveNoteAll(){const e={etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase9"},o=this.editor.export();this._proyectsService.updateEtapaMapa(this.proyecto_id,e).subscribe(i=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase9"),this.socketWebService.emitEventTableroSaveMapa({tablero:JSON.stringify(o)})},i=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase9"])}etapa_active(e){""!=e&&this._router.navigate([e])}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-mapa"]],viewQuery:function(e,o){if(1&e&&(t.Gf(ci,7),t.Gf(wo,7),t.Gf(rn,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:59,vars:15,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold",2,"display","none"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"draw-flow-poc"],[1,"wrapper",2,"padding-top","0px !important","padding-left","0px !important","margin-top","0px !important"],[2,"text-align","center"],[1,"col-right"],["id","drawflow",3,"dragenter","dragleave","dragover","dragend","drop"],[1,"btn-lock"],[3,"ngStyle","click"],[1,"bar-zoom"],[3,"click"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["draggable","true",1,"drag-drawflow",3,"dragstart"],[1,"container",2,"align-items","center"],[1,"draw-flow-palette"],[1,"box"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,an,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,cn,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,r,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21," Mapa de Experiencia de Usuario "),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-mapa-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"div",21)(26,"div",22)(27,"div",23),t.YNc(28,c,6,1,"ng-container",9),t.qZA(),t.TgZ(29,"div",24)(30,"div",25),t.NdJ("dragenter",function(n){return o.onDragEnter(n)})("dragleave",function(n){return o.onDragLeave(n)})("dragover",function(n){return o.onDragOver(n)})("dragend",function(n){return o.onDragEnd(n)})("drop",function(n){return o.onDrop(n)}),t.TgZ(31,"div",26)(32,"button",27),t.NdJ("click",function(){return o.changeMode()}),t._uU(33," Bloquear "),t.qZA(),t.TgZ(34,"button",27),t.NdJ("click",function(){return o.changeMode()}),t._uU(35," Desbloquear "),t.qZA()(),t.TgZ(36,"div",28)(37,"button",29),t.NdJ("click",function(){return o.onZoomOut()}),t._uU(38,"-"),t.qZA(),t.TgZ(39,"button",29),t.NdJ("click",function(){return o.onZoomReset()}),t._uU(40,"Normal"),t.qZA(),t.TgZ(41,"button",29),t.NdJ("click",function(){return o.onZoomIn()}),t._uU(42,"+"),t.qZA()()()()()()(),t._UZ(43,"div",30)(44,"div",31),t.TgZ(45,"div",32)(46,"div",33),t.YNc(47,d,4,0,"ng-container",34),t.YNc(48,h,3,0,"ng-template",null,35,t.W1O),t.qZA(),t.TgZ(50,"div",36),t.YNc(51,b,2,0,"a",37),t.TgZ(52,"a",38),t._uU(53,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(54,"div",39)(55,"span",40),t.O4$(),t.TgZ(56,"svg",41),t._UZ(57,"rect",42)(58,"path",43),t.qZA()()()()),2&e){const i=t.MAs(49);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(16),t.Q6J("ngForOf",o.nodes),t.xp6(4),t.Q6J("ngStyle",t.VKq(11,x,o.locked?"none":"block")),t.xp6(2),t.Q6J("ngStyle",t.VKq(13,x,o.locked?"block":"none")),t.xp6(9),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(4),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Re,T.PC,M.yS],styles:[".fondo-video{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container video{border-radius:10px;box-shadow:0 0 10px 3px #fff}.tablero-container{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0}.tablero-container .toolbar{position:static!important}.tablero-container a svg{margin-top:-40px}.instructions-container,.title-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container h1{width:1320px;text-align:start;color:#fff}:host{height:100%;margin:0}:host .flex-root{height:100%}.page-loaded app-layout{opacity:1;transition:opacity 1s ease-in-out}.videoOn{display:inline}.videoOff{display:none}.app{width:250px;float:left;margin-left:10px}.toolbar{position:fixed;top:180px;right:60px;height:55px;width:100%;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add{float:right;margin-left:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal{background-color:#292b2c!important;color:#fff!important}.dark-modal .close{color:#fff!important}.txtAreaStyle{resize:both;display:block;width:100%;overflow:hidden;min-height:40px;line-height:20px}.draw-flow-palette{display:inline-flex;align-items:center;position:relative;background:white!important;width:160px;height:40px;border-radius:4px;border:2px solid black;color:#000;z-index:2;padding:15px;margin:10px}.draw-flow-poc{--border-color: #cacaca;--background-color: #ffffff;--background-box-title: #f7f7f7;margin:0;padding:0;width:96vw;height:100vh;overflow:hidden;font-family:Roboto,sans-serif}.them-edit-link{position:absolute;top:10px;right:100px;color:#000;font-size:40px}.them-edit-link a{text-decoration:none}.github-link{position:absolute;top:10px;right:20px;color:#000}.wrapper{width:100%;height:calc(100vh - 67px);display:flex}.drag-drawflow{line-height:50px;border-bottom:0px solid var(--border-color);cursor:move;-webkit-user-select:none;user-select:none;color:#fff}.btn-clear{float:right;position:absolute;top:10px;right:85px;color:#fff;font-weight:700;border:1px solid #96015b;background:#e3195a;padding:5px 10px;font-size:16px;border-radius:4px;cursor:pointer;z-index:5}.btn-lock{float:right;position:absolute;bottom:10px;right:140px;display:flex;font-size:16px;color:#fff;padding:5px 10px;background:#555555;border-radius:4px;border-right:1px solid var(--border-color);z-index:0;cursor:pointer}.bar-zoom{float:right;position:absolute;bottom:10px;right:10px;display:flex;font-size:16px;color:#fff;padding:5px 10px;background:#555555;border-radius:4px;border-right:1px solid var(--border-color);z-index:0}.bar-zoom svg{cursor:pointer;padding-left:10px}.bar-zoom svg:nth-child(1){padding-left:0}#drawflow{position:relative;width:calc(100vw - 301px);height:calc(100% - 50px);background:var(--background-color);background-size:25px 25px;background-image:linear-gradient(to right,#f1f1f1 1px,transparent 1px),linear-gradient(to bottom,#f1f1f1 1px,transparent 1px)}@media only screen and (max-width: 768px){.col{width:50px}.col .drag-drawflow span{display:none}#drawflow{width:calc(100vw - 51px)}}.drawflow .drawflow-node{background:var(--background-color);border:1px solid var(--border-color);box-shadow:0 2px 15px 2px var(--border-color);padding:0;min-width:200px}.drawflow .drawflow-node.selected{background:white;border:1px solid #4ea9ff;box-shadow:0 2px 20px 2px #4ea9ff}.drawflow .drawflow-node.selected .title-box{color:#22598c}.drawflow .connection .main-path{stroke:#4ea9ff;stroke-width:3px}.drawflow .drawflow-node .input,.drawflow .drawflow-node .output{height:15px;width:15px;border:2px solid var(--border-color)}.drawflow .drawflow-node .input:hover,.drawflow .drawflow-node .output:hover{background:#4ea9ff}.drawflow .drawflow-node .output{right:10px}.drawflow .drawflow-node .input{left:-10px;background:white}.drawflow>.drawflow-delete{border:2px solid #43b993;background:white;color:#43b993;box-shadow:0 2px 20px 2px #43b993}.drawflow-delete{border:2px solid #4ea9ff;background:white;color:#4ea9ff;box-shadow:0 2px 20px 2px #4ea9ff}.drawflow-node .title-box{height:50px;line-height:50px;background:var(--background-box-title);border-bottom:1px solid #e9e9e9;border-radius:4px 4px 0 0;padding-left:10px}.drawflow .title-box svg{position:initial}.drawflow-node .box{padding:10px 20px 20px;font-size:14px;color:#555}.drawflow-node .box p{margin-top:5px;margin-bottom:5px}.drawflow-node.welcome{width:250px}.drawflow-node.slack .title-box{border-radius:4px}.drawflow-node input,.drawflow-node select,.drawflow-node textarea{border-radius:4px;border:0px solid var(--border-color);height:30px;line-height:30px;font-size:16px;width:158px;color:#555}.drawflow-node textarea{height:50px}.drawflow-node.personalized{background:red;height:200px;text-align:center;color:#fff}.drawflow-node.personalized .input{background:yellow}.drawflow-node.personalized .output{background:green}.drawflow-node.personalized.selected{background:blue}.drawflow .connection .point{stroke:var(--border-color);stroke-width:2;fill:#fff}.drawflow .connection .point.selected,.drawflow .connection .point:hover{fill:#4ea9ff}.modal{display:none;position:fixed;z-index:7;left:0;top:0;width:100vw;height:100vh;overflow:auto;background-color:#000;background-color:#000000b3}.modal-content{position:relative;background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;width:400px}.modal .close{color:#aaa;float:right;font-size:28px;font-weight:700;cursor:pointer}@media only screen and (max-width: 768px){.modal-content{width:80%}}.parent-drawflow{display:flex;overflow:hidden;touch-action:none;outline:none}.drawflow{width:100%;height:100%;position:relative;-webkit-user-select:none;user-select:none;perspective:0}.drawflow .parent-node{position:relative}.drawflow .drawflow-node{display:flex;align-items:center;position:absolute;background:white!important;min-height:40px;border-radius:4px;border:2px solid black;color:#000;z-index:2;padding:15px}.drawflow .drawflow-node.selected{background:gray}.drawflow .drawflow-node:hover{cursor:move}.drawflow .drawflow-node .inputs,.drawflow .drawflow-node .outputs{width:0px}.drawflow .drawflow-node .drawflow_content_node{width:100%;display:block}.drawflow .drawflow-node .input,.drawflow .drawflow-node .output{position:relative;width:20px;height:20px;border-radius:50%;border:0px solid black;cursor:crosshair;z-index:1;margin-bottom:5px}.drawflow .drawflow-node .input{left:-27px;top:2px;background:white;border:1px solid black}.drawflow .drawflow-node .output{right:-3px;top:2px}.drawflow svg{z-index:0;position:absolute;overflow:visible!important}.drawflow .connection{position:absolute;pointer-events:none}.drawflow .connection .main-path{fill:none;stroke-width:5px;stroke:#4682b4;pointer-events:all}.drawflow .connection .main-path:hover{stroke:#1266ab;cursor:pointer}.drawflow .connection .main-path.selected{stroke:#43b993}.drawflow .connection .point{cursor:move;stroke:#000;stroke-width:2;fill:#fff;pointer-events:all}.drawflow .connection .point.selected,.drawflow .connection .point:hover{fill:#1266ab}.drawflow .main-path{fill:none;stroke-width:5px;stroke:#4682b4}.drawflow-delete{position:absolute;display:block;width:30px;height:30px;background:black;color:#fff;z-index:4;border:2px solid white;line-height:30px;font-weight:700;text-align:center;border-radius:50%;font-family:monospace;cursor:pointer}.drawflow>.drawflow-delete{margin-left:-15px;margin-top:15px}.parent-node .drawflow-delete{right:-15px;top:-15px}@media (max-width: 1200px){.video-container{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}\n"],encapsulation:2,changeDetection:0}),s})();const F=["acc"];function I(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let W=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-necesidades-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(F,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,I,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const z=["ktAside"],rt=["ktHeaderMobile"],Y=["ktHeader"];function et(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function ft(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Pt(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function _t(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Xt(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Gt(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function le(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Jt=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroNecesidades.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_necesidades");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].scopecanvas_necesidade&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&"Motivadores"==this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.tipo&&i.push({id:this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.id,content:this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.contenido,type:this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.tipo,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_necesidades",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-necesidades")),document.querySelectorAll("app-note-necesidades").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_necesidades",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_necesidades",this.notes_all),localStorage.setItem("notes_all_necesidades",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Motivadores"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaNecesidades(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase10",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase10"),this.socketWebService.emitEventTableroSaveNecesidades({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase10"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createNecesidades({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value,type:"Motivadores"}).subscribe(i=>{const n=i.necesidad_id;this.notes.push({id:n,content:e.target.value,type:"Motivadores",usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_necesidades",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateNecesidades({id:n,content:e.target.value,type:"Motivadores",usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Motivadores",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_necesidades",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateNecesidades(e),this._proyectsService.updateNecesidades(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteNecesidades(n),localStorage.setItem("notes_necesidades",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteNecesidades(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-necesidades"]],viewQuery:function(e,o){if(1&e&&(t.Gf(z,7),t.Gf(rt,7),t.Gf(Y,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,et,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,ft,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Pt,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Necesidades "Motivadores" '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-necesidades-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,_t,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Xt,4,0,"ng-container",28),t.YNc(34,Gt,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,le,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,W,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Mt=["acc"];function re(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let qt=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-necesidades-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Mt,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,re,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Rt=["ktAside"],Ye=["ktHeaderMobile"],io=["ktHeader"],de=["canvasRef"],Se=["tableroRef"];function Ae(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function ae(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function ke(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function ge(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Oe(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function li(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function Ze(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function ko(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Ut=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroNecesidades.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_necesidades_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateNecesidades(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].scopecanvas_necesidade&&"Motivadores"==this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.tipo&&(i.push({id:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.id,content:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.contenido,type:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.tipo,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.position?this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.position:n,dragPosition:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_necesidades_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-necesidades-decision")),document.querySelectorAll("app-note-necesidades-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_necesidades_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_necesidades",this.notes_all),localStorage.setItem("notes_all_necesidades",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Motivadores"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaNecesidades(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase11",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase11"),this.socketWebService.emitEventTableroSaveNecesidades({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase11"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Motivadores",usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_necesidades_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateNecesidades({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Motivadores",usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Motivadores",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_necesidades_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateNecesidades(e),this._proyectsService.updateNecesidades(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(this.notes_all)})}writeBoard(){console.log("writeBoard",this.notes_all),this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteNecesidades(n),localStorage.setItem("notes_necesidades_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteNecesidades(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-necesidades-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Rt,7),t.Gf(Ye,7),t.Gf(io,7),t.Gf(de,5),t.Gf(Se,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ae,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,ae,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,ke,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Necesidades "Motivadores" (Decisi\xf3n) '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-necesidades-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,ge,7,4,"li",22),t.qZA(),t.YNc(27,Oe,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,li,4,0,"ng-container",30),t.YNc(36,Ze,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,ko,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,qt,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Ee=["acc"];function di(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Oo=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-necesidades-dolores-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Ee,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,di,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const ln=["ktAside"],no=["ktHeaderMobile"],dn=["ktHeader"];function pi(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function pn(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function un(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function hn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function so(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function gn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function fn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let _n=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroNecesidades.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_necesidades_dolores");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].scopecanvas_necesidade&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&"Dolores"==this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.tipo&&i.push({id:this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.id,content:this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.contenido,type:this.proyecto.proyecto_recursos[n].scopecanvas_necesidade.tipo,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_necesidades_dolores",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-necesidades-dolores")),document.querySelectorAll("app-note-necesidades-dolores").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_necesidades_dolores",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_necesidades_dolores",this.notes_all),localStorage.setItem("notes_all_necesidades_dolores",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Dolores"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaNecesidades(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase12",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase12"),this.socketWebService.emitEventTableroSaveNecesidades({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase12"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createNecesidades({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value,type:"Dolores"}).subscribe(i=>{const n=i.necesidad_id;this.notes.push({id:n,content:e.target.value,type:"Dolores",usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_necesidades_dolores",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateNecesidades({id:n,content:e.target.value,type:"Dolores",usuario_id:this.usuario.id}),this.ref.detectChanges(),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Dolores",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_necesidades_dolores",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateNecesidades(e),this._proyectsService.updateNecesidades(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteNecesidades(n),localStorage.setItem("notes_necesidades_dolores",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteNecesidades(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-necesidades-dolores"]],viewQuery:function(e,o){if(1&e&&(t.Gf(ln,7),t.Gf(no,7),t.Gf(dn,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,pi,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,pn,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,un,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Necesidades "Dolores" '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-necesidades-dolores-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,hn,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,so,4,0,"ng-container",28),t.YNc(34,gn,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,fn,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Oo,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const ze=["acc"];function mn(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let To=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-necesidades-dolores-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ze,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,mn,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ce=["ktAside"],we=["ktHeaderMobile"],ui=["ktHeader"],hi=["canvasRef"],gi=["tableroRef"];function vn(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Ht(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function ro(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function me(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function ve(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Mo(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function fi(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function bn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let xn=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this._user={},this.equipo=[],this.isLoading=!0,this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroNecesidades.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_necesidades_dolores_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateNecesidades(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].scopecanvas_necesidade&&"Dolores"==this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.tipo&&(i.push({id:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.id,content:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.contenido,type:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.tipo,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.position?this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.position:n,dragPosition:this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_necesidade.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_necesidades_dolores_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-necesidades-dolores-decision")),document.querySelectorAll("app-note-necesidades-dolores-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_necesidades_dolores_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_necesidades_dolores",this.notes_all),localStorage.setItem("notes_all_necesidades_dolores",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Dolores"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaNecesidades(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase13",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase13"),this.socketWebService.emitEventTableroSaveNecesidades({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase13"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Dolores",usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_necesidades_dolores_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateNecesidades({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Dolores",usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Dolores",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_necesidades_dolores_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateNecesidades(e),this._proyectsService.updateNecesidades(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(this.notes_all)})}writeBoard(){console.log("writeBoard",this.notes_all),this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroNecesidades({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteNecesidades(n),localStorage.setItem("notes_necesidades_dolores_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteNecesidades(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-necesidades-dolores-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ce,7),t.Gf(we,7),t.Gf(ui,7),t.Gf(hi,5),t.Gf(gi,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,vn,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Ht,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,ro,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Necesidades "Dolores" (Decisi\xf3n) '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-necesidades-dolores-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,me,7,4,"li",22),t.qZA(),t.YNc(27,ve,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Mo,4,0,"ng-container",30),t.YNc(36,fi,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,bn,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,To,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const _i=["acc"];function Ne(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Po=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-objetivos-corto-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(_i,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Ne,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const mi=["ktAside"],ao=["ktHeaderMobile"],co=["ktHeader"];function So(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function yn(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function lo(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Ao(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Zo(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Cn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function O(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let q=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroObjetivos.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_objetivos_corto");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].scopecanvas_objetivo&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&"Corto"==this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.tipo&&i.push({id:this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.id,content:this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.contenido,type:this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.tipo,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_objetivos_corto",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-objetivos-corto")),document.querySelectorAll("app-note-objetivos-corto").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_objetivos_corto",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_objetivos_corto",this.notes_all),localStorage.setItem("notes_all_objetivos_corto",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Corto"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaObjetivos(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase16",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase16"),this.socketWebService.emitEventTableroSaveObjetivos({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase16"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createObjetivos({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value,type:"Corto"}).subscribe(i=>{const n=i.objetivo_id;this.notes.push({id:n,content:e.target.value,type:"Corto",usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_objetivos_corto",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateObjetivos({id:n,content:e.target.value,type:"Corto",usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Corto",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_objetivos_corto",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateObjetivos(e),this._proyectsService.updateObjetivos(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteObjetivos(n),localStorage.setItem("notes_objetivos_corto",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteObjetivos(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-objetivos-corto"]],viewQuery:function(e,o){if(1&e&&(t.Gf(mi,7),t.Gf(ao,7),t.Gf(co,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,So,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,yn,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,lo,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Objetivos "Corto Plazo" '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-objetivos-corto-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,Ao,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Zo,4,0,"ng-container",28),t.YNc(34,Cn,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,O,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Po,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const B=["acc"];function it(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Q=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-objetivos-corto-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(B,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,it,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const nt=["ktAside"],at=["ktHeaderMobile"],dt=["ktHeader"],pt=["canvasRef"],xt=["tableroRef"];function bt(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function wt(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Nt(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Bt(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function yt(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Kt(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function ie(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function pe(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Vt=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this._user={},this.equipo=[],this.isLoading=!0,this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroObjetivos.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_objetivos_corto_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateObjetivos(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].scopecanvas_objetivo&&"Corto"==this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.tipo&&(i.push({id:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.id,content:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.contenido,type:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.tipo,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.position?this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.position:n,dragPosition:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_objetivos_corto_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-objetivos-corto-decision")),document.querySelectorAll("app-note-objetivos-corto-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_objetivos_corto_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_objetivos_corto",this.notes_all),localStorage.setItem("notes_all_objetivos_corto",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Corto"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaObjetivos(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase17",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase17"),this.socketWebService.emitEventTableroSaveObjetivos({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase17"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Corto",usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_objetivos_corto_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateObjetivos({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Corto",usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Corto",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_objetivos_corto_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateObjetivos(e),this._proyectsService.updateObjetivos(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(this.notes_all)})}writeBoard(){console.log("writeBoard",this.notes_all),this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteObjetivos(n),localStorage.setItem("notes_objetivos_corto_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteObjetivos(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-objetivos-corto-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(nt,7),t.Gf(at,7),t.Gf(dt,7),t.Gf(pt,5),t.Gf(xt,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,bt,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,wt,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Nt,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Objetivos "Corto Plazo" (Decisi\xf3n) '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-objetivos-corto-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Bt,7,4,"li",22),t.qZA(),t.YNc(27,yt,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Kt,4,0,"ng-container",30),t.YNc(36,ie,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,pe,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Q,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Ge=["acc"];function $e(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let ue=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-objetivos-largo-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Ge,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,$e,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Tn=["ktAside"],Mn=["ktHeaderMobile"],Pn=["ktHeader"];function Sn(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function An(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Zn(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function En(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Nn(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Dn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function qn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Fn=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroObjetivos.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_objetivos_largo");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].scopecanvas_objetivo&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&"Largo"==this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.tipo&&i.push({id:this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.id,content:this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.contenido,type:this.proyecto.proyecto_recursos[n].scopecanvas_objetivo.tipo,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_objetivos_largo",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-objetivos-largo")),document.querySelectorAll("app-note-objetivos-largo").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_objetivos_largo",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_objetivos_largo",this.notes_all),localStorage.setItem("notes_all_objetivos_largo",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Largo"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaObjetivos(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase18",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase18"),this.socketWebService.emitEventTableroSaveObjetivos({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase18"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createObjetivos({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value,type:"Largo"}).subscribe(i=>{const n=i.objetivo_id;this.notes.push({id:n,content:e.target.value,type:"Largo",usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_objetivos_largo",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateObjetivos({id:n,content:e.target.value,type:"Largo",usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Largo",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_objetivos_largo",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateObjetivos(e),this._proyectsService.updateObjetivos(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteObjetivos(n),localStorage.setItem("notes_objetivos_largo",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteObjetivos(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-objetivos-largo"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Tn,7),t.Gf(Mn,7),t.Gf(Pn,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Sn,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,An,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Zn,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Objetivos "Largo Plazo" '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-objetivos-largo-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,En,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Nn,4,0,"ng-container",28),t.YNc(34,Dn,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,qn,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,ue,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const In=["acc"];function Un(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Ln=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-objetivos-largo-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(In,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Un,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Jn=["ktAside"],Hn=["ktHeaderMobile"],Bn=["ktHeader"],jn=["canvasRef"],Wn=["tableroRef"];function Qn(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Vn(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Rn(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Yn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function zn(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Gn(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function $n(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function Xn(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Kn=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroObjetivos.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_objetivos_largo_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateObjetivos(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].scopecanvas_objetivo&&"Largo"==this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.tipo&&(i.push({id:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.id,content:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.contenido,type:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.tipo,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.position?this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.position:n,dragPosition:this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_objetivo.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_objetivos_largo_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-objetivos-largo-decision")),document.querySelectorAll("app-note-objetivos-largo-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_objetivos_largo_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_objetivos_largo",this.notes_all),localStorage.setItem("notes_all_objetivos_largo",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content,type:"Largo"});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaObjetivos(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase19",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase19"),this.socketWebService.emitEventTableroSaveObjetivos({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase19"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Largo",usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_objetivos_largo_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateObjetivos({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,type:"Largo",usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,type:"Largo",usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_objetivos_largo_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateObjetivos(e),this._proyectsService.updateObjetivos(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content,type:e.type}),this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroObjetivos({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteObjetivos(n),localStorage.setItem("notes_objetivos_largo_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteObjetivos(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-objetivos-largo-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Jn,7),t.Gf(Hn,7),t.Gf(Bn,7),t.Gf(jn,5),t.Gf(Wn,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Qn,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Vn,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Rn,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20,' Scope Canvas - Objetivos "Largo Plazo" (Decisi\xf3n) '),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-objetivos-largo-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Yn,7,4,"li",22),t.qZA(),t.YNc(27,zn,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Gn,4,0,"ng-container",30),t.YNc(36,$n,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,Xn,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Ln,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const ts=["acc"];function es(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let os=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-propositos-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ts,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,es,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const is=["ktAside"],ns=["ktHeaderMobile"],ss=["ktHeader"];function rs(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function as(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function cs(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function ls(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function ds(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function ps(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function us(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let hs=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroPropositos.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_propositos");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].scopecanvas_proposito&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].scopecanvas_proposito.id,content:this.proyecto.proyecto_recursos[n].scopecanvas_proposito.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_propositos",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-propositos")),document.querySelectorAll("app-note-propositos").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_propositos",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_propositos",this.notes_all),localStorage.setItem("notes_all_propositos",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaPropositos(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase14",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase14"),this.socketWebService.emitEventTableroSavePropositos({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase14"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createPropositos({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.proposito_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_propositos",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdatePropositos({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_propositos",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdatePropositos(e),this._proyectsService.updatePropositos(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroPropositos({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroPropositos({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeletePropositos(n),localStorage.setItem("notes_propositos",JSON.stringify(this.notes)),i>0&&this._proyectsService.deletePropositos(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-propositos"]],viewQuery:function(e,o){if(1&e&&(t.Gf(is,7),t.Gf(ns,7),t.Gf(ss,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n        float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,rs,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,as,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,cs,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Scope Canvas - Propositos "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-propositos-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,ls,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,ds,4,0,"ng-container",28),t.YNc(34,ps,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,us,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,os,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const gs=["acc"];function fs(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let _s=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-propositos-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(gs,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,fs,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const ms=["canvasRef"],vs=["tableroRef"];function bs(s,l){if(1&s&&t._UZ(0,"app-loadmask",41),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function xs(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",42)(2,"span",43),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function ys(s,l){if(1&s&&t._UZ(0,"app-timer",44),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Cs(s,l){1&s&&t._UZ(0,"div",56)}function ws(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().quitar(n,i)}),t._uU(1,"Quitar"),t.qZA()}}function ks(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().votar(n,i)}),t._uU(1,"Votar"),t.qZA()}}function Os(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().votarMaximo(n,i)}),t._uU(1,"Seleccionar"),t.qZA()}}function Ts(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw().index;return t.oxw().quitarMaximo(n,i)}),t._uU(1,"Quitar"),t.qZA()}}function Ms(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div",49),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index,v=t.oxw().index;return t.oxw().onDragMove(i,v,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index,v=t.oxw().index;return t.oxw().onDragEnded(i,v,a)}),t._uU(1),t.TgZ(2,"label",50),t._uU(3),t.qZA(),t.YNc(4,Cs,1,0,"div",51),t.YNc(5,ws,2,0,"button",52),t.YNc(6,ks,2,0,"button",53),t.YNc(7,Os,2,0,"button",54),t.YNc(8,Ts,2,0,"button",55),t.qZA()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw().index,n=t.oxw();t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",n.dragPosition[o]),t.xp6(1),t.hij("",e.label," "),t.xp6(2),t.Oqu(e.votos?e.votos:0),t.xp6(1),t.Q6J("ngIf",n.verifyVotoMaximo(i,o)),t.xp6(1),t.Q6J("ngIf",n.verifyVoto(i,o)&&"Decisor"!=n.rol&&e.votos>0),t.xp6(1),t.Q6J("ngIf",n.num_votos<n.maximo_votos&&"Decisor"!=n.rol),t.xp6(1),t.Q6J("ngIf",!n.verifyVotoMaximo(i,o)&&!n.verifyVotoTablero(i)&&"Decisor"==n.rol),t.xp6(1),t.Q6J("ngIf",n.verifyVotoMaximo(i,o)&&"Decisor"==n.rol)}}function Ps(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",45)(2,"h2",46),t._uU(3),t.qZA(),t.TgZ(4,"div",47),t.YNc(5,Ms,9,9,"div",48),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Q6J("ngForOf",e.data)}}function Ss(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",61),t.TgZ(2,"label",62),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function As(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",63),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",64),t._UZ(3,"path",65),t.qZA()(),t.BQk()}}function Zs(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",63),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",64),t._UZ(2,"path",66),t.qZA()()}}function Es(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveVotoAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Ns=(()=>{class s{constructor(e,o,i,n,a,v){this.route=e,this.socketWebService=o,this._proyectsService=i,this.el=n,this.ref=a,this._router=v,this.notas=[],this.tablero=[],this.tablero2=[],this.votos=[],this.voto_tablero=[],this.voto_maximo=[],this.maximo_votos=0,this.num_votos=0,this._user={},this.equipo=[],this.filteredTablero=new At.t(1),this._onDestroy=new Dt.x,this.width=50,this.height=50,this.points=[],this.isAvailabe=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isLoading=!0,this.onMouseMove=H=>{this.write(H)},this.onClick=H=>{"canvasId"===H.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenTableroVotoPropositos.subscribe(H=>{const{tablero:G}=H;this.readBoard(G,!1)}),this.socketWebService.outEven2.subscribe(H=>{const{prevPost:G}=H;let m=G.usuario.split(" ")[0].replace("-","");m=m.replace(".",""),m=m.replace("@",""),-1==this.equipo.findIndex(Yt=>Yt==m)&&this.equipo.push(m),this.ref.detectChanges(),jQuery("#puntero-"+m).css({left:G.x,top:G.y,display:"block"}),jQuery("#equipo-"+m).css({left:G.x+30,top:G.y,display:"block"}),this.writeSingle(G,!1)}),this.socketWebService.outEvenUsersActive.subscribe(H=>{const{usuarios_active:G}=H;this.readUsersActive(G,!1)}),this.socketWebService.outEvenEtapaActive.subscribe(H=>{this.etapa_active(H)}),this.socketWebService.outEvenContinueVoto.subscribe(H=>{this.continue()});const U=localStorage.getItem("usuario");let R=JSON.parse(U);this.usuario=R,this.usuario.active=!0}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){console.log("fin",e),this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.tablero[o].data[i].position=i,this.tablero[o].data[i].dragPosition=this.dragPosition[i],this._proyectsService.updatePropositos(this.tablero[o].data[i].id,{votos:this.tablero[o].data[i].votos,detalle:this.tablero[o].data[i].detalle,seleccionado:this.tablero[o].data[i].seleccionado,position:this.tablero[o].data[i].position,dragPosition:this.tablero[o].data[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(o=>{this.proyecto_id=o.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id);const e=localStorage.getItem("usuario");this._user=JSON.parse(e)}ngAfterViewInit(){this.setInitialValue(),this.render();const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),this._onDestroy.next(),this._onDestroy.complete(),window.removeEventListener("scroll",this.disableScroll)}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase15"])}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,this.maximo_votos="Decisor"==this.rol?2:1,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0,this.tablero=[];let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)if(null!=this.proyecto.proyecto_recursos[a].scopecanvas_proposito){i.push({id:this.proyecto.proyecto_recursos[a].scopecanvas_proposito.id,label:this.proyecto.proyecto_recursos[a].scopecanvas_proposito.contenido,votos:this.proyecto.proyecto_recursos[a].scopecanvas_proposito.votos,seleccionado:this.proyecto.proyecto_recursos[a].scopecanvas_proposito.seleccionado,voto_maximo:this.proyecto.proyecto_recursos[a].scopecanvas_proposito.seleccionado,detalle:JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_proposito.detalle)||[],position:this.proyecto.proyecto_recursos[a].scopecanvas_proposito.position?this.proyecto.proyecto_recursos[a].scopecanvas_proposito.position:n,dragPosition:this.proyecto.proyecto_recursos[a].scopecanvas_proposito.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_proposito.dragPosition):{x:0,y:0}}),this.proyecto.proyecto_recursos[a].scopecanvas_proposito.seleccionado&&this.voto_tablero.push(0),this.dragPosition.push(this.proyecto.proyecto_recursos[a].scopecanvas_proposito.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_proposito.dragPosition):{x:0,y:0});let v=JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_proposito.detalle)||[];const U=v.findIndex(R=>R.usuario_id==this.usuario.id);-1!=U&&(this.num_votos=this.num_votos+v[U].votos),this.voto_maximo.push("0:"+n),n++}console.log("propositos",i),this.tablero.push({title:"Propositos",data:i}),this.tablero2=JSON.stringify(this.tablero),this.filteredTablero.next(this.tablero.slice()),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}saveVotoAll(){console.log("save_voto_all_propositos",this.tablero);let e=[],o=[],i="",n="";for(let a in this.tablero){let v=[];for(let U in this.tablero[a].data){v.push({id:this.tablero[a].data[U].id,label:this.tablero[a].data[U].label,votos:this.tablero[a].data[U].votos,seleccionado:this.tablero[a].data[U].seleccionado,detalle:this.tablero[a].data[U].detalle,position:this.tablero[a].data[U].position,dragPosition:this.tablero[a].data[U].dragPosition}),this.tablero[a].data[U].seleccionado&&o.push(this.usuario.id);for(let R in this.usuarios_active)i=this.tablero[a].data[U].detalle.findIndex(H=>H.usuario_id==this.usuarios_active[R].id),-1!=i&&(n=o.findIndex(H=>H==this.usuarios_active[R].id),-1==n&&o.push(this.usuarios_active[R].id))}e.push({title:this.tablero[a].title,data:v})}this.usuarios_active.length==o.length?(console.log("guardar_votos",e),this._proyectsService.updateEtapaPropositos(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase15",tablero:e,type:"voto"}).subscribe(v=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase15"),this.socketWebService.emitEventTableroSaveVotoPropositos({tablero:JSON.stringify(e)})},v=>{})):_().fire({text:"Ups, no todos los participantes han votado.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}})}etapa_active(e){""!=e&&this._router.navigate([e])}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}setInitialValue(){this.filteredTablero.pipe((0,mt.q)(1),(0,$t.R)(this._onDestroy)).subscribe(()=>{})}writeBoard(){this.socketWebService.emitEventTableroVotoPropositos({tablero:JSON.stringify(this.tablero)})}readBoard(e,o){const i=JSON.parse(e);this.tablero=[];for(let n in i)this.tablero.push({title:i[n].title,data:i[n].data});this.tablero2=JSON.stringify(this.tablero);for(let n in this.tablero[0].data)this.dragPosition[this.tablero[0].data[n].position]=this.tablero[0].data[n].dragPosition;this.filteredTablero.next(this.tablero.slice())}votar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos+1;const i=this.votos.findIndex(R=>R.id==e+":"+o);-1==i?this.votos.push({id:e+":"+o,votos:1}):this.votos[i].votos=this.votos[i].votos+1,-1==this.voto_tablero.findIndex(R=>R==e)&&this.voto_tablero.push(e),this.num_votos=this.num_votos+1;const v=this.tablero[e].data[o].detalle.findIndex(R=>R.usuario_id==this.usuario.id);-1==v?this.tablero[e].data[o].detalle.push({usuario_id:this.usuario.id,votos:1}):this.tablero[e].data[o].detalle[v].votos=this.tablero[e].data[o].detalle[v].votos+1,this._proyectsService.updatePropositos(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(R=>{},R=>{}),this.writeBoard()}votarMaximo(e,o){this.voto_maximo.push(e+":"+o),this.voto_tablero.push(e),this.tablero[e].data[o].voto_maximo=!0,this.tablero[e].data[o].seleccionado=!0,this._proyectsService.updatePropositos(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(n=>{},n=>{}),this.writeBoard()}quitar(e,o){this.tablero[e].data[o].votos=this.tablero[e].data[o].votos-1,this.num_votos=this.num_votos-1;const i=this.votos.findIndex(U=>U.id==e+":"+o);if(-1!=i&&(this.votos[i].votos=this.votos[i].votos-1,0==this.votos[i].votos)){this.votos.splice(i,1);const U=this.voto_tablero.findIndex(R=>R==e);-1!=U&&this.voto_tablero.splice(U,1)}const a=this.tablero[e].data[o].detalle.findIndex(U=>U.usuario_id==this.usuario.id);if(-1!=a){let U=this.tablero[e].data[o].detalle[a].votos-1;U<1?this.tablero[e].data[o].detalle.splice(a,1):this.tablero[e].data[o].detalle[a].votos=U}this._proyectsService.updatePropositos(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}quitarMaximo(e,o){const i=this.voto_maximo.findIndex(v=>v==e+":"+o);-1!=i&&this.voto_maximo.splice(i,1);const n=this.voto_tablero.findIndex(v=>v==e);-1!=n&&this.voto_tablero.splice(n,1),this.tablero[e].data[o].voto_maximo=!1,this.tablero[e].data[o].seleccionado=!1,this._proyectsService.updatePropositos(this.tablero[e].data[o].id,{votos:this.tablero[e].data[o].votos,detalle:this.tablero[e].data[o].detalle,seleccionado:this.tablero[e].data[o].seleccionado,position:this.tablero[e].data[o].position,dragPosition:this.tablero[e].data[o].dragPosition}).subscribe(v=>{},v=>{}),this.writeBoard()}verifyVoto(e,o){const i=this.votos.findIndex(v=>v.id==e+":"+o),a=this.tablero[e].data[o].detalle.findIndex(v=>v.usuario_id==this.usuario.id);return-1!=i||-1!=a}verifyVotoMaximo(e,o){return 1==this.tablero[e].data[o].voto_maximo}verifyVotoTablero(e){return-1!=this.voto_tablero.findIndex(i=>i==e)}onPlayPause(){if(this.playing=!0,$("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),$("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=$("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),$("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),$("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,this.ref.detectChanges()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.gz),t.Y36(st),t.Y36(j.a),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(M.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-propositos-voto"]],viewQuery:function(e,o){if(1&e&&(t.Gf(ms,5),t.Gf(vs,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:50,vars:13,consts:[[1,"",2,"background-color","#070d15 !important","overflow","hidden"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],["id","kt_landing_menu",1,"menu","menu-column","flex-nowrap","menu-rounded","menu-lg-row","menu-title-gray-500","menu-state-title-primary","nav","nav-flush","fs-5","fw-bold"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],["tableroRef",""],[1,"flex","flex-auto","p-6","sm:p-10"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[1,"clasificacion-container"],[2,"color","#fff"],[1,"clasificacion-list"],["class","clasificacion-box","cdkDragBoundary",".clasificacion-container","cdkDrag","",3,"cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["cdkDragBoundary",".clasificacion-container","cdkDrag","",1,"clasificacion-box",3,"cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"votos"],["class","voto-maximo bg-success position-absolute h-8px w-8px rounded-circle",4,"ngIf"],["class","quitar",3,"click",4,"ngIf"],["class","votar",3,"click",4,"ngIf"],["class","votar-maximo",3,"click",4,"ngIf"],["class","quitar-maximo",3,"click",4,"ngIf"],[1,"voto-maximo","bg-success","position-absolute","h-8px","w-8px","rounded-circle"],[1,"quitar",3,"click"],[1,"votar",3,"click"],[1,"votar-maximo",3,"click"],[1,"quitar-maximo",3,"click"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,bs,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,xs,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,ys,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13),t._UZ(15,"div",14),t.qZA()()()()()(),t.TgZ(16,"div",15),t.O4$(),t.TgZ(17,"svg",16),t._UZ(18,"path",17),t.qZA()()(),t.kcU(),t.TgZ(19,"div",18)(20,"h1"),t._uU(21,' Scope Canvas - Prop\xf3sito "Votaci\xf3n" '),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"app-propositos-accordion"),t.qZA(),t.TgZ(24,"div",20)(25,"div",21,22)(27,"div",23),t.YNc(28,Ps,6,2,"ng-container",9),t.ALo(29,"async"),t.qZA()(),t.YNc(30,Ss,4,3,"ng-container",9),t._UZ(31,"canvas",24,25),t.qZA(),t._UZ(33,"div",26),t.TgZ(34,"div",27),t._UZ(35,"video",28),t.qZA(),t.TgZ(36,"div",29)(37,"div",30),t.YNc(38,As,4,0,"ng-container",31),t.YNc(39,Zs,3,0,"ng-template",null,32,t.W1O),t.qZA(),t.TgZ(41,"div",33),t.YNc(42,Es,2,0,"a",34),t.TgZ(43,"a",35),t._uU(44,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(45,"div",36)(46,"span",37),t.O4$(),t.TgZ(47,"svg",38),t._UZ(48,"rect",39)(49,"path",40),t.qZA()()()()),2&e){const i=t.MAs(40);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(16),t.Q6J("ngForOf",t.lcZ(29,11,o.filteredTablero)),t.xp6(2),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,_s,De.PQ,ut.Zt,M.yS],pipes:[T.Ov],styles:[".fondo-video{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container{text-align:center;position:absolute;width:100%;margin:-1010px 0 0}.video-container video{border-radius:10px;box-shadow:0 0 10px 3px #fff}.title-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container h1{width:1320px;text-align:start;color:#fff}.instructions-container{width:100%;text-align:start;padding:10px;margin-bottom:20px}.tablero-container{min-width:100%;height:600px;overflow:auto;background-color:#232323;position:relative;padding:20px;margin:0}:host{height:100%;margin:0}:host .flex-root{height:100%}.page-loaded app-layout{opacity:1;transition:opacity 1s ease-in-out}.videoOn{display:inline}.videoOff{display:none}.app{width:250px;float:left;margin-left:10px}.dark-modal{background-color:#292b2c!important;color:#fff!important}.dark-modal .close{color:#fff!important}.clasificacion-container{width:100%;max-width:100%;height:460px;margin:0 25px 25px 0;display:grid}.clasificacion-list{border:solid 1px #ccc;min-height:490px;background:#cccaca;border-radius:4px;overflow:auto;display:block;padding:10px}.clasificacion-box{padding:0 10px;border-bottom:solid 1px #ccc;color:#000000de;display:inline-flex;flex-direction:row;align-items:center;justify-content:space-between;word-break:break-all;box-sizing:border-box;cursor:move;background:#ffc;font-size:14px;width:150px;min-width:150px;height:150px;cursor:pointer;overflow-wrap:break-word;box-shadow:0 10px 24px #000000bf;margin-left:20px;margin-bottom:20px}.clasificacion-box:nth-child(even){background:#cfc}.clasificacion-box:nth-child(3n){background:#ccf}.clasificacion-box:nth-child(5n){background:#ffc}.clasificacion-box:hover,.clasificacion-box:focus{box-shadow:10px 10px 7px #000000b3}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.clasificacion-box:last-child{border:none}.clasificacion-list.cdk-drop-list-dragging .clasificacion-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.votos{position:absolute;top:10px;right:10px;color:#fff;width:24px;height:24px;font-size:16px;padding-left:6px;padding-right:6px;background-color:#000;border:1px solid #000;border-radius:50%}.voto-maximo{position:absolute;top:-10px;left:-12px;font-size:28px;width:32px!important;height:32px!important;color:green}.votar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#05b8ff;border:1px solid #05b8ff;border-radius:10%}.votar:hover{background-color:#0751ff}.votar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:100px;height:25px;background-color:#00c749;border:1px solid #00c749;border-radius:10%}.votar-maximo:hover{background-color:#05720d}.quitar{position:absolute;bottom:10px;right:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar:hover{background-color:#ff0707}.quitar-maximo{position:absolute;bottom:10px;left:10px;color:#fff;width:60px;height:25px;background-color:#fd3e4e;border:1px solid #fd3e4e;border-radius:10%}.quitar-maximo:hover{background-color:#ff0707}canvas{position:absolute}@media (max-width: 1200px){.video-container{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container video{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}\n"],encapsulation:2,changeDetection:0}),s})();const Ds=["acc"];function qs(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Fs=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-acciones-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Ds,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,qs,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Is=["ktAside"],Us=["ktHeaderMobile"],Ls=["ktHeader"];function Js(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Hs(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Bs(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function js(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Ws(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Qs(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function Vs(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Rs=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroAcciones.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_acciones");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].scopecanvas_accione&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].scopecanvas_accione.id,content:this.proyecto.proyecto_recursos[n].scopecanvas_accione.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_acciones",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-acciones")),document.querySelectorAll("app-note-acciones").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_acciones",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_acciones",this.notes_all),localStorage.setItem("notes_all_acciones",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaAcciones(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase20",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase20"),this.socketWebService.emitEventTableroSaveAcciones({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase20"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createAcciones({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.accion_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_acciones",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateAcciones({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_acciones",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateAcciones(e),this._proyectsService.updateAcciones(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroAcciones({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroAcciones({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteAcciones(n),localStorage.setItem("notes_acciones",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteAcciones(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-acciones"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Is,7),t.Gf(Us,7),t.Gf(Ls,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Js,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Hs,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Bs,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Scope Canvas - Acciones "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-acciones-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,js,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Ws,4,0,"ng-container",28),t.YNc(34,Qs,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,Vs,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Fs,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Ys=["acc"];function zs(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Gs=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-acciones-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Ys,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,zs,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const $s=["ktAside"],Xs=["ktHeaderMobile"],Ks=["ktHeader"],tr=["canvasRef"],er=["tableroRef"];function or(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function ir(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function nr(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function sr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function rr(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function ar(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function cr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function lr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let dr=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroAcciones.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_acciones_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateAcciones(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].scopecanvas_accione&&(i.push({id:this.proyecto.proyecto_recursos[a].scopecanvas_accione.id,content:this.proyecto.proyecto_recursos[a].scopecanvas_accione.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].scopecanvas_accione.position?this.proyecto.proyecto_recursos[a].scopecanvas_accione.position:n,dragPosition:this.proyecto.proyecto_recursos[a].scopecanvas_accione.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_accione.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].scopecanvas_accione.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_accione.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_acciones_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-acciones-decision")),document.querySelectorAll("app-note-acciones-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_acciones_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_acciones",this.notes_all),localStorage.setItem("notes_all_acciones",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaAcciones(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase21",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase21"),this.socketWebService.emitEventTableroSaveAcciones({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase21"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_acciones_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateAcciones({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_acciones_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateAcciones(e),this._proyectsService.updateAcciones(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroAcciones({tablero:JSON.stringify(this.notes_all)})}writeBoard(){console.log("writeBoard",this.notes_all),this.socketWebService.emitEventTableroAcciones({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroAcciones({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteAcciones(n),localStorage.setItem("notes_acciones_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteAcciones(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-acciones-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf($s,7),t.Gf(Xs,7),t.Gf(Ks,7),t.Gf(tr,5),t.Gf(er,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,or,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,ir,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,nr,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Scope Canvas - Acciones (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-acciones-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,sr,7,4,"li",22),t.qZA(),t.YNc(27,rr,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,ar,4,0,"ng-container",30),t.YNc(36,cr,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,lr,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Gs,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const pr=["acc"];function ur(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let hr=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-metricas-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(pr,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,ur,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const gr=["ktAside"],fr=["ktHeaderMobile"],_r=["ktHeader"];function mr(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function vr(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function br(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function xr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function yr(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Cr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function wr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let kr=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroMetricas.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_metricas");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].scopecanvas_metrica&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].scopecanvas_metrica.id,content:this.proyecto.proyecto_recursos[n].scopecanvas_metrica.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_metricas",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-metricas")),document.querySelectorAll("app-note-metricas").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_metricas",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_metricas",this.notes_all),localStorage.setItem("notes_all_metricas",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaMetricas(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase22",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase22"),this.socketWebService.emitEventTableroSaveMetricas({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase22"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createMetricas({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.metrica_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_metricas",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateMetricas({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_metricas",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateMetricas(e),this._proyectsService.updateMetricas(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroMetricas({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroMetricas({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteMetricas(n),localStorage.setItem("notes_metricas",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteMetricas(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metricas"]],viewQuery:function(e,o){if(1&e&&(t.Gf(gr,7),t.Gf(fr,7),t.Gf(_r,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,mr,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,vr,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,br,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Scope Canvas - M\xe9tricas "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-metricas-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,xr,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,yr,4,0,"ng-container",28),t.YNc(34,Cr,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,wr,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,hr,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Or=["acc"];function Tr(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Mr=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-metricas-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Or,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Tr,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Pr=["ktAside"],Sr=["ktHeaderMobile"],Ar=["ktHeader"],Zr=["canvasRef"],Er=["tableroRef"];function Nr(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Dr(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function qr(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Fr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Ir(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Ur(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function Lr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function Jr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Hr=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this._user={},this.equipo=[],this.isLoading=!0,this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroMetricas.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_metricas_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateMetricas(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].scopecanvas_metrica&&(i.push({id:this.proyecto.proyecto_recursos[a].scopecanvas_metrica.id,content:this.proyecto.proyecto_recursos[a].scopecanvas_metrica.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].scopecanvas_metrica.position?this.proyecto.proyecto_recursos[a].scopecanvas_metrica.position:n,dragPosition:this.proyecto.proyecto_recursos[a].scopecanvas_metrica.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_metrica.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].scopecanvas_metrica.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].scopecanvas_metrica.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_metricas_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-metricas-decision")),document.querySelectorAll("app-note-metricas-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_metricas_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_metricas",this.notes_all),localStorage.setItem("notes_all_metricas",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaMetricas(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase23",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase23"),this.socketWebService.emitEventTableroSaveMetricas({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase23"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_metricas_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateMetricas({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_metricas_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateMetricas(e),this._proyectsService.updateMetricas(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroMetricas({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroMetricas({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroMetricas({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteMetricas(n),localStorage.setItem("notes_metricas_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteMetricas(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metricas-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Pr,7),t.Gf(Sr,7),t.Gf(Ar,7),t.Gf(Zr,5),t.Gf(Er,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Nr,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Dr,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,qr,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Scope Canvas - M\xe9tricas (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-metricas-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Fr,7,4,"li",22),t.qZA(),t.YNc(27,Ir,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Ur,4,0,"ng-container",30),t.YNc(36,Lr,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,Jr,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Mr,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Br=["acc"];function jr(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Wr=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-problema-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Br,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,jr,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Qr=["ktAside"],Vr=["ktHeaderMobile"],Rr=["ktHeader"];function Yr(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function zr(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Gr(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function $r(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Xr(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Kr(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function ta(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let ea=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroProblema.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_problema");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_problema&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_problema.id,content:this.proyecto.proyecto_recursos[n].leancanvas_problema.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_problema",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-problema")),document.querySelectorAll("app-note-problema").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_problema",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_problema",this.notes_all),localStorage.setItem("notes_all_problema",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaProblema(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase26",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase26"),this.socketWebService.emitEventTableroSaveProblema({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase26"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createProblema({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.problema_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_problema",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateProblema({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_problema",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateProblema(e),this._proyectsService.updateProblema(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroProblema({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroProblema({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteProblema(n),localStorage.setItem("notes_problema",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteProblema(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-problema"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Qr,7),t.Gf(Vr,7),t.Gf(Rr,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Yr,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,zr,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Gr,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Problema "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-problema-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,$r,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Xr,4,0,"ng-container",28),t.YNc(34,Kr,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,ta,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Wr,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const oa=["acc"];function ia(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let na=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-problema-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(oa,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,ia,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const sa=["ktAside"],ra=["ktHeaderMobile"],aa=["ktHeader"],ca=["canvasRef"],la=["tableroRef"];function da(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function pa(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function ua(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function ha(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function ga(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function fa(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function _a(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function ma(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let va=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroProblema.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_problema_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateProblema(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_problema&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_problema.id,content:this.proyecto.proyecto_recursos[a].leancanvas_problema.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_problema.position?this.proyecto.proyecto_recursos[a].leancanvas_problema.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_problema.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_problema.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_problema.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_problema.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_problema_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-problema-decision")),document.querySelectorAll("app-note-problema-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_problema_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_problema",this.notes_all),localStorage.setItem("notes_all_problema",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaProblema(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase27",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase27"),this.socketWebService.emitEventTableroSaveProblema({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase27"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_problema_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateProblema({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_problema_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateProblema(e),this._proyectsService.updateProblema(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroProblema({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroProblema({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroProblema({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteProblema(n),localStorage.setItem("notes_problema_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteProblema(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-problema-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(sa,7),t.Gf(ra,7),t.Gf(aa,7),t.Gf(ca,5),t.Gf(la,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,da,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,pa,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,ua,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Problema (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-problema-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,ha,7,4,"li",22),t.qZA(),t.YNc(27,ga,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,fa,4,0,"ng-container",30),t.YNc(36,_a,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,ma,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,na,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const ba=["acc"];function xa(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let ya=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-clientes-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ba,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,xa,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ca=["ktAside"],wa=["ktHeaderMobile"],ka=["ktHeader"];function Oa(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Ta(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Ma(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Pa(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Sa(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Aa(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function Za(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Ea=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroClientes.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_clientes");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_cliente&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_cliente.id,content:this.proyecto.proyecto_recursos[n].leancanvas_cliente.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_clientes",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-clientes")),document.querySelectorAll("app-note-clientes").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_clientes",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_clientes",this.notes_all),localStorage.setItem("notes_all_clientes",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaClientes(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase24",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase24"),this.socketWebService.emitEventTableroSaveClientes({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase24"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createClientes({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.cliente_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_clientes",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateClientes({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_clientes",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateClientes(e),this._proyectsService.updateClientes(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroClientes({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroClientes({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteClientes(n),localStorage.setItem("notes_clientes",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteClientes(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-clientes"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ca,7),t.Gf(wa,7),t.Gf(ka,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Oa,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Ta,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Ma,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Segmento de Clientes "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-clientes-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,Pa,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Sa,4,0,"ng-container",28),t.YNc(34,Aa,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,Za,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,ya,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Na=["acc"];function Da(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let qa=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-clientes-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Na,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Da,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Fa=["ktAside"],Ia=["ktHeaderMobile"],Ua=["ktHeader"],La=["canvasRef"],Ja=["tableroRef"];function Ha(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Ba(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function ja(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Wa(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Qa(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Va(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function Ra(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function Ya(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let za=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroClientes.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_clientes_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateClientes(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_cliente&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_cliente.id,content:this.proyecto.proyecto_recursos[a].leancanvas_cliente.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_cliente.position?this.proyecto.proyecto_recursos[a].leancanvas_cliente.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_cliente.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_cliente.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_cliente.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_cliente.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_clientes_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-clientes-decision")),document.querySelectorAll("app-note-clientes-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_clientes_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_clientes",this.notes_all),localStorage.setItem("notes_all_clientes",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaClientes(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase25",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase25"),this.socketWebService.emitEventTableroSaveClientes({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase25"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_clientes_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateClientes({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_clientes_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateClientes(e),this._proyectsService.updateClientes(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroClientes({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroClientes({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroClientes({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteClientes(n),localStorage.setItem("notes_clientes_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteClientes(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-clientes-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Fa,7),t.Gf(Ia,7),t.Gf(Ua,7),t.Gf(La,5),t.Gf(Ja,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ha,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Ba,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,ja,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Segmento de Clientes (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-clientes-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Wa,7,4,"li",22),t.qZA(),t.YNc(27,Qa,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Va,4,0,"ng-container",30),t.YNc(36,Ra,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,Ya,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,qa,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Ga=["acc"];function $a(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Xa=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-solucion-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Ga,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,$a,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ka=["ktAside"],tc=["ktHeaderMobile"],ec=["ktHeader"];function oc(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function ic(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function nc(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function sc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function rc(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function ac(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function cc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let lc=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroSolucion.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_solucion");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_solucion&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_solucion.id,content:this.proyecto.proyecto_recursos[n].leancanvas_solucion.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_solucion",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-solucion")),document.querySelectorAll("app-note-solucion").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_solucion",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_solucion",this.notes_all),localStorage.setItem("notes_all_solucion",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaSolucion(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase28",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase28"),this.socketWebService.emitEventTableroSaveSolucion({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase28"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createSolucion({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.solucion_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_solucion",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateSolucion({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_solucion",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateSolucion(e),this._proyectsService.updateSolucion(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroSolucion({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroSolucion({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteSolucion(n),localStorage.setItem("notes_solucion",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteSolucion(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-solucion"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ka,7),t.Gf(tc,7),t.Gf(ec,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,oc,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,ic,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,nc,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Soluci\xf3n "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-solucion-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,sc,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,rc,4,0,"ng-container",28),t.YNc(34,ac,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,cc,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Xa,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const dc=["acc"];function pc(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let uc=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-solucion-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(dc,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,pc,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const hc=["ktAside"],gc=["ktHeaderMobile"],fc=["ktHeader"],_c=["canvasRef"],mc=["tableroRef"];function vc(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function bc(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function xc(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function yc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Cc(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function wc(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function kc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function Oc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Tc=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroSolucion.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_solucion_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateSolucion(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_solucion&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_solucion.id,content:this.proyecto.proyecto_recursos[a].leancanvas_solucion.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_solucion.position?this.proyecto.proyecto_recursos[a].leancanvas_solucion.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_solucion.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_solucion.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_solucion.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_solucion.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_solucion_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-solucion-decision")),document.querySelectorAll("app-note-solucion-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_solucion_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_solucion",this.notes_all),localStorage.setItem("notes_all_solucion",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaSolucion(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase29",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase29"),this.socketWebService.emitEventTableroSaveSolucion({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase29"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_solucion_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateSolucion({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_solucion_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateSolucion(e),this._proyectsService.updateSolucion(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroSolucion({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroSolucion({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroSolucion({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteSolucion(n),localStorage.setItem("notes_solucion_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteSolucion(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-solucion-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(hc,7),t.Gf(gc,7),t.Gf(fc,7),t.Gf(_c,5),t.Gf(mc,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,vc,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,bc,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,xc,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Soluci\xf3n (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-solucion-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,yc,7,4,"li",22),t.qZA(),t.YNc(27,Cc,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,wc,4,0,"ng-container",30),t.YNc(36,kc,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,Oc,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,uc,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Mc=["acc"];function Pc(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Sc=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-metricas-clave-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Mc,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Pc,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ac=["ktAside"],Zc=["ktHeaderMobile"],Ec=["ktHeader"];function Nc(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Dc(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function qc(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Fc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Ic(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Uc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function Lc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Jc=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroMetricasClave.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_metricas_clave");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_metricas&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_metrica.id,content:this.proyecto.proyecto_recursos[n].leancanvas_metrica.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_metricas_clave",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-metricas_clave")),document.querySelectorAll("app-note-metricas_clave").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_metricas_clave",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_metricas_clave",this.notes_all),localStorage.setItem("notes_all_metricas_clave",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaMetricasClave(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase30",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase30"),this.socketWebService.emitEventTableroSaveMetricasClave({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase30"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createMetricasClave({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.metricas_clave_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_metricas_clave",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateMetricasClave({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_metricas_clave",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateMetricasClave(e),this._proyectsService.updateMetricasClave(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroMetricasClave({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroMetricasClave({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteMetricasClave(n),localStorage.setItem("notes_metricas_clave",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteMetricasClave(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metricas-clave"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ac,7),t.Gf(Zc,7),t.Gf(Ec,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Nc,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Dc,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,qc,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Metricas Clave "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-metricas-clave-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,Fc,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Ic,4,0,"ng-container",28),t.YNc(34,Uc,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,Lc,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Sc,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Hc=["acc"];function Bc(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let jc=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-metricas-clave-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Hc,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Bc,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Wc=["ktAside"],Qc=["ktHeaderMobile"],Vc=["ktHeader"],Rc=["canvasRef"],Yc=["tableroRef"];function zc(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Gc(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function $c(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Xc(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Kc(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function tl(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function el(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function ol(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let il=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroMetricasClave.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_metricas_clave_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateMetricasClave(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_metrica&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_metrica.id,content:this.proyecto.proyecto_recursos[a].leancanvas_metrica.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_metrica.position?this.proyecto.proyecto_recursos[a].leancanvas_metrica.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_metrica.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_metrica.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_metrica.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_metrica.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_metricas_clave_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-metricas-clave-decision")),document.querySelectorAll("app-note-metricas-clave-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_metricas_clave_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_metricas_clave",this.notes_all),localStorage.setItem("notes_all_metricas_clave",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaMetricasClave(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase31",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase31"),this.socketWebService.emitEventTableroSaveMetricasClave({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase31"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_metricas_clave_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateMetricasClave({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_metricas_clave_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateMetricasClave(e),this._proyectsService.updateMetricasClave(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroMetricasClave({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroMetricasClave({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroMetricasClave({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteMetricasClave(n),localStorage.setItem("notes_metricas_clave_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteMetricasClave(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metricas-clave-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Wc,7),t.Gf(Qc,7),t.Gf(Vc,7),t.Gf(Rc,5),t.Gf(Yc,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,zc,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Gc,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,$c,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Metricas Clave (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-metricas-clave-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Xc,7,4,"li",22),t.qZA(),t.YNc(27,Kc,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,tl,4,0,"ng-container",30),t.YNc(36,el,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,ol,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,jc,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const nl=["acc"];function sl(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let rl=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-propuesta-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(nl,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,sl,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const al=["ktAside"],cl=["ktHeaderMobile"],ll=["ktHeader"];function dl(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function pl(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function ul(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function hl(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function gl(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function fl(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function _l(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let ml=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroPropuesta.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_propuesta");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_propuestum&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_propuestum.id,content:this.proyecto.proyecto_recursos[n].leancanvas_propuestum.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_propuesta",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-propuesta")),document.querySelectorAll("app-note-propuesta").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_propuesta",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_propuesta",this.notes_all),localStorage.setItem("notes_all_propuesta",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaPropuesta(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase32",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase32"),this.socketWebService.emitEventTableroSavePropuesta({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase32"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createPropuesta({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.propuesta_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_propuesta",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdatePropuesta({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_propuesta",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdatePropuesta(e),this._proyectsService.updatePropuesta(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroPropuesta({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroPropuesta({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeletePropuesta(n),localStorage.setItem("notes_propuesta",JSON.stringify(this.notes)),i>0&&this._proyectsService.deletePropuesta(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-propuesta"]],viewQuery:function(e,o){if(1&e&&(t.Gf(al,7),t.Gf(cl,7),t.Gf(ll,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,dl,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,pl,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,ul,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Propuesta de Valor "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-propuesta-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,hl,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,gl,4,0,"ng-container",28),t.YNc(34,fl,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,_l,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,rl,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const vl=["acc"];function bl(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let xl=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-propuesta-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(vl,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,bl,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const yl=["ktAside"],Cl=["ktHeaderMobile"],wl=["ktHeader"],kl=["canvasRef"],Ol=["tableroRef"];function Tl(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Ml(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Pl(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Sl(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Al(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Zl(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function El(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function Nl(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Dl=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroPropuesta.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_propuesta_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updatePropuesta(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_propuestum&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_propuestum.id,content:this.proyecto.proyecto_recursos[a].leancanvas_propuestum.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_propuestum.position?this.proyecto.proyecto_recursos[a].leancanvas_propuestum.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_propuestum.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_propuestum.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_propuestum.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_propuestum.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_propuesta_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-propuesta-decision")),document.querySelectorAll("app-note-propuesta-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_propuesta_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_propuesta",this.notes_all),localStorage.setItem("notes_all_propuesta",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaPropuesta(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase33",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase33"),this.socketWebService.emitEventTableroSavePropuesta({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase33"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_propuesta_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdatePropuesta({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_propuesta_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdatePropuesta(e),this._proyectsService.updatePropuesta(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroPropuesta({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroPropuesta({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroPropuesta({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeletePropuesta(n),localStorage.setItem("notes_propuesta_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deletePropuesta(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-propuesta-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(yl,7),t.Gf(Cl,7),t.Gf(wl,7),t.Gf(kl,5),t.Gf(Ol,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Tl,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Ml,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Pl,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Propuesta de Valor (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-propuesta-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Sl,7,4,"li",22),t.qZA(),t.YNc(27,Al,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Zl,4,0,"ng-container",30),t.YNc(36,El,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,Nl,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,xl,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const ql=["acc"];function Fl(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Il=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-ventajas-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ql,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Fl,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ul=["ktAside"],Ll=["ktHeaderMobile"],Jl=["ktHeader"];function Hl(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Bl(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function jl(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Wl(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Ql(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Vl(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function Rl(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Yl=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroVentajas.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_ventajas");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_ventaja&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_ventaja.id,content:this.proyecto.proyecto_recursos[n].leancanvas_ventaja.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_ventajas",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-ventajas")),document.querySelectorAll("app-note-ventajas").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_ventajas",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_ventajas",this.notes_all),localStorage.setItem("notes_all_ventajas",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaVentajas(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase34",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase34"),this.socketWebService.emitEventTableroSaveVentajas({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase34"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createVentajas({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.ventajas_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_ventajas",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateVentajas({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_ventajas",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateVentajas(e),this._proyectsService.updateVentajas(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroVentajas({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroVentajas({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteVentajas(n),localStorage.setItem("notes_ventajas",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteVentajas(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-ventajas"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ul,7),t.Gf(Ll,7),t.Gf(Jl,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Hl,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Bl,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,jl,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Ventajas Especiales "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-ventajas-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,Wl,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Ql,4,0,"ng-container",28),t.YNc(34,Vl,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,Rl,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Il,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const zl=["acc"];function Gl(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let $l=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-ventajas-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(zl,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Gl,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Xl=["ktAside"],Kl=["ktHeaderMobile"],td=["ktHeader"],ed=["canvasRef"],od=["tableroRef"];function id(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function nd(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function sd(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function rd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function ad(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function cd(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function ld(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function dd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let pd=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroVentajas.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_ventajas_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateVentajas(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_ventaja&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_ventaja.id,content:this.proyecto.proyecto_recursos[a].leancanvas_ventaja.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_ventaja.position?this.proyecto.proyecto_recursos[a].leancanvas_ventaja.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_ventaja.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_ventaja.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_ventaja.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_ventaja.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_ventajas_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-ventajas-decision")),document.querySelectorAll("app-note-ventajas-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_ventajas_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_ventajas",this.notes_all),localStorage.setItem("notes_all_ventajas",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaVentajas(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase35",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase35"),this.socketWebService.emitEventTableroSaveVentajas({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase35"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_ventajas_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateVentajas({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_ventajas_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateVentajas(e),this._proyectsService.updateVentajas(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroVentajas({tablero:JSON.stringify(this.notes_all)})}writeBoard(){console.log("writeBoard",this.notes_all),this.socketWebService.emitEventTableroVentajas({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroVentajas({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteVentajas(n),localStorage.setItem("notes_ventajas_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteVentajas(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-ventajas-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Xl,7),t.Gf(Kl,7),t.Gf(td,7),t.Gf(ed,5),t.Gf(od,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,id,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,nd,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,sd,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Ventajas Especiales (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-ventajas-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,rd,7,4,"li",22),t.qZA(),t.YNc(27,ad,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,cd,4,0,"ng-container",30),t.YNc(36,ld,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,dd,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,$l,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const ud=["acc"];function hd(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let gd=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-canales-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ud,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,hd,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const fd=["ktAside"],_d=["ktHeaderMobile"],md=["ktHeader"];function vd(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function bd(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function xd(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function yd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Cd(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function wd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function kd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Od=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroCanales.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_canales");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_canale&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_canale.id,content:this.proyecto.proyecto_recursos[n].leancanvas_canale.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_canales",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-canales")),document.querySelectorAll("app-note-canales").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_canales",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_canales",this.notes_all),localStorage.setItem("notes_all_canales",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaCanales(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase36",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase36"),this.socketWebService.emitEventTableroSaveCanales({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase36"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createCanales({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.canales_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_canales",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateCanales({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_canales",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateCanales(e),this._proyectsService.updateCanales(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroCanales({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroCanales({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteCanales(n),localStorage.setItem("notes_canales",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteCanales(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-canales"]],viewQuery:function(e,o){if(1&e&&(t.Gf(fd,7),t.Gf(_d,7),t.Gf(md,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,vd,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,bd,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,xd,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Canales "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-canales-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,yd,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Cd,4,0,"ng-container",28),t.YNc(34,wd,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,kd,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,gd,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Td=["acc"];function Md(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Pd=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-canales-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Td,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Md,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Sd=["ktAside"],Ad=["ktHeaderMobile"],Zd=["ktHeader"],Ed=["canvasRef"],Nd=["tableroRef"];function Dd(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function qd(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Fd(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Id(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Ud(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Ld(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function Jd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function Hd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Bd=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroCanales.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_canales_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateCanales(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_canale&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_canale.id,content:this.proyecto.proyecto_recursos[a].leancanvas_canale.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_canale.position?this.proyecto.proyecto_recursos[a].leancanvas_canale.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_canale.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_canale.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_canale.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_canale.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_canales_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-canales-decision")),document.querySelectorAll("app-note-canales-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_canales_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_canales",this.notes_all),localStorage.setItem("notes_all_canales",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaCanales(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase37",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase37"),this.socketWebService.emitEventTableroSaveCanales({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase37"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_canales_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateCanales({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_canales_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateCanales(e),this._proyectsService.updateCanales(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroCanales({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroCanales({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroCanales({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteCanales(n),localStorage.setItem("notes_canales_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteCanales(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-canales-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Sd,7),t.Gf(Ad,7),t.Gf(Zd,7),t.Gf(Ed,5),t.Gf(Nd,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Dd,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,qd,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Fd,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Canales (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-canales-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Id,7,4,"li",22),t.qZA(),t.YNc(27,Ud,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Ld,4,0,"ng-container",30),t.YNc(36,Jd,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,Hd,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Pd,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const jd=["acc"];function Wd(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Qd=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-estructura-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(jd,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,Wd,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Vd=["ktAside"],Rd=["ktHeaderMobile"],Yd=["ktHeader"];function zd(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Gd(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function $d(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Xd(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Kd(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function tp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function ep(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let op=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroEstructura.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_estructura");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_estructura&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_estructura.id,content:this.proyecto.proyecto_recursos[n].leancanvas_estructura.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_estructura",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-estructura")),document.querySelectorAll("app-note-estructura").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_estructura",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_estructura",this.notes_all),localStorage.setItem("notes_all_estructura",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaEstructura(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase38",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase38"),this.socketWebService.emitEventTableroSaveEstructura({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase38"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createEstructura({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.estructura_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_estructura",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateEstructura({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_estructura",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateEstructura(e),this._proyectsService.updateEstructura(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroEstructura({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroEstructura({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteEstructura(n),localStorage.setItem("notes_estructura",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteEstructura(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-estructura"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Vd,7),t.Gf(Rd,7),t.Gf(Yd,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,zd,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Gd,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,$d,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Estructura de Costos "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-estructura-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,Xd,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Kd,4,0,"ng-container",28),t.YNc(34,tp,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,ep,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Qd,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const ip=["acc"];function np(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let sp=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-estructura-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ip,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,np,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const rp=["ktAside"],ap=["ktHeaderMobile"],cp=["ktHeader"],lp=["canvasRef"],dp=["tableroRef"];function pp(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function up(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function hp(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function gp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function fp(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function _p(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function mp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function vp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let bp=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroEstructura.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_estructura_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateEstructura(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_estructura&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_estructura.id,content:this.proyecto.proyecto_recursos[a].leancanvas_estructura.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_estructura.position?this.proyecto.proyecto_recursos[a].leancanvas_estructura.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_estructura.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_estructura.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_estructura.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_estructura.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_estructura_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-estructura-decision")),document.querySelectorAll("app-note-estructura-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_estructura_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_estructura",this.notes_all),localStorage.setItem("notes_all_estructura",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaEstructura(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase39",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase39"),this.socketWebService.emitEventTableroSaveEstructura({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase39"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_estructura_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateEstructura({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_estructura_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateEstructura(e),this._proyectsService.updateEstructura(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroEstructura({tablero:JSON.stringify(this.notes_all)})}writeBoard(){console.log("writeBoard",this.notes_all),this.socketWebService.emitEventTableroEstructura({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroEstructura({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteEstructura(n),localStorage.setItem("notes_estructura_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteEstructura(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-estructura-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(rp,7),t.Gf(ap,7),t.Gf(cp,7),t.Gf(lp,5),t.Gf(dp,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,pp,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,up,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,hp,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Estructura de Costos (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-estructura-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,gp,7,4,"li",22),t.qZA(),t.YNc(27,fp,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,_p,4,0,"ng-container",30),t.YNc(36,mp,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,vp,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,sp,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const xp=["acc"];function yp(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Cp=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-flujo-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(xp,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,yp,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const wp=["ktAside"],kp=["ktHeaderMobile"],Op=["ktHeader"];function Tp(s,l){if(1&s&&t._UZ(0,"app-loadmask",38),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function Mp(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",39)(2,"span",40),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Pp(s,l){if(1&s&&t._UZ(0,"app-timer",41),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Sp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",45),t._UZ(4,"path",46),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",47),t.NdJ("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit;t.s9C("id",e.id),t.xp6(6),t.Oqu(e.content)}}function Ap(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",49),t._UZ(3,"path",50),t.qZA()(),t.BQk()}}function Zp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",49),t._UZ(2,"path",51),t.qZA()()}}function Ep(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Np=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEvenTableroFlujo.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this.usuario.active=!0;const G=localStorage.getItem("notes_flujo");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(n=>n.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let n=this.proyecto.tiempo.split(":");this.hr=n[0],this.min=n[1]}this.showTimer=!0;let i=[];for(let n in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[n].leancanvas_flujo&&this.proyecto.proyecto_recursos[n].usuario_id==this.usuario.id&&i.push({id:this.proyecto.proyecto_recursos[n].leancanvas_flujo.id,content:this.proyecto.proyecto_recursos[n].leancanvas_flujo.contenido,usuario_id:this.proyecto.proyecto_recursos[n].usuario_id});this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_flujo",i),this.notes_all=i}updateAllNotes(){console.log(document.querySelectorAll("app-note-flujo")),document.querySelectorAll("app-note-flujo").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_flujo",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_flujo",this.notes_all),localStorage.setItem("notes_all_flujo",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaFlujo(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase40",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase40"),this.socketWebService.emitEventTableroSaveFlujo({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase40"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){""==e.target.value.trim()?_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}}):this._proyectsService.createFlujo({proyecto_id:this.proyecto_id,usuario_id:this.usuario.id,content:e.target.value}).subscribe(i=>{const n=i.flujo_id;this.notes.push({id:n,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((a,v)=>v.id-a.id),localStorage.setItem("notes_flujo",JSON.stringify(this.notes)),this.ref.detectChanges(),this.socketWebService.emitEventTableroUpdateFlujo({id:n,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()},i=>{})}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_flujo",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateFlujo(e),this._proyectsService.updateFlujo(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroFlujo({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroFlujo({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteFlujo(n),localStorage.setItem("notes_flujo",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteFlujo(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-flujo"]],viewQuery:function(e,o){if(1&e&&(t.Gf(wp,7),t.Gf(kp,7),t.Gf(Op,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first)}},decls:45,vars:10,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[3,"id",4,"ngFor","ngForOf"],[1,"toolbar-notas",2,"z-index","auto"],["placeholder","Agregar Nota","name","nota","id","agregar_nota",1,"form-control","form-control-lg","form-control-solid",2,"height","100%",3,"keyup.enter"],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],[3,"id"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",3,"blur"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Tp,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,Mp,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Pp,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Flujo de Ingresos "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-flujo-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul"),t.YNc(25,Sp,7,2,"li",20),t.qZA(),t.TgZ(26,"div",21)(27,"textarea",22),t.NdJ("keyup.enter",function(n){return o.addNote(n)}),t.qZA()()(),t._UZ(28,"div",23),t.TgZ(29,"div",24),t._UZ(30,"video",25),t.qZA(),t.TgZ(31,"div",26)(32,"div",27),t.YNc(33,Ap,4,0,"ng-container",28),t.YNc(34,Zp,3,0,"ng-template",null,29,t.W1O),t.qZA(),t.TgZ(36,"div",30),t.YNc(37,Ep,2,0,"a",31),t.TgZ(38,"a",32),t._uU(39,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(40,"div",33)(41,"span",34),t.O4$(),t.TgZ(42,"svg",35),t._UZ(43,"rect",36)(44,"path",37),t.qZA()()()()),2&e){const i=t.MAs(35);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(13),t.Q6J("ngForOf",o.notes),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Cp,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar-notas[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})();const Dp=["acc"];function qp(s,l){1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2," Instrucci\xf3n 1 "),t.qZA(),t.TgZ(3,"li"),t._uU(4," Instrucci\xf3n 2 "),t.qZA(),t.TgZ(5,"li"),t._uU(6," Instrucci\xf3n 3 "),t.qZA(),t.TgZ(7,"li"),t._uU(8," Instrucci\xf3n 4 "),t.qZA()())}let Fp=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-entender-flujo-decision-accordion"]],viewQuery:function(e,o){if(1&e&&t.Gf(Dp,5),2&e){let i;t.iGM(i=t.CRH())&&(o.accordion=i.first)}},decls:4,vars:0,consts:[["acc","ngbAccordion"],["title","Instrucciones"],["ngbPanelContent",""]],template:function(e,o){1&e&&(t.TgZ(0,"ngb-accordion",null,0)(2,"ngb-panel",1),t.YNc(3,qp,9,0,"ng-template",2),t.qZA()())},directives:[p.gY,p.Gk,p.gW],styles:[""]}),s})();const Ip=["ktAside"],Up=["ktHeaderMobile"],Lp=["ktHeader"],Jp=["canvasRef"],Hp=["tableroRef"];function Bp(s,l){if(1&s&&t._UZ(0,"app-loadmask",40),2&s){const e=t.oxw();t.Q6J("loader",e.isLoading)}}function jp(s,l){if(1&s&&(t.ynx(0),t.TgZ(1,"div",41)(2,"span",42),t._uU(3),t.qZA()(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.s9C("title",e.nombre),t.xp6(1),t.Q6J("ngClass",e.active?"symbol-label bg-primary text-inverse-primary fw-bold":"symbol-label bg-gray text-inverse-gray fw-bold"),t.xp6(1),t.Oqu(e.nombre.substring(0,1).toUpperCase())}}function Wp(s,l){if(1&s&&t._UZ(0,"app-timer",43),2&s){const e=t.oxw();t.Q6J("hr",e.hr)("min",e.min)("sec",e.sec)("ms",e.ms)("proyecto_id",e.proyecto_id)("rol",e.rol)}}function Qp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"li",44),t.NdJ("cdkDragMoved",function(i){const a=t.CHM(e).index;return t.oxw().onDragMove(i,0,a)})("cdkDragEnded",function(i){const a=t.CHM(e).index;return t.oxw().onDragEnded(i,0,a)}),t.TgZ(1,"div",45)(2,"span",46),t.NdJ("click",function(i){const a=t.CHM(e).$implicit;return t.oxw().deleteNote(i,a.id)}),t.O4$(),t.TgZ(3,"svg",47),t._UZ(4,"path",48),t.qZA()()(),t.kcU(),t.TgZ(5,"h2",49),t.NdJ("mousedown",function(i){return i.stopPropagation()})("blur",function(i){return t.CHM(e),t.oxw().saveNote(i)}),t._uU(6),t.qZA()()}if(2&s){const e=l.$implicit,o=l.index,i=t.oxw();t.s9C("id",e.id),t.Q6J("cdkDragData",e)("cdkDragFreeDragPosition",i.dragPosition[o]),t.xp6(6),t.Oqu(e.content)}}function Vp(s,l){if(1&s&&(t.ynx(0),t._UZ(1,"img",50),t.TgZ(2,"label",51),t._uU(3),t.qZA(),t.BQk()),2&s){const e=l.$implicit;t.xp6(1),t.MGl("id","puntero-",e,""),t.xp6(1),t.MGl("id","equipo-",e,""),t.xp6(1),t.Oqu(e)}}function Rp(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(2,"svg",53),t._UZ(3,"path",54),t.qZA()(),t.BQk()}}function Yp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPlayPause()}),t.O4$(),t.TgZ(1,"svg",53),t._UZ(2,"path",55),t.qZA()()}}function zp(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveNoteAll()}),t._uU(1,"Siguiente Etapa"),t.qZA()}}let Gp=(()=>{class s{constructor(e,o,i,n,a,v,U){this.el=e,this.socketWebService=o,this._proyectsService=i,this.ref=n,this.modalService=a,this._router=v,this.route=U,this.selfLayout="default",this.contentClasses="",this.contentContainerClasses="",this.toolbarDisplay=!0,this.asideHTMLAttributes={},this.headerMobileClasses="",this.headerMobileAttributes={},this.headerHTMLAttributes={},this.extrasSearchOffcanvasDisplay=!1,this.extrasNotificationsOffcanvasDisplay=!1,this.extrasQuickActionsOffcanvasDisplay=!1,this.extrasCartOffcanvasDisplay=!1,this.extrasUserOffcanvasDisplay=!1,this.extrasQuickPanelDisplay=!1,this.extrasScrollTopDisplay=!1,this.showVideoFlag=!0,this.showTimer=!1,this.videoOn="videoOn",this.videoOff="videoOff",this.currentTime=0,this.primerEventoFlag=!1,this.segundoEventoFlag=!1,this.playing=!1,this.usuarios=[],this.usuarios_active=[],this.usuario={},this.notes=[],this.notes_all=[],this.notes_cache=[],this.proyecto={},this.rol="",this.ms="00",this.sec="00",this.min="00",this.hr="00",this.isLoading=!0,this._user={},this.equipo=[],this.width=50,this.height=50,this.points=[],this.style=null,this.offset={x:0,y:0},this.dragPosition=[],this.isAvailabe=!1,this.onMouseMove=m=>{this.write(m)},this.onClick=m=>{"canvasId"===m.target.id&&(this.isAvailabe=!this.isAvailabe)},this.clearZone=()=>{this.points=[],this.cx.clearRect(0,0,this.width,this.height)},this.socketWebService.outEvenUsersActive.subscribe(m=>{const{usuarios_active:Z}=m;this.readUsersActive(Z,!1)}),this.socketWebService.outEven2.subscribe(m=>{const{prevPost:Z}=m;let K=Z.usuario.split(" ")[0].replace("-","");K=K.replace(".",""),K=K.replace("@",""),-1==this.equipo.findIndex(jt=>jt==K)&&this.equipo.push(K),this.ref.detectChanges(),jQuery("#puntero-"+K).css({left:Z.x,top:Z.y,display:"block"}),jQuery("#equipo-"+K).css({left:Z.x+30,top:Z.y,display:"block"}),this.writeSingle(Z,!1)}),this.socketWebService.outEvenTableroFlujo.subscribe(m=>{const{tablero:Z}=m;this.readBoard(Z,!1)}),this.socketWebService.outEvenContinue.subscribe(m=>{this.continue()}),this.socketWebService.outEvenEtapaActive.subscribe(m=>{this.etapa_active(m)});const R=localStorage.getItem("usuario");let H=JSON.parse(R);this.usuario=H,this._user=H,this.usuario.active=!0;const G=localStorage.getItem("notes_flujo_decision");this.notes_cache=JSON.parse(G)||[];const{webkitSpeechRecognition:lt}=window;this.recognition=new lt,this.recognition.onresult=m=>{console.log(this.el.nativeElement.querySelectorAll(".content")[0]),this.el.nativeElement.querySelectorAll(".content")[0].innerText=m.results[0][0].transcript}}drop(e){e.previousContainer===e.container?(0,ut.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,ut.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.writeBoard()}onDragMove(e,o,i){document.getElementsByClassName("cdk-drag-preview")}onDragEnded(e,o,i){this.dragPosition[i]={x:this.dragPosition[i].x+e.distance.x,y:this.dragPosition[i].y+e.distance.y},this.notes[i].position=i,this.notes[i].dragPosition=this.dragPosition[i],this.notes_all=this.notes,this._proyectsService.updateFlujo(this.notes[i].id,{position:this.notes[i].position,dragPosition:this.notes[i].dragPosition}).subscribe(U=>{},U=>{}),this.writeBoard()}ngOnInit(){this.route.params.subscribe(e=>{this.proyecto_id=e.id,this.getProyect()}),this.socketWebService.ioSocket.connect(),this.socketWebService.emitLogin(this.proyecto_id)}ngAfterViewInit(){if(this.ktHeader)for(const o in this.headerHTMLAttributes)this.headerHTMLAttributes.hasOwnProperty(o)&&(this.ktHeader.nativeElement.attributes[o]=this.headerHTMLAttributes[o]);const e=this.usuarios_active.findIndex(o=>o.id==this.usuario.id);-1!=e&&this.usuarios_active.splice(e,1),this.usuarios_active.push({id:this.usuario.id,nombre:this.usuario.nombre,active:!0}),console.log("enviando_usuario",this.usuario),this.socketWebService.emitEventUsersActive(this.usuario),this.ref.detectChanges()}ngOnDestroy(){console.log("ngdestroy"),this.socketWebService.emitEventUsersInactive(this.usuario),this.socketWebService.ioSocket.disconnect(),window.removeEventListener("scroll",this.disableScroll)}getProyect(){this._proyectsService.get(this.proyecto_id).subscribe(e=>{this.proyecto=e,this.usuarios=this.proyecto.proyecto_equipo.equipo_usuarios;let o=this.usuarios.filter(a=>a.usuario_id==this.usuario.id);if(this.rol=o[0].rol,""!=this.proyecto.tiempo&&null!=this.proyecto.tiempo){let a=this.proyecto.tiempo.split(":");this.hr=a[0],this.min=a[1]}this.showTimer=!0;let i=[],n=0;for(let a in this.proyecto.proyecto_recursos)null!=this.proyecto.proyecto_recursos[a].leancanvas_flujo&&(i.push({id:this.proyecto.proyecto_recursos[a].leancanvas_flujo.id,content:this.proyecto.proyecto_recursos[a].leancanvas_flujo.contenido,usuario_id:this.proyecto.proyecto_recursos[a].usuario_id,position:this.proyecto.proyecto_recursos[a].leancanvas_flujo.position?this.proyecto.proyecto_recursos[a].leancanvas_flujo.position:n,dragPosition:this.proyecto.proyecto_recursos[a].leancanvas_flujo.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_flujo.dragPosition):{x:0,y:0}}),this.dragPosition.push(this.proyecto.proyecto_recursos[a].leancanvas_flujo.dragPosition?JSON.parse(this.proyecto.proyecto_recursos[a].leancanvas_flujo.dragPosition):{x:0,y:0}),n+=1);this.notes=i,this.notes.length>0&&this.sendNotes(this.notes),this.isLoading=!1,this.onPlayPause(),this.ref.detectChanges()},e=>{})}readUsersActive(e,o){const i=JSON.parse(e);console.log("recibe_usuarios",i),this.usuarios_active=i,this.ref.detectChanges()}readBoard(e,o){const i=JSON.parse(e);console.log("notas_all_flujo_decision",i),this.notes_all=i,this.notes=i;for(let n in i)this.dragPosition[i[n].position]=i[n].dragPosition;this.ref.detectChanges()}render(){const e=this.canvasRef.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,this.cx.lineWidth=3,this.cx.lineCap="round",this.cx.strokeStyle="#000"}write(e){const i=this.tableroRef.nativeElement.getBoundingClientRect();let a=this._user.nombre.split(" ")[0].replace("-","");a=a.replace(".",""),a=a.replace("@",""),this.writeSingle({x:e.clientX-i.left,y:e.clientY-i.top,usuario:a})}writeSingle(e,o=!0){this.points.push(e),o&&this.socketWebService.emitEvent2({prevPost:this.points[this.points.length-1]})}drawOnCanvas(e,o){!this.cx||(this.cx.beginPath(),e&&(this.points=[],this.cx.clearRect(0,0,this.width,this.height),this.cx.moveTo(e.x,e.y),this.cx.lineTo(o.x,o.y),this.cx.stroke()))}updateAllNotes(){console.log(document.querySelectorAll("app-note-flujo-decision")),document.querySelectorAll("app-note-flujo-decision").forEach((o,i)=>{this.notes[o.id].content=o.querySelector(".content").innerHTML}),localStorage.setItem("notes_flujo_decision",JSON.stringify(this.notes))}saveNoteAll(){console.log("save_notes_all_flujo",this.notes_all),localStorage.setItem("notes_all_flujo",JSON.stringify(this.notes_all));let e=[],o=[];for(let n in this.notes_all)e.push({content:this.notes_all[n].content});o.push({title:"Como podriamos",data:e}),this._proyectsService.updateEtapaFlujo(this.proyecto_id,{etapa_activa:"/proyect-init/"+this.proyecto_id+"/fase41",tablero:this.notes_all,type:"notas"}).subscribe(n=>{this.socketWebService.emitEventSetEtapa("/proyect-init/"+this.proyecto_id+"/fase41"),this.socketWebService.emitEventTableroSaveFlujo({tablero:JSON.stringify(o)})},n=>{})}continue(){this._router.navigate(["/proyect-init/"+this.proyecto_id+"/fase41"])}etapa_active(e){""!=e&&this._router.navigate([e])}addNote(e){this.notes.push({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),this.notes=this.notes.sort((o,i)=>i.id-o.id),localStorage.setItem("notes_flujo_decision",JSON.stringify(this.notes)),this.socketWebService.emitEventTableroUpdateFlujo({id:this.notes.length+"-"+this.usuario.nombre,content:e.target.value,usuario_id:this.usuario.id}),g("#agregar_nota").val(""),g("#agregar_nota").text(""),g("#agregar_nota").focus()}saveNote(e){if(""==e.target.innerText.trim())_().fire({text:"Ups, la nota no puede estar vacia.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok!",customClass:{confirmButton:"btn btn-primary"}});else{const o=e.srcElement.parentElement.getAttribute("id"),i=e.target.innerText;e.target.innerText=i;const n={id:o,content:i,usuario_id:this.usuario.id};console.log("json",n),this.updateNote(n),localStorage.setItem("notes_flujo_decision",JSON.stringify(this.notes)),console.log("********* updating note *********")}}updateNote(e){this.notes.forEach((o,i)=>{o.id==e.id&&(this.notes[i].content=e.content,this.socketWebService.emitEventTableroUpdateFlujo(e),this._proyectsService.updateFlujo(e.id,e).subscribe(n=>{},n=>{}))})}updateNoteAll(e){let o=0;this.notes_all.forEach((i,n)=>{i.id==e.id&&(o=1,this.notes_all[n].content=e.content)}),0==o&&this.notes_all.push({id:e.id,content:e.content}),this.socketWebService.emitEventTableroFlujo({tablero:JSON.stringify(this.notes_all)})}writeBoard(){this.socketWebService.emitEventTableroFlujo({tablero:JSON.stringify(this.notes_all)})}sendNotes(e){this.socketWebService.emitEventTableroFlujo({tablero:JSON.stringify(e)})}deleteNote(e,o){e.preventDefault();const i=o;this.notes.forEach((n,a)=>{if(console.log("nota",n),n.id==i)return this.notes.splice(a,1),this.socketWebService.emitEventTableroDeleteFlujo(n),localStorage.setItem("notes_flujo_decision",JSON.stringify(this.notes)),i>0&&this._proyectsService.deleteFlujo(i).subscribe(v=>{},v=>{}),void console.log("********* deleting note *********")})}record(e){this.recognition.start(),this.addNote()}onPlayPause(){if(this.playing=!0,g("#myVideo").prop("paused")){if(window.scrollTo(0,0),window.addEventListener("scroll",this.disableScroll),console.log("Play"),this.displayVideo(),this.ref.detectChanges(),g("#myVideo").trigger("play"),this.primerEventoFlag)var e=setInterval(()=>{this.currentTime=g("#myVideo").prop("this.currentTime"),console.log(this.currentTime),this.currentTime>=3&&(this.hideVideo(),g("#myVideo").trigger("pause"),this.ref.detectChanges(),clearInterval(e))},500)}else this.playing=!1,console.log("Pause"),this.hideVideo(),this.ref.detectChanges(),g("#myVideo").trigger("pause"),window.removeEventListener("scroll",this.disableScroll)}disableScroll(){window.scrollTo(0,0)}displayVideo(){this.showVideoFlag=!0}hideVideo(){this.showVideoFlag=!1,g("#agregar_nota").focus()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.SBq),t.Y36(st),t.Y36(j.a),t.Y36(t.sBO),t.Y36(p.FF),t.Y36(M.F0),t.Y36(M.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-flujo-decision"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ip,7),t.Gf(Up,7),t.Gf(Lp,7),t.Gf(Jp,5),t.Gf(Hp,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.ktAside=i.first),t.iGM(i=t.CRH())&&(o.ktHeaderMobile=i.first),t.iGM(i=t.CRH())&&(o.ktHeader=i.first),t.iGM(i=t.CRH())&&(o.canvasRef=i.first),t.iGM(i=t.CRH())&&(o.tableroRef=i.first)}},hostBindings:function(e,o){1&e&&t.NdJ("mousemove",function(n){return o.onMouseMove(n)},!1,t.evT)("click",function(n){return o.onClick(n)})},decls:47,vars:11,consts:[[1,"",2,"background-color","#070d15 !important","overflow","auto","height","100%"],[3,"loader",4,"ngIf"],["id","home",1,"mb-0"],[1,"bgi-no-repeat","bgi-size-contain","bgi-position-x-center","bgi-position-y-bottom","landing-dark-bg",2,"background-image","url(assets/media/svg/illustrations/landing.svg)"],["data-kt-sticky","true","data-kt-sticky-name","landing-header","data-kt-sticky-offset","{default: '200px', lg: '300px'}",1,"landing-header"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","flex-equal"],[1,"container","symbol-group","symbol-hover","mb-3"],[4,"ngFor","ngForOf"],[1,"mb-3"],[3,"hr","min","sec","ms","proyecto_id","rol",4,"ngIf"],["id","kt_header_nav_wrapper",1,"d-lg-block"],["data-kt-drawer","true","data-kt-drawer-name","landing-menu","data-kt-drawer-activate","{default: true, lg: false}","data-kt-drawer-overlay","true","data-kt-drawer-width","200px","data-kt-drawer-direction","start","data-kt-drawer-toggle","#kt_landing_menu_toggle","data-kt-swapper","true","data-kt-swapper-mode","prepend","data-kt-swapper-parent","{default: '#kt_body', lg: '#kt_header_nav_wrapper'}",1,"d-lg-block","p-5","p-lg-0"],[1,"landing-curve","landing-dark-color","mb-3","mb-lg-3"],["viewBox","15 12 1470 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M0 11C3.93573 11.3356 7.85984 11.6689 11.7725 12H1488.16C1492.1 11.6689 1496.04 11.3356 1500 11V12H1488.16C913.668 60.3476 586.282 60.6117 11.7725 12H0V11Z","fill","currentColor"],[1,"container","title-container"],[1,"container","instructions-container"],[1,"container","tablero-container"],[1,"ul-container"],["tableroRef",""],["style","cursor: pointer;","cdkDragBoundary",".tablero-container","cdkDrag","",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],["id","canvasId","width","100","height","100"],["canvasRef",""],[1,"fondo-video",3,"ngClass"],[1,"video-container"],["controls","","id","myVideo","src","http://res.cloudinary.com/tresideambipi/video/upload/v1659722491/videos/video_test_clgg4o.mp4","width","1200","height","auto",3,"ngClass"],[2,"background-color","#03A588","position","fixed","bottom","0px","width","100%","height","80px"],[1,"container",2,"text-align","center"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"container",2,"align-items","flex-end"],["class","btn btn-success","style","margin: -15px 10px 0px 10px;\n      float: right;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","-15px 10px 0px 10px","float","right",3,"routerLink"],["id","kt_scrolltop","data-kt-scrolltop","true",1,"scrolltop"],[1,"svg-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","13","y","6","width","13","height","2","rx","1","transform","rotate(90 13 6)","fill","currentColor"],["d","M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z","fill","currentColor"],[3,"loader"],["data-bs-toggle","tooltip",1,"symbol","symbol-35px","symbol-circle",3,"title"],[3,"ngClass"],[3,"hr","min","sec","ms","proyecto_id","rol"],["cdkDragBoundary",".tablero-container","cdkDrag","",2,"cursor","pointer",3,"id","cdkDragData","cdkDragFreeDragPosition","cdkDragMoved","cdkDragEnded"],[1,"note_toolbar"],[1,"close","material-icons",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["contenteditable","",1,"caja-nota",2,"cursor","auto",3,"mousedown","blur"],["src","assets/images/puntero.png",2,"position","absolute","width","30px","height","30px","display","none",3,"id"],[2,"position","absolute","width","100px","height","100px","display","none","color","rgb(3, 165, 136)","font-weight","bold",3,"id"],[1,"btn","btn-lg","flex-shrink-0","my-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","56","height","56","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill",2,"margin","-46px","margin-left","10px","position","absolute","background-color","#03A588","border-radius","100%","color","white"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],[1,"btn","btn-success",2,"margin","-15px 10px 0px 10px","float","right",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Bp,1,1,"app-loadmask",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.YNc(9,jp,4,3,"ng-container",9),t.qZA(),t.TgZ(10,"div",10)(11,"div"),t.YNc(12,Wp,1,6,"app-timer",11),t.qZA()()(),t.TgZ(13,"div",12),t._UZ(14,"div",13),t.qZA()()()()(),t.TgZ(15,"div",14),t.O4$(),t.TgZ(16,"svg",15),t._UZ(17,"path",16),t.qZA()()(),t.kcU(),t.TgZ(18,"div",17)(19,"h1"),t._uU(20," Lean Canvas - Flujo de Ingresos (Decisi\xf3n) "),t.qZA()(),t.TgZ(21,"div",18),t._UZ(22,"app-entender-flujo-decision-accordion"),t.qZA(),t.TgZ(23,"div",19)(24,"ul",20,21),t.YNc(26,Qp,7,4,"li",22),t.qZA(),t.YNc(27,Vp,4,3,"ng-container",9),t._UZ(28,"canvas",23,24),t.qZA(),t._UZ(30,"div",25),t.TgZ(31,"div",26),t._UZ(32,"video",27),t.qZA(),t.TgZ(33,"div",28)(34,"div",29),t.YNc(35,Rp,4,0,"ng-container",30),t.YNc(36,Yp,3,0,"ng-template",null,31,t.W1O),t.qZA(),t.TgZ(38,"div",32),t.YNc(39,zp,2,0,"a",33),t.TgZ(40,"a",34),t._uU(41,"Salir de MbipiLab"),t.qZA()()(),t.TgZ(42,"div",35)(43,"span",36),t.O4$(),t.TgZ(44,"svg",37),t._UZ(45,"rect",38)(46,"path",39),t.qZA()()()()),2&e){const i=t.MAs(37);t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(8),t.Q6J("ngForOf",o.usuarios_active),t.xp6(3),t.Q6J("ngIf",o.showTimer),t.xp6(14),t.Q6J("ngForOf",o.notes),t.xp6(1),t.Q6J("ngForOf",o.equipo),t.xp6(3),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(2),t.Q6J("ngClass",o.showVideoFlag?o.videoOn:o.videoOff),t.xp6(3),t.Q6J("ngIf",!o.playing)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","Decisor"==o.rol),t.xp6(1),t.MGl("routerLink","/dashboard-project/",o.proyecto_id,"")}},directives:[T.O5,X,T.sg,T.mk,ot,Fp,ut.Zt,M.yS],styles:['@charset "UTF-8";.fondo-video[_ngcontent-%COMP%]{background-color:#000;height:1125px;width:100%;position:absolute;margin:-1125px 0 0;opacity:.9}.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-930px 0 0}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 0 10px 3px #fff}.caja-nota[_ngcontent-%COMP%]{outline:none;overflow:auto;min-height:4em;max-height:4em}  .caja-nota::-webkit-scrollbar{width:8px!important;height:8px!important}  .caja-nota::-webkit-scrollbar-thumb{background:var(--custom-color)!important;border-radius:4px}  .caja-nota::-webkit-scrollbar-thumb:active{background-color:#999}  .caja-nota::-webkit-scrollbar-thumb:hover{background:#000!important;box-shadow:0 0 2px 1px #0003}  .caja-nota::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}  .caja-nota::-webkit-scrollbar-track:hover,   .caja-nota::-webkit-scrollbar-track:active{background:#d4d4d4}.tablero-container[_ngcontent-%COMP%]{min-width:100%;min-height:520px;overflow:auto;background-color:#232323;position:relative;padding:20px 20px 40px;margin:0 0 100px}.tablero-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:absolute!important}.tablero-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:-40px}.instructions-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]{width:100%;text-align:start;padding:10px;margin-bottom:20px}.title-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:1320px;text-align:start;color:#fff}[_nghost-%COMP%]{height:100%;margin:0}[_nghost-%COMP%]   .flex-root[_ngcontent-%COMP%]{height:100%}.page-loaded[_ngcontent-%COMP%]   app-layout[_ngcontent-%COMP%]{opacity:1;transition:opacity 1s ease-in-out}.videoOn[_ngcontent-%COMP%]{display:inline}.videoOff[_ngcontent-%COMP%]{display:none}.app[_ngcontent-%COMP%]{width:250px;float:left;margin-left:10px}.toolbar[_ngcontent-%COMP%]{position:absolute;top:40%;right:25%;left:25%;margin:auto;height:155px;width:200px;background:transparent;color:gray;font-size:-webkit-xxx-large;font-weight:700}.add[_ngcontent-%COMP%]{margin:auto;color:#fff;cursor:pointer;background:#7f6c04;width:40px;height:40px;border:1px solid #fff;border-radius:67px}.dark-modal[_ngcontent-%COMP%]{background-color:#292b2c!important;color:#fff!important}.dark-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 1200px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-870px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}@media (max-width: 993px){.video-container[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;margin:-760px 0 0;padding:10px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 0 10px 3px #fff}}.note_toolbar[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.close[_ngcontent-%COMP%]{top:-10px;right:-100px;cursor:pointer;color:#000;position:relative}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;color:#000;background:#ffc;display:block;height:10em;width:10em;padding:1em;box-shadow:5px 5px 7px #212121b3;transform:rotate(-6deg);transition:transform .15s linear}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(even){transform:rotate(4deg);position:relative;top:5px;background:#cfc}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n){transform:rotate(-3deg);position:relative;top:-5px;background:#ccf}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5n){transform:rotate(5deg);position:relative;top:-10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{box-shadow:10px 10px 7px #000000b3;transform:scale(1.25);position:relative;z-index:5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1em}'],changeDetection:0}),s})(),$p=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({}),s})(),Xp=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({}),s})();const Kp=[{path:"fase1",component:Qt},{path:"",component:He},{path:"fase2",component:he},{path:"fase3",component:Ni},{path:"fase4",component:Fi},{path:"fase5",component:_e},{path:"fase6",component:Vi},{path:"fase7",component:ai},{path:"fase8",component:w},{path:"fase9",component:Jt},{path:"fase10",component:Ut},{path:"fase11",component:_n},{path:"fase12",component:xn},{path:"fase13",component:hs},{path:"fase14",component:Ns},{path:"fase15",component:q},{path:"fase16",component:Vt},{path:"fase17",component:Fn},{path:"fase18",component:Kn},{path:"fase19",component:Rs},{path:"fase20",component:dr},{path:"fase21",component:kr},{path:"fase22",component:Hr},{path:"fase23",component:Ea},{path:"fase24",component:za},{path:"fase25",component:ea},{path:"fase26",component:va},{path:"fase27",component:lc},{path:"fase28",component:Tc},{path:"fase29",component:Jc},{path:"fase30",component:il},{path:"fase31",component:ml},{path:"fase32",component:Dl},{path:"fase33",component:Yl},{path:"fase34",component:pd},{path:"fase35",component:Od},{path:"fase36",component:Bd},{path:"fase37",component:op},{path:"fase38",component:bp},{path:"fase39",component:Np},{path:"fase40",component:Gp}],tu={url:tt.N.API,options:{transports:["websocket"],jsonp:!1}};let eu=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[T.ez,M.Bz.forChild(Kp),S.q,L.vi,p.XC,p.ZQ,Wt.p,p.IJ,$p,Xp,V.forRoot(tu)],M.Bz]}),s})()},8498:ct=>{function E(){}ct.exports=function P(T,L,M){var p=!1;return M=M||E,S.count=T,0===T?L():S;function S(g,A){if(S.count<=0)throw new Error("after called too many times");--S.count,g?(p=!0,L(g),L=M):0===S.count&&!p&&L(null,A)}}},9933:ct=>{ct.exports=function(P,E,T){var L=P.byteLength;if(E=E||0,T=T||L,P.slice)return P.slice(E,T);if(E<0&&(E+=L),T<0&&(T+=L),T>L&&(T=L),E>=L||E>=T||0===L)return new ArrayBuffer(0);for(var M=new Uint8Array(P),p=new Uint8Array(T-E),S=E,g=0;S<T;S++,g++)p[g]=M[S];return p.buffer}},2150:ct=>{function P(E){this.ms=(E=E||{}).min||100,this.max=E.max||1e4,this.factor=E.factor||2,this.jitter=E.jitter>0&&E.jitter<=1?E.jitter:0,this.attempts=0}ct.exports=P,P.prototype.duration=function(){var E=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var T=Math.random(),L=Math.floor(T*this.jitter*E);E=0==(1&Math.floor(10*T))?E-L:E+L}return 0|Math.min(E,this.max)},P.prototype.reset=function(){this.attempts=0},P.prototype.setMin=function(E){this.ms=E},P.prototype.setMax=function(E){this.max=E},P.prototype.setJitter=function(E){this.jitter=E}},390:(ct,P)=>{!function(E){"use strict";P.encode=function(T){var M,L=new Uint8Array(T),p=L.length,S="";for(M=0;M<p;M+=3)S+=E[L[M]>>2],S+=E[(3&L[M])<<4|L[M+1]>>4],S+=E[(15&L[M+1])<<2|L[M+2]>>6],S+=E[63&L[M+2]];return p%3==2?S=S.substring(0,S.length-1)+"=":p%3==1&&(S=S.substring(0,S.length-2)+"=="),S},P.decode=function(T){var p,g,A,_,t,L=.75*T.length,M=T.length,S=0;"="===T[T.length-1]&&(L--,"="===T[T.length-2]&&L--);var C=new ArrayBuffer(L),y=new Uint8Array(C);for(p=0;p<M;p+=4)g=E.indexOf(T[p]),A=E.indexOf(T[p+1]),_=E.indexOf(T[p+2]),t=E.indexOf(T[p+3]),y[S++]=g<<2|A>>4,y[S++]=(15&A)<<4|_>>2,y[S++]=(3&_)<<6|63&t;return C}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},113:ct=>{var P=void 0!==P?P:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,E=function(){try{return 2===new Blob(["hi"]).size}catch(A){return!1}}(),T=E&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(A){return!1}}(),L=P&&P.prototype.append&&P.prototype.getBlob;function M(g){return g.map(function(A){if(A.buffer instanceof ArrayBuffer){var _=A.buffer;if(A.byteLength!==_.byteLength){var t=new Uint8Array(A.byteLength);t.set(new Uint8Array(_,A.byteOffset,A.byteLength)),_=t.buffer}return _}return A})}function p(g,A){A=A||{};var _=new P;return M(g).forEach(function(t){_.append(t)}),A.type?_.getBlob(A.type):_.getBlob()}function S(g,A){return new Blob(M(g),A||{})}"undefined"!=typeof Blob&&(p.prototype=Blob.prototype,S.prototype=Blob.prototype),ct.exports=E?T?Blob:S:L?p:void 0},1213:ct=>{var P=[].slice;ct.exports=function(E,T){if("string"==typeof T&&(T=E[T]),"function"!=typeof T)throw new Error("bind() requires a function");var L=P.call(arguments,2);return function(){return T.apply(E,L.concat(P.call(arguments)))}}},1264:ct=>{function P(T){if(T)return function E(T){for(var L in P.prototype)T[L]=P.prototype[L];return T}(T)}ct.exports=P,P.prototype.on=P.prototype.addEventListener=function(T,L){return this._callbacks=this._callbacks||{},(this._callbacks["$"+T]=this._callbacks["$"+T]||[]).push(L),this},P.prototype.once=function(T,L){function M(){this.off(T,M),L.apply(this,arguments)}return M.fn=L,this.on(T,M),this},P.prototype.off=P.prototype.removeListener=P.prototype.removeAllListeners=P.prototype.removeEventListener=function(T,L){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var M=this._callbacks["$"+T];if(!M)return this;if(1==arguments.length)return delete this._callbacks["$"+T],this;for(var p,S=0;S<M.length;S++)if((p=M[S])===L||p.fn===L){M.splice(S,1);break}return 0===M.length&&delete this._callbacks["$"+T],this},P.prototype.emit=function(T){this._callbacks=this._callbacks||{};for(var L=new Array(arguments.length-1),M=this._callbacks["$"+T],p=1;p<arguments.length;p++)L[p-1]=arguments[p];if(M){p=0;for(var S=(M=M.slice(0)).length;p<S;++p)M[p].apply(this,L)}return this},P.prototype.listeners=function(T){return this._callbacks=this._callbacks||{},this._callbacks["$"+T]||[]},P.prototype.hasListeners=function(T){return!!this.listeners(T).length}},9471:ct=>{ct.exports=function(P,E){var T=function(){};T.prototype=E.prototype,P.prototype=new T,P.prototype.constructor=P}},60:function(ct){"undefined"!=typeof self&&self,ct.exports=function(P){var E={};function T(L){if(E[L])return E[L].exports;var M=E[L]={i:L,l:!1,exports:{}};return P[L].call(M.exports,M,M.exports,T),M.l=!0,M.exports}return T.m=P,T.c=E,T.d=function(L,M,p){T.o(L,M)||Object.defineProperty(L,M,{enumerable:!0,get:p})},T.r=function(L){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},T.t=function(L,M){if(1&M&&(L=T(L)),8&M||4&M&&"object"==typeof L&&L&&L.__esModule)return L;var p=Object.create(null);if(T.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:L}),2&M&&"string"!=typeof L)for(var S in L)T.d(p,S,function(g){return L[g]}.bind(null,S));return p},T.n=function(L){var M=L&&L.__esModule?function(){return L.default}:function(){return L};return T.d(M,"a",M),M},T.o=function(L,M){return Object.prototype.hasOwnProperty.call(L,M)},T.p="",T(T.s=0)}([function(P,E,T){"use strict";T.r(E),T.d(E,"default",function(){return L});class L{constructor(p,S=null,g=null){this.events={},this.container=p,this.precanvas=null,this.nodeId=1,this.ele_selected=null,this.node_selected=null,this.drag=!1,this.reroute=!1,this.reroute_fix_curvature=!1,this.curvature=.5,this.reroute_curvature_start_end=.5,this.reroute_curvature=.5,this.reroute_width=6,this.drag_point=!1,this.editor_selected=!1,this.connection=!1,this.connection_ele=null,this.connection_selected=null,this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_x_start=0,this.pos_y=0,this.pos_y_start=0,this.mouse_x=0,this.mouse_y=0,this.line_path=5,this.first_click=null,this.force_first_input=!1,this.draggable_inputs=!0,this.useuuid=!1,this.parent=g,this.noderegister={},this.render=S,this.drawflow={drawflow:{Home:{data:{}}}},this.module="Home",this.editor_mode="edit",this.zoom=1,this.zoom_max=1.6,this.zoom_min=.5,this.zoom_value=.1,this.zoom_last_value=1,this.evCache=new Array,this.prevDiff=-1}start(){this.container.classList.add("parent-drawflow"),this.container.tabIndex=0,this.precanvas=document.createElement("div"),this.precanvas.classList.add("drawflow"),this.container.appendChild(this.precanvas),this.container.addEventListener("mouseup",this.dragEnd.bind(this)),this.container.addEventListener("mousemove",this.position.bind(this)),this.container.addEventListener("mousedown",this.click.bind(this)),this.container.addEventListener("touchend",this.dragEnd.bind(this)),this.container.addEventListener("touchmove",this.position.bind(this)),this.container.addEventListener("touchstart",this.click.bind(this)),this.container.addEventListener("contextmenu",this.contextmenu.bind(this)),this.container.addEventListener("keydown",this.key.bind(this)),this.container.addEventListener("wheel",this.zoom_enter.bind(this)),this.container.addEventListener("input",this.updateNodeValue.bind(this)),this.container.addEventListener("dblclick",this.dblclick.bind(this)),this.container.onpointerdown=this.pointerdown_handler.bind(this),this.container.onpointermove=this.pointermove_handler.bind(this),this.container.onpointerup=this.pointerup_handler.bind(this),this.container.onpointercancel=this.pointerup_handler.bind(this),this.container.onpointerout=this.pointerup_handler.bind(this),this.container.onpointerleave=this.pointerup_handler.bind(this),this.load()}pointerdown_handler(p){this.evCache.push(p)}pointermove_handler(p){for(var S=0;S<this.evCache.length;S++)if(p.pointerId==this.evCache[S].pointerId){this.evCache[S]=p;break}if(2==this.evCache.length){var g=Math.abs(this.evCache[0].clientX-this.evCache[1].clientX);this.prevDiff>100&&(g>this.prevDiff&&this.zoom_in(),g<this.prevDiff&&this.zoom_out()),this.prevDiff=g}}pointerup_handler(p){this.remove_event(p),this.evCache.length<2&&(this.prevDiff=-1)}remove_event(p){for(var S=0;S<this.evCache.length;S++)if(this.evCache[S].pointerId==p.pointerId){this.evCache.splice(S,1);break}}load(){for(var p in this.drawflow.drawflow[this.module].data)this.addNodeImport(this.drawflow.drawflow[this.module].data[p],this.precanvas);if(this.reroute)for(var p in this.drawflow.drawflow[this.module].data)this.addRerouteImport(this.drawflow.drawflow[this.module].data[p]);for(var p in this.drawflow.drawflow[this.module].data)this.updateConnectionNodes("node-"+p);const S=this.drawflow.drawflow;let g=1;Object.keys(S).map(function(A,_){Object.keys(S[A].data).map(function(t,C){parseInt(t)>=g&&(g=parseInt(t)+1)})}),this.nodeId=g}removeReouteConnectionSelected(){this.dispatch("connectionUnselected",!0),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((p,S)=>{p.classList.remove("selected")})}click(p){if(this.dispatch("click",p),"fixed"===this.editor_mode){if(p.preventDefault(),"parent-drawflow"!==p.target.classList[0]&&"drawflow"!==p.target.classList[0])return!1;this.ele_selected=p.target.closest(".parent-drawflow")}else"view"===this.editor_mode?(null!=p.target.closest(".drawflow")||p.target.matches(".parent-drawflow"))&&(this.ele_selected=p.target.closest(".parent-drawflow"),p.preventDefault()):(this.first_click=p.target,this.ele_selected=p.target,0===p.button&&this.contextmenuDel(),null!=p.target.closest(".drawflow_content_node")&&(this.ele_selected=p.target.closest(".drawflow_content_node").parentElement));switch(this.ele_selected.classList[0]){case"drawflow-node":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected!=this.ele_selected&&this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.node_selected!=this.ele_selected&&this.dispatch("nodeSelected",this.ele_selected.id.slice(5)),this.node_selected=this.ele_selected,this.node_selected.classList.add("selected"),this.draggable_inputs?"SELECT"!==p.target.tagName&&(this.drag=!0):"INPUT"!==p.target.tagName&&"TEXTAREA"!==p.target.tagName&&"SELECT"!==p.target.tagName&&!0!==p.target.hasAttribute("contenteditable")&&(this.drag=!0);break;case"output":this.connection=!0,null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.drawConnection(p.target);break;case"parent-drawflow":case"drawflow":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.editor_selected=!0;break;case"main-path":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.connection_selected=this.ele_selected,this.connection_selected.classList.add("selected");const S=this.connection_selected.parentElement.classList;S.length>1&&(this.dispatch("connectionSelected",{output_id:S[2].slice(14),input_id:S[1].slice(13),output_class:S[3],input_class:S[4]}),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((g,A)=>{g.classList.add("selected")}));break;case"point":this.drag_point=!0,this.ele_selected.classList.add("selected");break;case"drawflow-delete":this.node_selected&&this.removeNodeId(this.node_selected.id),this.connection_selected&&this.removeConnection(),null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null)}"touchstart"===p.type?(this.pos_x=p.touches[0].clientX,this.pos_x_start=p.touches[0].clientX,this.pos_y=p.touches[0].clientY,this.pos_y_start=p.touches[0].clientY,this.mouse_x=p.touches[0].clientX,this.mouse_y=p.touches[0].clientY):(this.pos_x=p.clientX,this.pos_x_start=p.clientX,this.pos_y=p.clientY,this.pos_y_start=p.clientY),["input","output","main-path"].includes(this.ele_selected.classList[0])&&p.preventDefault(),this.dispatch("clickEnd",p)}position(p){if("touchmove"===p.type)var S=p.touches[0].clientX,g=p.touches[0].clientY;else S=p.clientX,g=p.clientY;if(this.connection&&this.updateConnection(S,g),this.editor_selected&&(this.dispatch("translate",{x:A=this.canvas_x+-(this.pos_x-S),y:_=this.canvas_y+-(this.pos_y-g)}),this.precanvas.style.transform="translate("+A+"px, "+_+"px) scale("+this.zoom+")"),this.drag){p.preventDefault();var A=(this.pos_x-S)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),_=(this.pos_y-g)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom);this.pos_x=S,this.pos_y=g,this.ele_selected.style.top=this.ele_selected.offsetTop-_+"px",this.ele_selected.style.left=this.ele_selected.offsetLeft-A+"px",this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_x=this.ele_selected.offsetLeft-A,this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_y=this.ele_selected.offsetTop-_,this.updateConnectionNodes(this.ele_selected.id)}if(this.drag_point){A=(this.pos_x-S)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),_=(this.pos_y-g)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom),this.pos_x=S,this.pos_y=g;var t=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),C=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));this.ele_selected.setAttributeNS(null,"cx",t),this.ele_selected.setAttributeNS(null,"cy",C);const y=this.ele_selected.parentElement.classList[2].slice(9),f=this.ele_selected.parentElement.classList[1].slice(13),k=this.ele_selected.parentElement.classList[3],N=this.ele_selected.parentElement.classList[4];let J=Array.from(this.ele_selected.parentElement.children).indexOf(this.ele_selected)-1;this.reroute_fix_curvature&&(J-=this.ele_selected.parentElement.querySelectorAll(".main-path").length-1,J<0&&(J=0));const D=y.slice(5),V=this.drawflow.drawflow[this.module].data[D].outputs[k].connections.findIndex(function(st,j){return st.node===f&&st.output===N});this.drawflow.drawflow[this.module].data[D].outputs[k].connections[V].points[J]={pos_x:t,pos_y:C};const tt=this.ele_selected.parentElement.classList[2].slice(9);this.updateConnectionNodes(tt)}"touchmove"===p.type&&(this.mouse_x=S,this.mouse_y=g),this.dispatch("mouseMove",{x:S,y:g})}dragEnd(p){if("touchend"===p.type)var S=this.mouse_x,g=this.mouse_y,A=document.elementFromPoint(S,g);else S=p.clientX,g=p.clientY,A=p.target;if(this.drag&&(this.pos_x_start==S&&this.pos_y_start==g||this.dispatch("nodeMoved",this.ele_selected.id.slice(5))),this.drag_point&&(this.ele_selected.classList.remove("selected"),this.pos_x_start==S&&this.pos_y_start==g||this.dispatch("rerouteMoved",this.ele_selected.parentElement.classList[2].slice(14))),this.editor_selected&&(this.canvas_x=this.canvas_x+-(this.pos_x-S),this.canvas_y=this.canvas_y+-(this.pos_y-g),this.editor_selected=!1),!0===this.connection)if("input"===A.classList[0]||this.force_first_input&&(null!=A.closest(".drawflow_content_node")||"drawflow-node"===A.classList[0])){if(!this.force_first_input||null==A.closest(".drawflow_content_node")&&"drawflow-node"!==A.classList[0])_=A.parentElement.parentElement.id,t=A.classList[1];else{if(null!=A.closest(".drawflow_content_node"))var _=A.closest(".drawflow_content_node").parentElement.id;else _=A.id;if(0===Object.keys(this.getNodeFromId(_.slice(5)).inputs).length)var t=!1;else t="input_1"}var C=this.ele_selected.parentElement.parentElement.id,y=this.ele_selected.classList[1];if(C!==_&&!1!==t){if(0===this.container.querySelectorAll(".connection.node_in_"+_+".node_out_"+C+"."+y+"."+t).length){this.connection_ele.classList.add("node_in_"+_),this.connection_ele.classList.add("node_out_"+C),this.connection_ele.classList.add(y),this.connection_ele.classList.add(t);var f=_.slice(5),k=C.slice(5);this.drawflow.drawflow[this.module].data[k].outputs[y].connections.push({node:f,output:t}),this.drawflow.drawflow[this.module].data[f].inputs[t].connections.push({node:k,input:y}),this.updateConnectionNodes("node-"+k),this.updateConnectionNodes("node-"+f),this.dispatch("connectionCreated",{output_id:k,input_id:f,output_class:y,input_class:t})}else this.dispatch("connectionCancel",!0),this.connection_ele.remove();this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null;this.drag=!1,this.drag_point=!1,this.connection=!1,this.ele_selected=null,this.editor_selected=!1,this.dispatch("mouseUp",p)}contextmenu(p){if(this.dispatch("contextmenu",p),p.preventDefault(),"fixed"===this.editor_mode||"view"===this.editor_mode)return!1;if(this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove(),this.node_selected||this.connection_selected){var S=document.createElement("div");S.classList.add("drawflow-delete"),S.innerHTML="x",this.node_selected&&this.node_selected.appendChild(S),this.connection_selected&&this.connection_selected.parentElement.classList.length>1&&(S.style.top=p.clientY*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))+"px",S.style.left=p.clientX*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))+"px",this.precanvas.appendChild(S))}}contextmenuDel(){this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove()}key(p){if(this.dispatch("keydown",p),"fixed"===this.editor_mode||"view"===this.editor_mode)return!1;("Delete"===p.key||"Backspace"===p.key&&p.metaKey)&&(null!=this.node_selected&&"INPUT"!==this.first_click.tagName&&"TEXTAREA"!==this.first_click.tagName&&!0!==this.first_click.hasAttribute("contenteditable")&&this.removeNodeId(this.node_selected.id),null!=this.connection_selected&&this.removeConnection())}zoom_enter(p,S){p.ctrlKey&&(p.preventDefault(),p.deltaY>0?this.zoom_out():this.zoom_in())}zoom_refresh(){this.dispatch("zoom",this.zoom),this.canvas_x=this.canvas_x/this.zoom_last_value*this.zoom,this.canvas_y=this.canvas_y/this.zoom_last_value*this.zoom,this.zoom_last_value=this.zoom,this.precanvas.style.transform="translate("+this.canvas_x+"px, "+this.canvas_y+"px) scale("+this.zoom+")"}zoom_in(){this.zoom<this.zoom_max&&(this.zoom+=this.zoom_value,this.zoom_refresh())}zoom_out(){this.zoom>this.zoom_min&&(this.zoom-=this.zoom_value,this.zoom_refresh())}zoom_reset(){1!=this.zoom&&(this.zoom=1,this.zoom_refresh())}createCurvature(p,S,g,A,_,t){var C=p,y=S,f=g,k=A,N=_;switch(t){case"open":if(p>=g)var J=C+Math.abs(f-C)*N,D=f-Math.abs(f-C)*(-1*N);else J=C+Math.abs(f-C)*N,D=f-Math.abs(f-C)*N;return" M "+C+" "+y+" C "+J+" "+y+" "+D+" "+k+" "+f+"  "+k;case"close":return p>=g?(J=C+Math.abs(f-C)*(-1*N),D=f-Math.abs(f-C)*N):(J=C+Math.abs(f-C)*N,D=f-Math.abs(f-C)*N)," M "+C+" "+y+" C "+J+" "+y+" "+D+" "+k+" "+f+"  "+k;case"other":return p>=g?(J=C+Math.abs(f-C)*(-1*N),D=f-Math.abs(f-C)*(-1*N)):(J=C+Math.abs(f-C)*N,D=f-Math.abs(f-C)*N)," M "+C+" "+y+" C "+J+" "+y+" "+D+" "+k+" "+f+"  "+k;default:return" M "+C+" "+y+" C "+(J=C+Math.abs(f-C)*N)+" "+y+" "+(D=f-Math.abs(f-C)*N)+" "+k+" "+f+"  "+k}}drawConnection(p){var S=document.createElementNS("http://www.w3.org/2000/svg","svg");this.connection_ele=S;var g=document.createElementNS("http://www.w3.org/2000/svg","path");g.classList.add("main-path"),g.setAttributeNS(null,"d",""),S.classList.add("connection"),S.appendChild(g),this.precanvas.appendChild(S);var A=p.parentElement.parentElement.id.slice(5);this.dispatch("connectionStart",{output_id:A,output_class:p.classList[1]})}updateConnection(p,S){const g=this.precanvas,A=this.zoom;let _=g.clientWidth/(g.clientWidth*A);_=_||0;let t=g.clientHeight/(g.clientHeight*A);t=t||0;var C=this.connection_ele.children[0],y=this.ele_selected.offsetWidth/2+(this.ele_selected.getBoundingClientRect().x-g.getBoundingClientRect().x)*_,f=this.ele_selected.offsetHeight/2+(this.ele_selected.getBoundingClientRect().y-g.getBoundingClientRect().y)*t,k=p*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),N=S*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom)),D=this.createCurvature(y,f,k,N,this.curvature,"openclose");C.setAttributeNS(null,"d",D)}addConnection(p,S,g,A){var _=this.getModuleFromNodeId(p);if(_===this.getModuleFromNodeId(S)){var t=this.getNodeFromId(p),C=!1;for(var y in t.outputs[g].connections){var f=t.outputs[g].connections[y];f.node==S&&f.output==A&&(C=!0)}if(!1===C){if(this.drawflow.drawflow[_].data[p].outputs[g].connections.push({node:S.toString(),output:A}),this.drawflow.drawflow[_].data[S].inputs[A].connections.push({node:p.toString(),input:g}),this.module===_){var k=document.createElementNS("http://www.w3.org/2000/svg","svg"),N=document.createElementNS("http://www.w3.org/2000/svg","path");N.classList.add("main-path"),N.setAttributeNS(null,"d",""),k.classList.add("connection"),k.classList.add("node_in_node-"+S),k.classList.add("node_out_node-"+p),k.classList.add(g),k.classList.add(A),k.appendChild(N),this.precanvas.appendChild(k),this.updateConnectionNodes("node-"+p),this.updateConnectionNodes("node-"+S)}this.dispatch("connectionCreated",{output_id:p,input_id:S,output_class:g,input_class:A})}}}updateConnectionNodes(p){const S="node_in_"+p,A=this.container,_=this.precanvas,t=this.curvature,C=this.createCurvature,y=this.reroute_curvature,f=this.reroute_curvature_start_end,k=this.reroute_fix_curvature,N=this.reroute_width,J=this.zoom;let D=_.clientWidth/(_.clientWidth*J);D=D||0;let V=_.clientHeight/(_.clientHeight*J);V=V||0;const tt=A.querySelectorAll(".node_out_"+p);Object.keys(tt).map(function(j,X){if(null===tt[j].querySelector(".point")){var ot=A.querySelector("#"+p),u=tt[j].classList[1].replace("node_in_",""),ht=A.querySelector("#"+u).querySelectorAll("."+tt[j].classList[4])[0],gt=ht.offsetWidth/2+(ht.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,vt=ht.offsetHeight/2+(ht.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,Ot=ot.querySelectorAll("."+tt[j].classList[3])[0],Ct=Ot.offsetWidth/2+(Ot.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Tt=Ot.offsetHeight/2+(Ot.getBoundingClientRect().y-_.getBoundingClientRect().y)*V;const St=C(Ct,Tt,gt,vt,t,"openclose");tt[j].children[0].setAttributeNS(null,"d",St)}else{const St=tt[j].querySelectorAll(".point");let kt="";const Et=[];St.forEach((Zt,Ft)=>{if(0===Ft&&St.length-1==0){var Lt=A.querySelector("#"+p),Qt=((zt=Zt).getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Wt=(zt.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,At=(ee=Lt.querySelectorAll("."+Zt.parentElement.classList[3])[0]).offsetWidth/2+(ee.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Dt=ee.offsetHeight/2+(ee.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,It=C(At,Dt,Qt,Wt,f,"open");kt+=It,Et.push(It),Lt=Zt;var te=Zt.parentElement.classList[1].replace("node_in_",""),zt=(oe=A.querySelector("#"+te)).querySelectorAll("."+Zt.parentElement.classList[4])[0];Qt=(ce=oe.querySelectorAll("."+Zt.parentElement.classList[4])[0]).offsetWidth/2+(ce.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Wt=ce.offsetHeight/2+(ce.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,At=(Lt.getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Dt=(Lt.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,It=C(At,Dt,Qt,Wt,f,"close"),kt+=It,Et.push(It)}else if(0===Ft){var ee;Lt=A.querySelector("#"+p),Qt=((zt=Zt).getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Wt=(zt.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,At=(ee=Lt.querySelectorAll("."+Zt.parentElement.classList[3])[0]).offsetWidth/2+(ee.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Dt=ee.offsetHeight/2+(ee.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,It=C(At,Dt,Qt,Wt,f,"open"),kt+=It,Et.push(It),Lt=Zt,Qt=((zt=St[Ft+1]).getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Wt=(zt.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,At=(Lt.getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Dt=(Lt.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,It=C(At,Dt,Qt,Wt,y,"other"),kt+=It,Et.push(It)}else if(Ft===St.length-1){var oe,ce;Lt=Zt,te=Zt.parentElement.classList[1].replace("node_in_",""),zt=(oe=A.querySelector("#"+te)).querySelectorAll("."+Zt.parentElement.classList[4])[0],Qt=(ce=oe.querySelectorAll("."+Zt.parentElement.classList[4])[0]).offsetWidth/2+(ce.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Wt=ce.offsetHeight/2+(ce.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,At=(Lt.getBoundingClientRect().x-_.getBoundingClientRect().x)*(_.clientWidth/(_.clientWidth*J))+N,Dt=(Lt.getBoundingClientRect().y-_.getBoundingClientRect().y)*(_.clientHeight/(_.clientHeight*J))+N,It=C(At,Dt,Qt,Wt,f,"close"),kt+=It,Et.push(It)}else Lt=Zt,Qt=((zt=St[Ft+1]).getBoundingClientRect().x-_.getBoundingClientRect().x)*(_.clientWidth/(_.clientWidth*J))+N,Wt=(zt.getBoundingClientRect().y-_.getBoundingClientRect().y)*(_.clientHeight/(_.clientHeight*J))+N,At=(Lt.getBoundingClientRect().x-_.getBoundingClientRect().x)*(_.clientWidth/(_.clientWidth*J))+N,Dt=(Lt.getBoundingClientRect().y-_.getBoundingClientRect().y)*(_.clientHeight/(_.clientHeight*J))+N,It=C(At,Dt,Qt,Wt,y,"other"),kt+=It,Et.push(It)}),k?Et.forEach((Zt,Ft)=>{tt[j].children[Ft].setAttributeNS(null,"d",Zt)}):tt[j].children[0].setAttributeNS(null,"d",kt)}});const st=A.querySelectorAll("."+S);Object.keys(st).map(function(j,X){if(null===st[j].querySelector(".point")){var ot=A.querySelector("#"+p),u=st[j].classList[2].replace("node_out_",""),ht=A.querySelector("#"+u).querySelectorAll("."+st[j].classList[3])[0],gt=ht.offsetWidth/2+(ht.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,vt=ht.offsetHeight/2+(ht.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,Ot=(ot=ot.querySelectorAll("."+st[j].classList[4])[0]).offsetWidth/2+(ot.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Ct=ot.offsetHeight/2+(ot.getBoundingClientRect().y-_.getBoundingClientRect().y)*V;const Tt=C(gt,vt,Ot,Ct,t,"openclose");st[j].children[0].setAttributeNS(null,"d",Tt)}else{const Tt=st[j].querySelectorAll(".point");let St="";const kt=[];Tt.forEach((Et,Zt)=>{if(0===Zt&&Tt.length-1==0){var Ft=A.querySelector("#"+p),Lt=((te=Et).getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Qt=(te.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Wt=(oe=Ft.querySelectorAll("."+Et.parentElement.classList[4])[0]).offsetWidth/2+(oe.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,At=oe.offsetHeight/2+(oe.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,Dt=C(Lt,Qt,Wt,At,f,"close");St+=Dt,kt.push(Dt),Ft=Et;var It=Et.parentElement.classList[2].replace("node_out_",""),te=(ee=A.querySelector("#"+It)).querySelectorAll("."+Et.parentElement.classList[3])[0];Lt=(zt=ee.querySelectorAll("."+Et.parentElement.classList[3])[0]).offsetWidth/2+(zt.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Qt=zt.offsetHeight/2+(zt.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,Wt=(Ft.getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,At=(Ft.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Dt=C(Lt,Qt,Wt,At,f,"open"),St+=Dt,kt.push(Dt)}else if(0===Zt){var zt;Ft=Et,It=Et.parentElement.classList[2].replace("node_out_",""),te=(ee=A.querySelector("#"+It)).querySelectorAll("."+Et.parentElement.classList[3])[0],Lt=(zt=ee.querySelectorAll("."+Et.parentElement.classList[3])[0]).offsetWidth/2+(zt.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,Qt=zt.offsetHeight/2+(zt.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,Wt=(Ft.getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,At=(Ft.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Dt=C(Lt,Qt,Wt,At,f,"open"),St+=Dt,kt.push(Dt),Ft=Et,Wt=((te=Tt[Zt+1]).getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,At=(te.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Lt=(Ft.getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Qt=(Ft.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Dt=C(Lt,Qt,Wt,At,y,"other"),St+=Dt,kt.push(Dt)}else if(Zt===Tt.length-1){var ee,oe;Ft=Et,It=Et.parentElement.classList[1].replace("node_in_",""),te=(ee=A.querySelector("#"+It)).querySelectorAll("."+Et.parentElement.classList[4])[0],Wt=(oe=ee.querySelectorAll("."+Et.parentElement.classList[4])[0]).offsetWidth/2+(oe.getBoundingClientRect().x-_.getBoundingClientRect().x)*D,At=oe.offsetHeight/2+(oe.getBoundingClientRect().y-_.getBoundingClientRect().y)*V,Lt=(Ft.getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Qt=(Ft.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Dt=C(Lt,Qt,Wt,At,f,"close"),St+=Dt,kt.push(Dt)}else Ft=Et,Wt=((te=Tt[Zt+1]).getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,At=(te.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Lt=(Ft.getBoundingClientRect().x-_.getBoundingClientRect().x)*D+N,Qt=(Ft.getBoundingClientRect().y-_.getBoundingClientRect().y)*V+N,Dt=C(Lt,Qt,Wt,At,y,"other"),St+=Dt,kt.push(Dt)}),k?kt.forEach((Et,Zt)=>{st[j].children[Zt].setAttributeNS(null,"d",Et)}):st[j].children[0].setAttributeNS(null,"d",St)}})}dblclick(p){null!=this.connection_selected&&this.reroute&&this.createReroutePoint(this.connection_selected),"point"===p.target.classList[0]&&this.removeReroutePoint(p.target)}createReroutePoint(p){this.connection_selected.classList.remove("selected");const S=this.connection_selected.parentElement.classList[2].slice(9),g=this.connection_selected.parentElement.classList[1].slice(13),A=this.connection_selected.parentElement.classList[3],_=this.connection_selected.parentElement.classList[4];this.connection_selected=null;const t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.classList.add("point");var C=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),y=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));t.setAttributeNS(null,"cx",C),t.setAttributeNS(null,"cy",y),t.setAttributeNS(null,"r",this.reroute_width);let f=0;if(this.reroute_fix_curvature){const D=p.parentElement.querySelectorAll(".main-path").length;var k=document.createElementNS("http://www.w3.org/2000/svg","path");if(k.classList.add("main-path"),k.setAttributeNS(null,"d",""),p.parentElement.insertBefore(k,p.parentElement.children[D]),1===D)p.parentElement.appendChild(t);else{const V=Array.from(p.parentElement.children).indexOf(p);f=V,p.parentElement.insertBefore(t,p.parentElement.children[V+D+1])}}else p.parentElement.appendChild(t);const N=S.slice(5),J=this.drawflow.drawflow[this.module].data[N].outputs[A].connections.findIndex(function(D,V){return D.node===g&&D.output===_});void 0===this.drawflow.drawflow[this.module].data[N].outputs[A].connections[J].points&&(this.drawflow.drawflow[this.module].data[N].outputs[A].connections[J].points=[]),this.reroute_fix_curvature?(f>0||this.drawflow.drawflow[this.module].data[N].outputs[A].connections[J].points!==[]?this.drawflow.drawflow[this.module].data[N].outputs[A].connections[J].points.splice(f,0,{pos_x:C,pos_y:y}):this.drawflow.drawflow[this.module].data[N].outputs[A].connections[J].points.push({pos_x:C,pos_y:y}),p.parentElement.querySelectorAll(".main-path").forEach((D,V)=>{D.classList.remove("selected")})):this.drawflow.drawflow[this.module].data[N].outputs[A].connections[J].points.push({pos_x:C,pos_y:y}),this.dispatch("addReroute",N),this.updateConnectionNodes(S)}removeReroutePoint(p){const S=p.parentElement.classList[2].slice(9),g=p.parentElement.classList[1].slice(13),A=p.parentElement.classList[3],_=p.parentElement.classList[4];let t=Array.from(p.parentElement.children).indexOf(p);const C=S.slice(5),y=this.drawflow.drawflow[this.module].data[C].outputs[A].connections.findIndex(function(f,k){return f.node===g&&f.output===_});if(this.reroute_fix_curvature){const f=p.parentElement.querySelectorAll(".main-path").length;p.parentElement.children[f-1].remove(),t-=f,t<0&&(t=0)}else t--;this.drawflow.drawflow[this.module].data[C].outputs[A].connections[y].points.splice(t,1),p.remove(),this.dispatch("removeReroute",C),this.updateConnectionNodes(S)}registerNode(p,S,g=null,A=null){this.noderegister[p]={html:S,props:g,options:A}}getNodeFromId(p){var S=this.getModuleFromNodeId(p);return JSON.parse(JSON.stringify(this.drawflow.drawflow[S].data[p]))}getNodesFromName(p){var S=[];const g=this.drawflow.drawflow;return Object.keys(g).map(function(A,_){for(var t in g[A].data)g[A].data[t].name==p&&S.push(g[A].data[t].id)}),S}addNode(p,S,g,A,_,t,C,y,f=!1){if(this.useuuid)var k=this.getUuid();else k=this.nodeId;const N=document.createElement("div");N.classList.add("parent-node");const J=document.createElement("div");J.innerHTML="",J.setAttribute("id","node-"+k),J.classList.add("drawflow-node"),""!=t&&J.classList.add(...t.split(" "));const D=document.createElement("div");D.classList.add("inputs");const V=document.createElement("div");V.classList.add("outputs");const tt={};for(var st=0;st<S;st++){const u=document.createElement("div");u.classList.add("input"),u.classList.add("input_"+(st+1)),tt["input_"+(st+1)]={connections:[]},D.appendChild(u)}const j={};for(st=0;st<g;st++){const u=document.createElement("div");u.classList.add("output"),u.classList.add("output_"+(st+1)),j["output_"+(st+1)]={connections:[]},V.appendChild(u)}const X=document.createElement("div");if(X.classList.add("drawflow_content_node"),!1===f)X.innerHTML=y;else if(!0===f)X.appendChild(this.noderegister[y].html.cloneNode(!0));else if(3===parseInt(this.render.version)){let u=this.render.h(this.noderegister[y].html,this.noderegister[y].props,this.noderegister[y].options);u.appContext=this.parent,this.render.render(u,X)}else{let u=new this.render(wn({parent:this.parent,render:ht=>ht(this.noderegister[y].html,{props:this.noderegister[y].props})},this.noderegister[y].options)).$mount();X.appendChild(u.$el)}return Object.entries(C).forEach(function(u,ht){if("object"==typeof u[1])!function Ot(Ct,Tt,St){null!==(Ct=null===Ct?C[Tt]:Ct[Tt])&&Object.entries(Ct).forEach(function(kt,Et){if("object"==typeof kt[1])Ot(Ct,kt[0],St+"-"+kt[0]);else for(var Zt=X.querySelectorAll("[df-"+St+"-"+kt[0]+"]"),Ft=0;Ft<Zt.length;Ft++)Zt[Ft].value=kt[1],Zt[Ft].isContentEditable&&(Zt[Ft].innerText=kt[1])})}(null,u[0],u[0]);else for(var gt=X.querySelectorAll("[df-"+u[0]+"]"),vt=0;vt<gt.length;vt++)gt[vt].value=u[1],gt[vt].isContentEditable&&(gt[vt].innerText=u[1])}),J.appendChild(D),J.appendChild(X),J.appendChild(V),J.style.top=_+"px",J.style.left=A+"px",N.appendChild(J),this.precanvas.appendChild(N),this.drawflow.drawflow[this.module].data[k]={id:k,name:p,data:C,class:t,html:y,typenode:f,inputs:tt,outputs:j,pos_x:A,pos_y:_},this.dispatch("nodeCreated",k),this.useuuid||this.nodeId++,k}addNodeImport(p,S){const g=document.createElement("div");g.classList.add("parent-node");const A=document.createElement("div");A.innerHTML="",A.setAttribute("id","node-"+p.id),A.classList.add("drawflow-node"),""!=p.class&&A.classList.add(...p.class.split(" "));const _=document.createElement("div");_.classList.add("inputs");const t=document.createElement("div");t.classList.add("outputs"),Object.keys(p.inputs).map(function(f,k){const N=document.createElement("div");N.classList.add("input"),N.classList.add(f),_.appendChild(N),Object.keys(p.inputs[f].connections).map(function(J,D){var V=document.createElementNS("http://www.w3.org/2000/svg","svg"),tt=document.createElementNS("http://www.w3.org/2000/svg","path");tt.classList.add("main-path"),tt.setAttributeNS(null,"d",""),V.classList.add("connection"),V.classList.add("node_in_node-"+p.id),V.classList.add("node_out_node-"+p.inputs[f].connections[J].node),V.classList.add(p.inputs[f].connections[J].input),V.classList.add(f),V.appendChild(tt),S.appendChild(V)})});for(var C=0;C<Object.keys(p.outputs).length;C++){const f=document.createElement("div");f.classList.add("output"),f.classList.add("output_"+(C+1)),t.appendChild(f)}const y=document.createElement("div");if(y.classList.add("drawflow_content_node"),!1===p.typenode)y.innerHTML=p.html;else if(!0===p.typenode)y.appendChild(this.noderegister[p.html].html.cloneNode(!0));else if(3===parseInt(this.render.version)){let f=this.render.h(this.noderegister[p.html].html,this.noderegister[p.html].props,this.noderegister[p.html].options);f.appContext=this.parent,this.render.render(f,y)}else{let f=new this.render(wn({parent:this.parent,render:k=>k(this.noderegister[p.html].html,{props:this.noderegister[p.html].props})},this.noderegister[p.html].options)).$mount();y.appendChild(f.$el)}Object.entries(p.data).forEach(function(f,k){if("object"==typeof f[1])!function D(V,tt,st){null!==(V=null===V?p.data[tt]:V[tt])&&Object.entries(V).forEach(function(j,X){if("object"==typeof j[1])D(V,j[0],st+"-"+j[0]);else for(var ot=y.querySelectorAll("[df-"+st+"-"+j[0]+"]"),u=0;u<ot.length;u++)ot[u].value=j[1],ot[u].isContentEditable&&(ot[u].innerText=j[1])})}(null,f[0],f[0]);else for(var N=y.querySelectorAll("[df-"+f[0]+"]"),J=0;J<N.length;J++)N[J].value=f[1],N[J].isContentEditable&&(N[J].innerText=f[1])}),A.appendChild(_),A.appendChild(y),A.appendChild(t),A.style.top=p.pos_y+"px",A.style.left=p.pos_x+"px",g.appendChild(A),this.precanvas.appendChild(g)}addRerouteImport(p){const S=this.reroute_width,g=this.reroute_fix_curvature,A=this.container;Object.keys(p.outputs).map(function(_,t){Object.keys(p.outputs[_].connections).map(function(C,y){const f=p.outputs[_].connections[C].points;void 0!==f&&f.forEach((k,N)=>{const V=A.querySelector(".connection.node_in_node-"+p.outputs[_].connections[C].node+".node_out_node-"+p.id+"."+_+"."+p.outputs[_].connections[C].output);if(g&&0===N)for(var tt=0;tt<f.length;tt++){var st=document.createElementNS("http://www.w3.org/2000/svg","path");st.classList.add("main-path"),st.setAttributeNS(null,"d",""),V.appendChild(st)}const j=document.createElementNS("http://www.w3.org/2000/svg","circle");j.classList.add("point");var ot=k.pos_y;j.setAttributeNS(null,"cx",k.pos_x),j.setAttributeNS(null,"cy",ot),j.setAttributeNS(null,"r",S),V.appendChild(j)})})})}updateNodeValue(p){for(var S=p.target.attributes,g=0;g<S.length;g++)if(S[g].nodeName.startsWith("df-")){for(var A=S[g].nodeName.slice(3).split("-"),_=this.drawflow.drawflow[this.module].data[p.target.closest(".drawflow_content_node").parentElement.id.slice(5)].data,t=0;t<A.length-1;t+=1)null==_[A[t]]&&(_[A[t]]={}),_=_[A[t]];_[A[A.length-1]]=p.target.value,p.target.isContentEditable&&(_[A[A.length-1]]=p.target.innerText),this.dispatch("nodeDataChanged",p.target.closest(".drawflow_content_node").parentElement.id.slice(5))}}updateNodeDataFromId(p,S){var g=this.getModuleFromNodeId(p);if(this.drawflow.drawflow[g].data[p].data=S,this.module===g){const A=this.container.querySelector("#node-"+p);Object.entries(S).forEach(function(_,t){if("object"==typeof _[1])!function f(k,N,J){null!==(k=null===k?S[N]:k[N])&&Object.entries(k).forEach(function(D,V){if("object"==typeof D[1])f(k,D[0],J+"-"+D[0]);else for(var tt=A.querySelectorAll("[df-"+J+"-"+D[0]+"]"),st=0;st<tt.length;st++)tt[st].value=D[1],tt[st].isContentEditable&&(tt[st].innerText=D[1])})}(null,_[0],_[0]);else for(var C=A.querySelectorAll("[df-"+_[0]+"]"),y=0;y<C.length;y++)C[y].value=_[1],C[y].isContentEditable&&(C[y].innerText=_[1])})}}addNodeInput(p){var S=this.getModuleFromNodeId(p);const g=this.getNodeFromId(p),A=Object.keys(g.inputs).length;if(this.module===S){const _=document.createElement("div");_.classList.add("input"),_.classList.add("input_"+(A+1)),this.container.querySelector("#node-"+p+" .inputs").appendChild(_),this.updateConnectionNodes("node-"+p)}this.drawflow.drawflow[S].data[p].inputs["input_"+(A+1)]={connections:[]}}addNodeOutput(p){var S=this.getModuleFromNodeId(p);const g=this.getNodeFromId(p),A=Object.keys(g.outputs).length;if(this.module===S){const _=document.createElement("div");_.classList.add("output"),_.classList.add("output_"+(A+1)),this.container.querySelector("#node-"+p+" .outputs").appendChild(_),this.updateConnectionNodes("node-"+p)}this.drawflow.drawflow[S].data[p].outputs["output_"+(A+1)]={connections:[]}}removeNodeInput(p,S){var g=this.getModuleFromNodeId(p);const A=this.getNodeFromId(p);this.module===g&&this.container.querySelector("#node-"+p+" .inputs .input."+S).remove();const _=[];Object.keys(A.inputs[S].connections).map(function(k,N){_.push({id_output:A.inputs[S].connections[N].node,id:p,output_class:A.inputs[S].connections[N].input,input_class:S})}),_.forEach((k,N)=>{this.removeSingleConnection(k.id_output,k.id,k.output_class,k.input_class)}),delete this.drawflow.drawflow[g].data[p].inputs[S];const t=[],C=this.drawflow.drawflow[g].data[p].inputs;Object.keys(C).map(function(k,N){t.push(C[k])}),this.drawflow.drawflow[g].data[p].inputs={};const y=S.slice(6);let f=[];t.forEach((k,N)=>{k.connections.forEach((J,D)=>{f.push(J)}),this.drawflow.drawflow[g].data[p].inputs["input_"+(N+1)]=k}),f=new Set(f.map(k=>JSON.stringify(k))),f=Array.from(f).map(k=>JSON.parse(k)),this.module===g&&this.container.querySelectorAll("#node-"+p+" .inputs .input").forEach((k,N)=>{const J=k.classList[1].slice(6);parseInt(y)<parseInt(J)&&(k.classList.remove("input_"+J),k.classList.add("input_"+(J-1)))}),f.forEach((k,N)=>{this.drawflow.drawflow[g].data[k.node].outputs[k.input].connections.forEach((J,D)=>{if(J.node==p){const V=J.output.slice(6);if(parseInt(y)<parseInt(V)){if(this.module===g){const tt=this.container.querySelector(".connection.node_in_node-"+p+".node_out_node-"+k.node+"."+k.input+".input_"+V);tt.classList.remove("input_"+V),tt.classList.add("input_"+(V-1))}this.drawflow.drawflow[g].data[k.node].outputs[k.input].connections[D]=J.points?{node:J.node,output:"input_"+(V-1),points:J.points}:{node:J.node,output:"input_"+(V-1)}}}})}),this.updateConnectionNodes("node-"+p)}removeNodeOutput(p,S){var g=this.getModuleFromNodeId(p);const A=this.getNodeFromId(p);this.module===g&&this.container.querySelector("#node-"+p+" .outputs .output."+S).remove();const _=[];Object.keys(A.outputs[S].connections).map(function(k,N){_.push({id:p,id_input:A.outputs[S].connections[N].node,output_class:S,input_class:A.outputs[S].connections[N].output})}),_.forEach((k,N)=>{this.removeSingleConnection(k.id,k.id_input,k.output_class,k.input_class)}),delete this.drawflow.drawflow[g].data[p].outputs[S];const t=[],C=this.drawflow.drawflow[g].data[p].outputs;Object.keys(C).map(function(k,N){t.push(C[k])}),this.drawflow.drawflow[g].data[p].outputs={};const y=S.slice(7);let f=[];t.forEach((k,N)=>{k.connections.forEach((J,D)=>{f.push({node:J.node,output:J.output})}),this.drawflow.drawflow[g].data[p].outputs["output_"+(N+1)]=k}),f=new Set(f.map(k=>JSON.stringify(k))),f=Array.from(f).map(k=>JSON.parse(k)),this.module===g&&this.container.querySelectorAll("#node-"+p+" .outputs .output").forEach((k,N)=>{const J=k.classList[1].slice(7);parseInt(y)<parseInt(J)&&(k.classList.remove("output_"+J),k.classList.add("output_"+(J-1)))}),f.forEach((k,N)=>{this.drawflow.drawflow[g].data[k.node].inputs[k.output].connections.forEach((J,D)=>{if(J.node==p){const V=J.input.slice(7);if(parseInt(y)<parseInt(V)){if(this.module===g){const tt=this.container.querySelector(".connection.node_in_node-"+k.node+".node_out_node-"+p+".output_"+V+"."+k.output);tt.classList.remove("output_"+V),tt.classList.remove(k.output),tt.classList.add("output_"+(V-1)),tt.classList.add(k.output)}this.drawflow.drawflow[g].data[k.node].inputs[k.output].connections[D]=J.points?{node:J.node,input:"output_"+(V-1),points:J.points}:{node:J.node,input:"output_"+(V-1)}}}})}),this.updateConnectionNodes("node-"+p)}removeNodeId(p){this.removeConnectionNodeId(p);var S=this.getModuleFromNodeId(p.slice(5));this.module===S&&this.container.querySelector("#"+p).remove(),delete this.drawflow.drawflow[S].data[p.slice(5)],this.dispatch("nodeRemoved",p.slice(5))}removeConnection(){if(null!=this.connection_selected){var p=this.connection_selected.parentElement.classList;this.connection_selected.parentElement.remove();var S=this.drawflow.drawflow[this.module].data[p[2].slice(14)].outputs[p[3]].connections.findIndex(function(A,_){return A.node===p[1].slice(13)&&A.output===p[4]});this.drawflow.drawflow[this.module].data[p[2].slice(14)].outputs[p[3]].connections.splice(S,1);var g=this.drawflow.drawflow[this.module].data[p[1].slice(13)].inputs[p[4]].connections.findIndex(function(A,_){return A.node===p[2].slice(14)&&A.input===p[3]});this.drawflow.drawflow[this.module].data[p[1].slice(13)].inputs[p[4]].connections.splice(g,1),this.dispatch("connectionRemoved",{output_id:p[2].slice(14),input_id:p[1].slice(13),output_class:p[3],input_class:p[4]}),this.connection_selected=null}}removeSingleConnection(p,S,g,A){var _=this.getModuleFromNodeId(p);if(_===this.getModuleFromNodeId(S)){if(this.drawflow.drawflow[_].data[p].outputs[g].connections.findIndex(function(y,f){return y.node==S&&y.output===A})>-1){this.module===_&&this.container.querySelector(".connection.node_in_node-"+S+".node_out_node-"+p+"."+g+"."+A).remove();var t=this.drawflow.drawflow[_].data[p].outputs[g].connections.findIndex(function(y,f){return y.node==S&&y.output===A});this.drawflow.drawflow[_].data[p].outputs[g].connections.splice(t,1);var C=this.drawflow.drawflow[_].data[S].inputs[A].connections.findIndex(function(y,f){return y.node==p&&y.input===g});return this.drawflow.drawflow[_].data[S].inputs[A].connections.splice(C,1),this.dispatch("connectionRemoved",{output_id:p,input_id:S,output_class:g,input_class:A}),!0}return!1}return!1}removeConnectionNodeId(p){const S="node_in_"+p,A=this.container.querySelectorAll(".node_out_"+p);for(var _=A.length-1;_>=0;_--){var t=A[_].classList,C=this.drawflow.drawflow[this.module].data[t[1].slice(13)].inputs[t[4]].connections.findIndex(function(k,N){return k.node===t[2].slice(14)&&k.input===t[3]});this.drawflow.drawflow[this.module].data[t[1].slice(13)].inputs[t[4]].connections.splice(C,1);var y=this.drawflow.drawflow[this.module].data[t[2].slice(14)].outputs[t[3]].connections.findIndex(function(k,N){return k.node===t[1].slice(13)&&k.output===t[4]});this.drawflow.drawflow[this.module].data[t[2].slice(14)].outputs[t[3]].connections.splice(y,1),A[_].remove(),this.dispatch("connectionRemoved",{output_id:t[2].slice(14),input_id:t[1].slice(13),output_class:t[3],input_class:t[4]})}const f=this.container.querySelectorAll("."+S);for(_=f.length-1;_>=0;_--)y=this.drawflow.drawflow[this.module].data[(t=f[_].classList)[2].slice(14)].outputs[t[3]].connections.findIndex(function(k,N){return k.node===t[1].slice(13)&&k.output===t[4]}),this.drawflow.drawflow[this.module].data[t[2].slice(14)].outputs[t[3]].connections.splice(y,1),C=this.drawflow.drawflow[this.module].data[t[1].slice(13)].inputs[t[4]].connections.findIndex(function(k,N){return k.node===t[2].slice(14)&&k.input===t[3]}),this.drawflow.drawflow[this.module].data[t[1].slice(13)].inputs[t[4]].connections.splice(C,1),f[_].remove(),this.dispatch("connectionRemoved",{output_id:t[2].slice(14),input_id:t[1].slice(13),output_class:t[3],input_class:t[4]})}getModuleFromNodeId(p){var S;const g=this.drawflow.drawflow;return Object.keys(g).map(function(A,_){Object.keys(g[A].data).map(function(t,C){t==p&&(S=A)})}),S}addModule(p){this.drawflow.drawflow[p]={data:{}},this.dispatch("moduleCreated",p)}changeModule(p){this.dispatch("moduleChanged",p),this.module=p,this.precanvas.innerHTML="",this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_y=0,this.mouse_x=0,this.mouse_y=0,this.zoom=1,this.zoom_last_value=1,this.precanvas.style.transform="",this.import(this.drawflow,!1)}removeModule(p){this.module===p&&this.changeModule("Home"),delete this.drawflow.drawflow[p],this.dispatch("moduleRemoved",p)}clearModuleSelected(){this.precanvas.innerHTML="",this.drawflow.drawflow[this.module]={data:{}}}clear(){this.precanvas.innerHTML="",this.drawflow={drawflow:{Home:{data:{}}}}}export(){const p=JSON.parse(JSON.stringify(this.drawflow));return this.dispatch("export",p),p}import(p,S=!0){this.clear(),this.drawflow=JSON.parse(JSON.stringify(p)),this.load(),S&&this.dispatch("import","import")}on(p,S){return"function"!=typeof S?(console.error("The listener callback must be a function, the given type is "+typeof S),!1):"string"!=typeof p?(console.error("The event name must be a string, the given type is "+typeof p),!1):(void 0===this.events[p]&&(this.events[p]={listeners:[]}),void this.events[p].listeners.push(S))}removeListener(p,S){if(!this.events[p])return!1;const g=this.events[p].listeners,A=g.indexOf(S);A>-1&&g.splice(A,1)}dispatch(p,S){if(void 0===this.events[p])return!1;this.events[p].listeners.forEach(g=>{g(S)})}getUuid(){for(var p=[],S=0;S<36;S++)p[S]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return p[14]="4",p[19]="0123456789abcdef".substr(3&p[19]|8,1),p[8]=p[13]=p[18]=p[23]="-",p.join("")}}}]).default},851:ct=>{ct.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},7410:(ct,P,E)=>{ct.exports=E(3213),ct.exports.parser=E(552)},3213:(ct,P,E)=>{var T=E(1497),L=E(1264),M=E(2534)("engine.io-client:socket"),p=E(4068),S=E(552),g=E(1757),A=E(3257);function _(C,y){if(!(this instanceof _))return new _(C,y);y=y||{},C&&"object"==typeof C&&(y=C,C=null),C?(C=g(C),y.hostname=C.host,y.secure="https"===C.protocol||"wss"===C.protocol,y.port=C.port,C.query&&(y.query=C.query)):y.host&&(y.hostname=g(y.host).host),this.secure=null!=y.secure?y.secure:"undefined"!=typeof location&&"https:"===location.protocol,y.hostname&&!y.port&&(y.port=this.secure?"443":"80"),this.agent=y.agent||!1,this.hostname=y.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=y.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=y.query||{},"string"==typeof this.query&&(this.query=A.decode(this.query)),this.upgrade=!1!==y.upgrade,this.path=(y.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!y.forceJSONP,this.jsonp=!1!==y.jsonp,this.forceBase64=!!y.forceBase64,this.enablesXDR=!!y.enablesXDR,this.withCredentials=!1!==y.withCredentials,this.timestampParam=y.timestampParam||"t",this.timestampRequests=y.timestampRequests,this.transports=y.transports||["polling","websocket"],this.transportOptions=y.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=y.policyPort||843,this.rememberUpgrade=y.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=y.onlyBinaryUpgrades,this.perMessageDeflate=!1!==y.perMessageDeflate&&(y.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=y.pfx||void 0,this.key=y.key||void 0,this.passphrase=y.passphrase||void 0,this.cert=y.cert||void 0,this.ca=y.ca||void 0,this.ciphers=y.ciphers||void 0,this.rejectUnauthorized=void 0===y.rejectUnauthorized||y.rejectUnauthorized,this.forceNode=!!y.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(y.extraHeaders&&Object.keys(y.extraHeaders).length>0&&(this.extraHeaders=y.extraHeaders),y.localAddress&&(this.localAddress=y.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}ct.exports=_,_.priorWebsocketSuccess=!1,L(_.prototype),_.protocol=S.protocol,_.Socket=_,_.Transport=E(3330),_.transports=E(1497),_.parser=E(552),_.prototype.createTransport=function(C){M('creating transport "%s"',C);var y=function t(C){var y={};for(var f in C)C.hasOwnProperty(f)&&(y[f]=C[f]);return y}(this.query);y.EIO=S.protocol,y.transport=C;var f=this.transportOptions[C]||{};return this.id&&(y.sid=this.id),new T[C]({query:y,socket:this,agent:f.agent||this.agent,hostname:f.hostname||this.hostname,port:f.port||this.port,secure:f.secure||this.secure,path:f.path||this.path,forceJSONP:f.forceJSONP||this.forceJSONP,jsonp:f.jsonp||this.jsonp,forceBase64:f.forceBase64||this.forceBase64,enablesXDR:f.enablesXDR||this.enablesXDR,withCredentials:f.withCredentials||this.withCredentials,timestampRequests:f.timestampRequests||this.timestampRequests,timestampParam:f.timestampParam||this.timestampParam,policyPort:f.policyPort||this.policyPort,pfx:f.pfx||this.pfx,key:f.key||this.key,passphrase:f.passphrase||this.passphrase,cert:f.cert||this.cert,ca:f.ca||this.ca,ciphers:f.ciphers||this.ciphers,rejectUnauthorized:f.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:f.perMessageDeflate||this.perMessageDeflate,extraHeaders:f.extraHeaders||this.extraHeaders,forceNode:f.forceNode||this.forceNode,localAddress:f.localAddress||this.localAddress,requestTimeout:f.requestTimeout||this.requestTimeout,protocols:f.protocols||void 0,isReactNative:this.isReactNative})},_.prototype.open=function(){var C;if(this.rememberUpgrade&&_.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))C="websocket";else{if(0===this.transports.length){var y=this;return void setTimeout(function(){y.emit("error","No transports available")},0)}C=this.transports[0]}this.readyState="opening";try{C=this.createTransport(C)}catch(f){return this.transports.shift(),void this.open()}C.open(),this.setTransport(C)},_.prototype.setTransport=function(C){M("setting transport %s",C.name);var y=this;this.transport&&(M("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=C,C.on("drain",function(){y.onDrain()}).on("packet",function(f){y.onPacket(f)}).on("error",function(f){y.onError(f)}).on("close",function(){y.onClose("transport close")})},_.prototype.probe=function(C){M('probing transport "%s"',C);var y=this.createTransport(C,{probe:1}),f=!1,k=this;function N(){k.onlyBinaryUpgrades&&(f=f||!this.supportsBinary&&k.transport.supportsBinary),f||(M('probe transport "%s" opened',C),y.send([{type:"ping",data:"probe"}]),y.once("packet",function(ot){if(!f)if("pong"===ot.type&&"probe"===ot.data){if(M('probe transport "%s" pong',C),k.upgrading=!0,k.emit("upgrading",y),!y)return;_.priorWebsocketSuccess="websocket"===y.name,M('pausing current transport "%s"',k.transport.name),k.transport.pause(function(){f||"closed"!==k.readyState&&(M("changing transport and sending upgrade packet"),j(),k.setTransport(y),y.send([{type:"upgrade"}]),k.emit("upgrade",y),y=null,k.upgrading=!1,k.flush())})}else{M('probe transport "%s" failed',C);var u=new Error("probe error");u.transport=y.name,k.emit("upgradeError",u)}}))}function J(){f||(f=!0,j(),y.close(),y=null)}function D(X){var ot=new Error("probe error: "+X);ot.transport=y.name,J(),M('probe transport "%s" failed because of error: %s',C,X),k.emit("upgradeError",ot)}function V(){D("transport closed")}function tt(){D("socket closed")}function st(X){y&&X.name!==y.name&&(M('"%s" works - aborting "%s"',X.name,y.name),J())}function j(){y.removeListener("open",N),y.removeListener("error",D),y.removeListener("close",V),k.removeListener("close",tt),k.removeListener("upgrading",st)}_.priorWebsocketSuccess=!1,y.once("open",N),y.once("error",D),y.once("close",V),this.once("close",tt),this.once("upgrading",st),y.open()},_.prototype.onOpen=function(){if(M("socket open"),this.readyState="open",_.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){M("starting upgrade probes");for(var C=0,y=this.upgrades.length;C<y;C++)this.probe(this.upgrades[C])}},_.prototype.onPacket=function(C){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(M('socket receive: type "%s", data "%s"',C.type,C.data),this.emit("packet",C),this.emit("heartbeat"),C.type){case"open":this.onHandshake(JSON.parse(C.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var y=new Error("server error");y.code=C.data,this.onError(y);break;case"message":this.emit("data",C.data),this.emit("message",C.data)}else M('packet received with socket readyState "%s"',this.readyState)},_.prototype.onHandshake=function(C){this.emit("handshake",C),this.id=C.sid,this.transport.query.sid=C.sid,this.upgrades=this.filterUpgrades(C.upgrades),this.pingInterval=C.pingInterval,this.pingTimeout=C.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},_.prototype.onHeartbeat=function(C){clearTimeout(this.pingTimeoutTimer);var y=this;y.pingTimeoutTimer=setTimeout(function(){"closed"!==y.readyState&&y.onClose("ping timeout")},C||y.pingInterval+y.pingTimeout)},_.prototype.setPing=function(){var C=this;clearTimeout(C.pingIntervalTimer),C.pingIntervalTimer=setTimeout(function(){M("writing ping packet - expecting pong within %sms",C.pingTimeout),C.ping(),C.onHeartbeat(C.pingTimeout)},C.pingInterval)},_.prototype.ping=function(){var C=this;this.sendPacket("ping",function(){C.emit("ping")})},_.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},_.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(M("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},_.prototype.write=_.prototype.send=function(C,y,f){return this.sendPacket("message",C,y,f),this},_.prototype.sendPacket=function(C,y,f,k){if("function"==typeof y&&(k=y,y=void 0),"function"==typeof f&&(k=f,f=null),"closing"!==this.readyState&&"closed"!==this.readyState){(f=f||{}).compress=!1!==f.compress;var N={type:C,data:y,options:f};this.emit("packetCreate",N),this.writeBuffer.push(N),k&&this.once("flush",k),this.flush()}},_.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var C=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?k():y()}):this.upgrading?k():y()}function y(){C.onClose("forced close"),M("socket closing - telling transport to close"),C.transport.close()}function f(){C.removeListener("upgrade",f),C.removeListener("upgradeError",f),y()}function k(){C.once("upgrade",f),C.once("upgradeError",f)}return this},_.prototype.onError=function(C){M("socket error %j",C),_.priorWebsocketSuccess=!1,this.emit("error",C),this.onClose("transport error",C)},_.prototype.onClose=function(C,y){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(M('socket close with reason: "%s"',C),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",C,y),this.writeBuffer=[],this.prevBufferLen=0)},_.prototype.filterUpgrades=function(C){for(var y=[],f=0,k=C.length;f<k;f++)~p(this.transports,C[f])&&y.push(C[f]);return y}},3330:(ct,P,E)=>{var T=E(552),L=E(1264);function M(p){this.path=p.path,this.hostname=p.hostname,this.port=p.port,this.secure=p.secure,this.query=p.query,this.timestampParam=p.timestampParam,this.timestampRequests=p.timestampRequests,this.readyState="",this.agent=p.agent||!1,this.socket=p.socket,this.enablesXDR=p.enablesXDR,this.withCredentials=p.withCredentials,this.pfx=p.pfx,this.key=p.key,this.passphrase=p.passphrase,this.cert=p.cert,this.ca=p.ca,this.ciphers=p.ciphers,this.rejectUnauthorized=p.rejectUnauthorized,this.forceNode=p.forceNode,this.isReactNative=p.isReactNative,this.extraHeaders=p.extraHeaders,this.localAddress=p.localAddress}ct.exports=M,L(M.prototype),M.prototype.onError=function(p,S){var g=new Error(p);return g.type="TransportError",g.description=S,this.emit("error",g),this},M.prototype.open=function(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this},M.prototype.close=function(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this},M.prototype.send=function(p){if("open"!==this.readyState)throw new Error("Transport not open");this.write(p)},M.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},M.prototype.onData=function(p){var S=T.decodePacket(p,this.socket.binaryType);this.onPacket(S)},M.prototype.onPacket=function(p){this.emit("packet",p)},M.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},1497:(ct,P,E)=>{var T=E(3035),L=E(2889),M=E(6029),p=E(3909);P.polling=function S(g){var _=!1,t=!1,C=!1!==g.jsonp;if("undefined"!=typeof location){var y="https:"===location.protocol,f=location.port;f||(f=y?443:80),_=g.hostname!==location.hostname||f!==g.port,t=g.secure!==y}if(g.xdomain=_,g.xscheme=t,"open"in new T(g)&&!g.forceJSONP)return new L(g);if(!C)throw new Error("JSONP disabled");return new M(g)},P.websocket=p},6029:(ct,P,E)=>{var T=E(3904),L=E(9471),M=E(851);ct.exports=_;var g,p=/\n/g,S=/\\n/g;function A(){}function _(t){T.call(this,t),this.query=this.query||{},g||(g=M.___eio=M.___eio||[]),this.index=g.length;var C=this;g.push(function(y){C.onData(y)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){C.script&&(C.script.onerror=A)},!1)}L(_,T),_.prototype.supportsBinary=!1,_.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),T.prototype.doClose.call(this)},_.prototype.doPoll=function(){var t=this,C=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),C.async=!0,C.src=this.uri(),C.onerror=function(k){t.onError("jsonp poll error",k)};var y=document.getElementsByTagName("script")[0];y?y.parentNode.insertBefore(C,y):(document.head||document.body).appendChild(C),this.script=C,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var k=document.createElement("iframe");document.body.appendChild(k),document.body.removeChild(k)},100)},_.prototype.doWrite=function(t,C){var y=this;if(!this.form){var J,f=document.createElement("form"),k=document.createElement("textarea"),N=this.iframeId="eio_iframe_"+this.index;f.className="socketio",f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.target=N,f.method="POST",f.setAttribute("accept-charset","utf-8"),k.name="d",f.appendChild(k),document.body.appendChild(f),this.form=f,this.area=k}function D(){V(),C()}function V(){if(y.iframe)try{y.form.removeChild(y.iframe)}catch(st){y.onError("jsonp polling iframe removal error",st)}try{J=document.createElement('<iframe src="javascript:0" name="'+y.iframeId+'">')}catch(st){(J=document.createElement("iframe")).name=y.iframeId,J.src="javascript:0"}J.id=y.iframeId,y.form.appendChild(J),y.iframe=J}this.form.action=this.uri(),V(),t=t.replace(S,"\\\n"),this.area.value=t.replace(p,"\\n");try{this.form.submit()}catch(tt){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===y.iframe.readyState&&D()}:this.iframe.onload=D}},2889:(ct,P,E)=>{var T=E(3035),L=E(3904),M=E(1264),p=E(9471),S=E(2534)("engine.io-client:polling-xhr"),g=E(851);function A(){}function _(f){if(L.call(this,f),this.requestTimeout=f.requestTimeout,this.extraHeaders=f.extraHeaders,"undefined"!=typeof location){var k="https:"===location.protocol,N=location.port;N||(N=k?443:80),this.xd="undefined"!=typeof location&&f.hostname!==location.hostname||N!==f.port,this.xs=f.secure!==k}}function t(f){this.method=f.method||"GET",this.uri=f.uri,this.xd=!!f.xd,this.xs=!!f.xs,this.async=!1!==f.async,this.data=void 0!==f.data?f.data:null,this.agent=f.agent,this.isBinary=f.isBinary,this.supportsBinary=f.supportsBinary,this.enablesXDR=f.enablesXDR,this.withCredentials=f.withCredentials,this.requestTimeout=f.requestTimeout,this.pfx=f.pfx,this.key=f.key,this.passphrase=f.passphrase,this.cert=f.cert,this.ca=f.ca,this.ciphers=f.ciphers,this.rejectUnauthorized=f.rejectUnauthorized,this.extraHeaders=f.extraHeaders,this.create()}function y(){for(var f in t.requests)t.requests.hasOwnProperty(f)&&t.requests[f].abort()}ct.exports=_,ct.exports.Request=t,p(_,L),_.prototype.supportsBinary=!0,_.prototype.request=function(f){return(f=f||{}).uri=this.uri(),f.xd=this.xd,f.xs=this.xs,f.agent=this.agent||!1,f.supportsBinary=this.supportsBinary,f.enablesXDR=this.enablesXDR,f.withCredentials=this.withCredentials,f.pfx=this.pfx,f.key=this.key,f.passphrase=this.passphrase,f.cert=this.cert,f.ca=this.ca,f.ciphers=this.ciphers,f.rejectUnauthorized=this.rejectUnauthorized,f.requestTimeout=this.requestTimeout,f.extraHeaders=this.extraHeaders,new t(f)},_.prototype.doWrite=function(f,k){var J=this.request({method:"POST",data:f,isBinary:"string"!=typeof f&&void 0!==f}),D=this;J.on("success",k),J.on("error",function(V){D.onError("xhr post error",V)}),this.sendXhr=J},_.prototype.doPoll=function(){S("xhr poll");var f=this.request(),k=this;f.on("data",function(N){k.onData(N)}),f.on("error",function(N){k.onError("xhr poll error",N)}),this.pollXhr=f},M(t.prototype),t.prototype.create=function(){var f={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};f.pfx=this.pfx,f.key=this.key,f.passphrase=this.passphrase,f.cert=this.cert,f.ca=this.ca,f.ciphers=this.ciphers,f.rejectUnauthorized=this.rejectUnauthorized;var k=this.xhr=new T(f),N=this;try{S("xhr open %s: %s",this.method,this.uri),k.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var J in k.setDisableHeaderCheck&&k.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(J)&&k.setRequestHeader(J,this.extraHeaders[J])}catch(D){}if("POST"===this.method)try{k.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(D){}try{k.setRequestHeader("Accept","*/*")}catch(D){}"withCredentials"in k&&(k.withCredentials=this.withCredentials),this.requestTimeout&&(k.timeout=this.requestTimeout),this.hasXDR()?(k.onload=function(){N.onLoad()},k.onerror=function(){N.onError(k.responseText)}):k.onreadystatechange=function(){if(2===k.readyState)try{var D=k.getResponseHeader("Content-Type");(N.supportsBinary&&"application/octet-stream"===D||"application/octet-stream; charset=UTF-8"===D)&&(k.responseType="arraybuffer")}catch(V){}4===k.readyState&&(200===k.status||1223===k.status?N.onLoad():setTimeout(function(){N.onError("number"==typeof k.status?k.status:0)},0))},S("xhr data %s",this.data),k.send(this.data)}catch(D){return void setTimeout(function(){N.onError(D)},0)}"undefined"!=typeof document&&(this.index=t.requestsCount++,t.requests[this.index]=this)},t.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},t.prototype.onData=function(f){this.emit("data",f),this.onSuccess()},t.prototype.onError=function(f){this.emit("error",f),this.cleanup(!0)},t.prototype.cleanup=function(f){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=A:this.xhr.onreadystatechange=A,f)try{this.xhr.abort()}catch(k){}"undefined"!=typeof document&&delete t.requests[this.index],this.xhr=null}},t.prototype.onLoad=function(){var f;try{var k;try{k=this.xhr.getResponseHeader("Content-Type")}catch(N){}f=("application/octet-stream"===k||"application/octet-stream; charset=UTF-8"===k)&&this.xhr.response||this.xhr.responseText}catch(N){this.onError(N)}null!=f&&this.onData(f)},t.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},t.prototype.abort=function(){this.cleanup()},t.requestsCount=0,t.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",y):"function"==typeof addEventListener&&addEventListener("onpagehide"in g?"pagehide":"unload",y,!1))},3904:(ct,P,E)=>{var T=E(3330),L=E(3257),M=E(552),p=E(9471),S=E(5379),g=E(2534)("engine.io-client:polling");ct.exports=_;var A=null!=new(E(3035))({xdomain:!1}).responseType;function _(t){(!A||t&&t.forceBase64)&&(this.supportsBinary=!1),T.call(this,t)}p(_,T),_.prototype.name="polling",_.prototype.doOpen=function(){this.poll()},_.prototype.pause=function(t){var C=this;function y(){g("paused"),C.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var f=0;this.polling&&(g("we are currently polling - waiting to pause"),f++,this.once("pollComplete",function(){g("pre-pause polling complete"),--f||y()})),this.writable||(g("we are currently writing - waiting to pause"),f++,this.once("drain",function(){g("pre-pause writing complete"),--f||y()}))}else y()},_.prototype.poll=function(){g("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},_.prototype.onData=function(t){var C=this;g("polling got data %s",t),M.decodePayload(t,this.socket.binaryType,function(f,k,N){if("opening"===C.readyState&&"open"===f.type&&C.onOpen(),"close"===f.type)return C.onClose(),!1;C.onPacket(f)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():g('ignoring poll - transport state "%s"',this.readyState))},_.prototype.doClose=function(){var t=this;function C(){g("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(g("transport open - closing"),C()):(g("transport not open - deferring close"),this.once("open",C))},_.prototype.write=function(t){var C=this;this.writable=!1;var y=function(){C.writable=!0,C.emit("drain")};M.encodePayload(t,this.supportsBinary,function(f){C.doWrite(f,y)})},_.prototype.uri=function(){var t=this.query||{},C=this.secure?"https":"http",y="";return!1!==this.timestampRequests&&(t[this.timestampParam]=S()),!this.supportsBinary&&!t.sid&&(t.b64=1),t=L.encode(t),this.port&&("https"===C&&443!==Number(this.port)||"http"===C&&80!==Number(this.port))&&(y=":"+this.port),t.length&&(t="?"+t),C+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+y+this.path+t}},3909:(ct,P,E)=>{var A,_,T=E(3330),L=E(552),M=E(3257),p=E(9471),S=E(5379),g=E(2534)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?A=WebSocket:"undefined"!=typeof self&&(A=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{_=E(7020)}catch(y){}var t=A||_;function C(y){y&&y.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=y.perMessageDeflate,this.usingBrowserWebSocket=A&&!y.forceNode,this.protocols=y.protocols,this.usingBrowserWebSocket||(t=_),T.call(this,y)}ct.exports=C,p(C,T),C.prototype.name="websocket",C.prototype.supportsBinary=!0,C.prototype.doOpen=function(){if(this.check()){var y=this.uri(),f=this.protocols,k={};this.isReactNative||(k.agent=this.agent,k.perMessageDeflate=this.perMessageDeflate,k.pfx=this.pfx,k.key=this.key,k.passphrase=this.passphrase,k.cert=this.cert,k.ca=this.ca,k.ciphers=this.ciphers,k.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(k.headers=this.extraHeaders),this.localAddress&&(k.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?f?new t(y,f):new t(y):new t(y,f,k)}catch(N){return this.emit("error",N)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},C.prototype.addEventListeners=function(){var y=this;this.ws.onopen=function(){y.onOpen()},this.ws.onclose=function(){y.onClose()},this.ws.onmessage=function(f){y.onData(f.data)},this.ws.onerror=function(f){y.onError("websocket error",f)}},C.prototype.write=function(y){var f=this;this.writable=!1;for(var k=y.length,N=0,J=k;N<J;N++)!function(V){L.encodePacket(V,f.supportsBinary,function(tt){if(!f.usingBrowserWebSocket){var st={};V.options&&(st.compress=V.options.compress),f.perMessageDeflate&&("string"==typeof tt?Buffer.byteLength(tt):tt.length)<f.perMessageDeflate.threshold&&(st.compress=!1)}try{f.usingBrowserWebSocket?f.ws.send(tt):f.ws.send(tt,st)}catch(X){g("websocket closed before onclose event")}--k||(f.emit("flush"),setTimeout(function(){f.writable=!0,f.emit("drain")},0))})}(y[N])},C.prototype.onClose=function(){T.prototype.onClose.call(this)},C.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},C.prototype.uri=function(){var y=this.query||{},f=this.secure?"wss":"ws",k="";return this.port&&("wss"===f&&443!==Number(this.port)||"ws"===f&&80!==Number(this.port))&&(k=":"+this.port),this.timestampRequests&&(y[this.timestampParam]=S()),this.supportsBinary||(y.b64=1),(y=M.encode(y)).length&&(y="?"+y),f+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+k+this.path+y},C.prototype.check=function(){return!(!t||"__initialize"in t&&this.name===C.prototype.name)}},3035:(ct,P,E)=>{var T=E(764),L=E(851);ct.exports=function(M){var p=M.xdomain,S=M.xscheme,g=M.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!p||T))return new XMLHttpRequest}catch(A){}try{if("undefined"!=typeof XDomainRequest&&!S&&g)return new XDomainRequest}catch(A){}if(!p)try{return new(L[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(A){}}},2534:(ct,P,E)=>{function S(){var A;try{A=P.storage.debug}catch(_){}return!A&&"undefined"!=typeof process&&"env"in process&&(A=process.env.DEBUG),A}(P=ct.exports=E(4071)).log=function M(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},P.formatArgs=function L(A){var _=this.useColors;if(A[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+A[0]+(_?"%c ":" ")+"+"+P.humanize(this.diff),_){var t="color: "+this.color;A.splice(1,0,t,"color: inherit");var C=0,y=0;A[0].replace(/%[a-zA-Z%]/g,function(f){"%%"!==f&&(C++,"%c"===f&&(y=C))}),A.splice(y,0,t)}},P.save=function p(A){try{null==A?P.storage.removeItem("debug"):P.storage.debug=A}catch(_){}},P.load=S,P.useColors=function T(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},P.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function g(){try{return window.localStorage}catch(A){}}(),P.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],P.formatters.j=function(A){try{return JSON.stringify(A)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}},P.enable(S())},4071:(ct,P,E)=>{function L(_){var t;function C(){if(C.enabled){var y=C,f=+new Date,k=f-(t||f);y.diff=k,y.prev=t,y.curr=f,t=f;for(var N=new Array(arguments.length),J=0;J<N.length;J++)N[J]=arguments[J];N[0]=P.coerce(N[0]),"string"!=typeof N[0]&&N.unshift("%O");var D=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(tt,st){if("%%"===tt)return tt;D++;var j=P.formatters[st];return"function"==typeof j&&(tt=j.call(y,N[D]),N.splice(D,1),D--),tt}),P.formatArgs.call(y,N);var V=C.log||P.log||console.log.bind(console);V.apply(y,N)}}return C.namespace=_,C.enabled=P.enabled(_),C.useColors=P.useColors(),C.color=function T(_){var C,t=0;for(C in _)t=(t<<5)-t+_.charCodeAt(C),t|=0;return P.colors[Math.abs(t)%P.colors.length]}(_),C.destroy=M,"function"==typeof P.init&&P.init(C),P.instances.push(C),C}function M(){var _=P.instances.indexOf(this);return-1!==_&&(P.instances.splice(_,1),!0)}(P=ct.exports=L.debug=L.default=L).coerce=function A(_){return _ instanceof Error?_.stack||_.message:_},P.disable=function S(){P.enable("")},P.enable=function p(_){P.save(_),P.names=[],P.skips=[];var t,C=("string"==typeof _?_:"").split(/[\s,]+/),y=C.length;for(t=0;t<y;t++)!C[t]||("-"===(_=C[t].replace(/\*/g,".*?"))[0]?P.skips.push(new RegExp("^"+_.substr(1)+"$")):P.names.push(new RegExp("^"+_+"$")));for(t=0;t<P.instances.length;t++){var f=P.instances[t];f.enabled=P.enabled(f.namespace)}},P.enabled=function g(_){if("*"===_[_.length-1])return!0;var t,C;for(t=0,C=P.skips.length;t<C;t++)if(P.skips[t].test(_))return!1;for(t=0,C=P.names.length;t<C;t++)if(P.names[t].test(_))return!0;return!1},P.humanize=E(20),P.instances=[],P.names=[],P.skips=[],P.formatters={}},552:(ct,P,E)=>{var g,T=E(1710),L=E(988),M=E(9933),p=E(8498),S=E(8870);"undefined"!=typeof ArrayBuffer&&(g=E(390));var A="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),_="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),t=A||_;P.protocol=3;var C=P.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=T(C),f={type:"error",data:"parser error"},k=E(113);function st(j,X,ot){for(var u=new Array(j.length),ht=p(j.length,ot),gt=function(Ot,Ct,Tt){X(Ct,function(St,kt){u[Ot]=kt,Tt(St,u)})},vt=0;vt<j.length;vt++)gt(vt,j[vt],ht)}P.encodePacket=function(j,X,ot,u){"function"==typeof X&&(u=X,X=!1),"function"==typeof ot&&(u=ot,ot=null);var ht=void 0===j.data?void 0:j.data.buffer||j.data;if("undefined"!=typeof ArrayBuffer&&ht instanceof ArrayBuffer)return function J(j,X,ot){if(!X)return P.encodeBase64Packet(j,ot);var u=j.data,ht=new Uint8Array(u),gt=new Uint8Array(1+u.byteLength);gt[0]=C[j.type];for(var vt=0;vt<ht.length;vt++)gt[vt+1]=ht[vt];return ot(gt.buffer)}(j,X,u);if(void 0!==k&&ht instanceof k)return function V(j,X,ot){if(!X)return P.encodeBase64Packet(j,ot);if(t)return function D(j,X,ot){if(!X)return P.encodeBase64Packet(j,ot);var u=new FileReader;return u.onload=function(){P.encodePacket({type:j.type,data:u.result},X,!0,ot)},u.readAsArrayBuffer(j.data)}(j,X,ot);var u=new Uint8Array(1);return u[0]=C[j.type],ot(new k([u.buffer,j.data]))}(j,X,u);if(ht&&ht.base64)return function N(j,X){return X("b"+P.packets[j.type]+j.data.data)}(j,u);var gt=C[j.type];return void 0!==j.data&&(gt+=ot?S.encode(String(j.data),{strict:!1}):String(j.data)),u(""+gt)},P.encodeBase64Packet=function(j,X){var ht,ot="b"+P.packets[j.type];if(void 0!==k&&j.data instanceof k){var u=new FileReader;return u.onload=function(){var Ct=u.result.split(",")[1];X(ot+Ct)},u.readAsDataURL(j.data)}try{ht=String.fromCharCode.apply(null,new Uint8Array(j.data))}catch(Ct){for(var gt=new Uint8Array(j.data),vt=new Array(gt.length),Ot=0;Ot<gt.length;Ot++)vt[Ot]=gt[Ot];ht=String.fromCharCode.apply(null,vt)}return ot+=btoa(ht),X(ot)},P.decodePacket=function(j,X,ot){if(void 0===j)return f;if("string"==typeof j){if("b"===j.charAt(0))return P.decodeBase64Packet(j.substr(1),X);if(ot&&!1===(j=function tt(j){try{j=S.decode(j,{strict:!1})}catch(X){return!1}return j}(j)))return f;var ht=j.charAt(0);return Number(ht)==ht&&y[ht]?j.length>1?{type:y[ht],data:j.substring(1)}:{type:y[ht]}:f}ht=new Uint8Array(j)[0];var gt=M(j,1);return k&&"blob"===X&&(gt=new k([gt])),{type:y[ht],data:gt}},P.decodeBase64Packet=function(j,X){var ot=y[j.charAt(0)];if(!g)return{type:ot,data:{base64:!0,data:j.substr(1)}};var u=g.decode(j.substr(1));return"blob"===X&&k&&(u=new k([u])),{type:ot,data:u}},P.encodePayload=function(j,X,ot){"function"==typeof X&&(ot=X,X=null);var u=L(j);return X&&u?k&&!t?P.encodePayloadAsBlob(j,ot):P.encodePayloadAsArrayBuffer(j,ot):j.length?void st(j,function gt(vt,Ot){P.encodePacket(vt,!!u&&X,!1,function(Ct){Ot(null,function ht(vt){return vt.length+":"+vt}(Ct))})},function(vt,Ot){return ot(Ot.join(""))}):ot("0:")},P.decodePayload=function(j,X,ot){if("string"!=typeof j)return P.decodePayloadAsBinary(j,X,ot);var u;if("function"==typeof X&&(ot=X,X=null),""===j)return ot(f,0,1);for(var gt,vt,ht="",Ot=0,Ct=j.length;Ot<Ct;Ot++){var Tt=j.charAt(Ot);if(":"===Tt){if(""===ht||ht!=(gt=Number(ht))||ht!=(vt=j.substr(Ot+1,gt)).length)return ot(f,0,1);if(vt.length){if(u=P.decodePacket(vt,X,!1),f.type===u.type&&f.data===u.data)return ot(f,0,1);if(!1===ot(u,Ot+gt,Ct))return}Ot+=gt,ht=""}else ht+=Tt}return""!==ht?ot(f,0,1):void 0},P.encodePayloadAsArrayBuffer=function(j,X){if(!j.length)return X(new ArrayBuffer(0));st(j,function ot(u,ht){P.encodePacket(u,!0,!0,function(gt){return ht(null,gt)})},function(u,ht){var gt=ht.reduce(function(Ct,Tt){var St;return Ct+(St="string"==typeof Tt?Tt.length:Tt.byteLength).toString().length+St+2},0),vt=new Uint8Array(gt),Ot=0;return ht.forEach(function(Ct){var Tt="string"==typeof Ct,St=Ct;if(Tt){for(var Zt=new Uint8Array(Ct.length),kt=0;kt<Ct.length;kt++)Zt[kt]=Ct.charCodeAt(kt);St=Zt.buffer}vt[Ot++]=Tt?0:1;var Et=St.byteLength.toString();for(kt=0;kt<Et.length;kt++)vt[Ot++]=parseInt(Et[kt]);for(vt[Ot++]=255,Zt=new Uint8Array(St),kt=0;kt<Zt.length;kt++)vt[Ot++]=Zt[kt]}),X(vt.buffer)})},P.encodePayloadAsBlob=function(j,X){st(j,function ot(u,ht){P.encodePacket(u,!0,!0,function(gt){var vt=new Uint8Array(1);if(vt[0]=1,"string"==typeof gt){for(var Ot=new Uint8Array(gt.length),Ct=0;Ct<gt.length;Ct++)Ot[Ct]=gt.charCodeAt(Ct);gt=Ot.buffer,vt[0]=0}var St=(gt instanceof ArrayBuffer?gt.byteLength:gt.size).toString(),kt=new Uint8Array(St.length+1);for(Ct=0;Ct<St.length;Ct++)kt[Ct]=parseInt(St[Ct]);if(kt[St.length]=255,k){var Et=new k([vt.buffer,kt.buffer,gt]);ht(null,Et)}})},function(u,ht){return X(new k(ht))})},P.decodePayloadAsBinary=function(j,X,ot){"function"==typeof X&&(ot=X,X=null);for(var u=j,ht=[];u.byteLength>0;){for(var gt=new Uint8Array(u),vt=0===gt[0],Ot="",Ct=1;255!==gt[Ct];Ct++){if(Ot.length>310)return ot(f,0,1);Ot+=gt[Ct]}u=M(u,2+Ot.length),Ot=parseInt(Ot);var Tt=M(u,0,Ot);if(vt)try{Tt=String.fromCharCode.apply(null,new Uint8Array(Tt))}catch(Et){var St=new Uint8Array(Tt);for(Tt="",Ct=0;Ct<St.length;Ct++)Tt+=String.fromCharCode(St[Ct])}ht.push(Tt),u=M(u,Ot)}var kt=ht.length;ht.forEach(function(Et,Zt){ot(P.decodePacket(Et,X,!0),Zt,kt)})}},1710:ct=>{ct.exports=Object.keys||function(E){var T=[],L=Object.prototype.hasOwnProperty;for(var M in E)L.call(E,M)&&T.push(M);return T}},8870:ct=>{var _,t,C,P=String.fromCharCode;function E(f){for(var D,V,k=[],N=0,J=f.length;N<J;)(D=f.charCodeAt(N++))>=55296&&D<=56319&&N<J?56320==(64512&(V=f.charCodeAt(N++)))?k.push(((1023&D)<<10)+(1023&V)+65536):(k.push(D),N--):k.push(D);return k}function L(f,k){if(f>=55296&&f<=57343){if(k)throw Error("Lone surrogate U+"+f.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function M(f,k){return P(f>>k&63|128)}function p(f,k){if(0==(4294967168&f))return P(f);var N="";return 0==(4294965248&f)?N=P(f>>6&31|192):0==(4294901760&f)?(L(f,k)||(f=65533),N=P(f>>12&15|224),N+=M(f,6)):0==(4292870144&f)&&(N=P(f>>18&7|240),N+=M(f,12),N+=M(f,6)),N+P(63&f|128)}function g(){if(C>=t)throw Error("Invalid byte index");var f=255&_[C];if(C++,128==(192&f))return 63&f;throw Error("Invalid continuation byte")}function A(f){var k,V;if(C>t)throw Error("Invalid byte index");if(C==t)return!1;if(k=255&_[C],C++,0==(128&k))return k;if(192==(224&k)){if((V=(31&k)<<6|g())>=128)return V;throw Error("Invalid continuation byte")}if(224==(240&k)){if((V=(15&k)<<12|g()<<6|g())>=2048)return L(V,f)?V:65533;throw Error("Invalid continuation byte")}if(240==(248&k)&&(V=(7&k)<<18|g()<<12|g()<<6|g())>=65536&&V<=1114111)return V;throw Error("Invalid UTF-8 detected")}ct.exports={version:"2.1.2",encode:function S(f,k){for(var N=!1!==(k=k||{}).strict,J=E(f),D=J.length,V=-1,st="";++V<D;)st+=p(J[V],N);return st},decode:function y(f,k){var N=!1!==(k=k||{}).strict;_=E(f),t=_.length,C=0;for(var D,J=[];!1!==(D=A(N));)J.push(D);return function T(f){for(var J,k=f.length,N=-1,D="";++N<k;)(J=f[N])>65535&&(D+=P((J-=65536)>>>10&1023|55296),J=56320|1023&J),D+=P(J);return D}(J)}}},20:ct=>{var P=1e3,E=60*P,T=60*E,L=24*T;function A(_,t,C){if(!(_<t))return _<1.5*t?Math.floor(_/t)+" "+C:Math.ceil(_/t)+" "+C+"s"}ct.exports=function(_,t){t=t||{};var C=typeof _;if("string"===C&&_.length>0)return function p(_){if(!((_=String(_)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(_);if(t){var C=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*C;case"days":case"day":case"d":return C*L;case"hours":case"hour":case"hrs":case"hr":case"h":return C*T;case"minutes":case"minute":case"mins":case"min":case"m":return C*E;case"seconds":case"second":case"secs":case"sec":case"s":return C*P;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}}(_);if("number"===C&&!1===isNaN(_))return t.long?function g(_){return A(_,L,"day")||A(_,T,"hour")||A(_,E,"minute")||A(_,P,"second")||_+" ms"}(_):function S(_){return _>=L?Math.round(_/L)+"d":_>=T?Math.round(_/T)+"h":_>=E?Math.round(_/E)+"m":_>=P?Math.round(_/P)+"s":_+"ms"}(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))}},988:(ct,P,E)=>{var T=E(7822),L=Object.prototype.toString,M="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===L.call(Blob),p="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===L.call(File);ct.exports=function S(g){if(!g||"object"!=typeof g)return!1;if(T(g)){for(var A=0,_=g.length;A<_;A++)if(S(g[A]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(g)||"function"==typeof ArrayBuffer&&g instanceof ArrayBuffer||M&&g instanceof Blob||p&&g instanceof File)return!0;if(g.toJSON&&"function"==typeof g.toJSON&&1===arguments.length)return S(g.toJSON(),!0);for(var t in g)if(Object.prototype.hasOwnProperty.call(g,t)&&S(g[t]))return!0;return!1}},7822:ct=>{var P={}.toString;ct.exports=Array.isArray||function(E){return"[object Array]"==P.call(E)}},764:ct=>{try{ct.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(P){ct.exports=!1}},4068:ct=>{var P=[].indexOf;ct.exports=function(E,T){if(P)return E.indexOf(T);for(var L=0;L<E.length;++L)if(E[L]===T)return L;return-1}},8259:function(ct,P){var T;!function(L,M){"use strict";"object"==typeof ct.exports?ct.exports=L.document?M(L,!0):function(p){if(!p.document)throw new Error("jQuery requires a window with a document");return M(p)}:M(L)}("undefined"!=typeof window?window:this,function(L,M){"use strict";var p=[],S=Object.getPrototypeOf,g=p.slice,A=p.flat?function(r){return p.flat.call(r)}:function(r){return p.concat.apply([],r)},_=p.push,t=p.indexOf,C={},y=C.toString,f=C.hasOwnProperty,k=f.toString,N=k.call(Object),J={},D=function(c){return"function"==typeof c&&"number"!=typeof c.nodeType&&"function"!=typeof c.item},V=function(c){return null!=c&&c===c.window},tt=L.document,st={type:!0,src:!0,nonce:!0,noModule:!0};function j(r,c,d){var h,b,x=(d=d||tt).createElement("script");if(x.text=r,c)for(h in st)(b=c[h]||c.getAttribute&&c.getAttribute(h))&&x.setAttribute(h,b);d.head.appendChild(x).parentNode.removeChild(x)}function X(r){return null==r?r+"":"object"==typeof r||"function"==typeof r?C[y.call(r)]||"object":typeof r}var u=function(r,c){return new u.fn.init(r,c)};function ht(r){var c=!!r&&"length"in r&&r.length,d=X(r);return!D(r)&&!V(r)&&("array"===d||0===c||"number"==typeof c&&c>0&&c-1 in r)}u.fn=u.prototype={jquery:"3.6.0",constructor:u,length:0,toArray:function(){return g.call(this)},get:function(r){return null==r?g.call(this):r<0?this[r+this.length]:this[r]},pushStack:function(r){var c=u.merge(this.constructor(),r);return c.prevObject=this,c},each:function(r){return u.each(this,r)},map:function(r){return this.pushStack(u.map(this,function(c,d){return r.call(c,d,c)}))},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(u.grep(this,function(r,c){return(c+1)%2}))},odd:function(){return this.pushStack(u.grep(this,function(r,c){return c%2}))},eq:function(r){var c=this.length,d=+r+(r<0?c:0);return this.pushStack(d>=0&&d<c?[this[d]]:[])},end:function(){return this.prevObject||this.constructor()},push:_,sort:p.sort,splice:p.splice},u.extend=u.fn.extend=function(){var r,c,d,h,b,x,w=arguments[0]||{},F=1,I=arguments.length,W=!1;for("boolean"==typeof w&&(W=w,w=arguments[F]||{},F++),"object"!=typeof w&&!D(w)&&(w={}),F===I&&(w=this,F--);F<I;F++)if(null!=(r=arguments[F]))for(c in r)h=r[c],"__proto__"!==c&&w!==h&&(W&&h&&(u.isPlainObject(h)||(b=Array.isArray(h)))?(d=w[c],x=b&&!Array.isArray(d)?[]:b||u.isPlainObject(d)?d:{},b=!1,w[c]=u.extend(W,x,h)):void 0!==h&&(w[c]=h));return w},u.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(r){throw new Error(r)},noop:function(){},isPlainObject:function(r){var c,d;return!(!r||"[object Object]"!==y.call(r)||(c=S(r))&&("function"!=typeof(d=f.call(c,"constructor")&&c.constructor)||k.call(d)!==N))},isEmptyObject:function(r){var c;for(c in r)return!1;return!0},globalEval:function(r,c,d){j(r,{nonce:c&&c.nonce},d)},each:function(r,c){var d,h=0;if(ht(r))for(d=r.length;h<d&&!1!==c.call(r[h],h,r[h]);h++);else for(h in r)if(!1===c.call(r[h],h,r[h]))break;return r},makeArray:function(r,c){var d=c||[];return null!=r&&(ht(Object(r))?u.merge(d,"string"==typeof r?[r]:r):_.call(d,r)),d},inArray:function(r,c,d){return null==c?-1:t.call(c,r,d)},merge:function(r,c){for(var d=+c.length,h=0,b=r.length;h<d;h++)r[b++]=c[h];return r.length=b,r},grep:function(r,c,d){for(var b=[],x=0,w=r.length,F=!d;x<w;x++)!c(r[x],x)!==F&&b.push(r[x]);return b},map:function(r,c,d){var h,b,x=0,w=[];if(ht(r))for(h=r.length;x<h;x++)null!=(b=c(r[x],x,d))&&w.push(b);else for(x in r)null!=(b=c(r[x],x,d))&&w.push(b);return A(w)},guid:1,support:J}),"function"==typeof Symbol&&(u.fn[Symbol.iterator]=p[Symbol.iterator]),u.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(r,c){C["[object "+c+"]"]=c.toLowerCase()});var gt=function(r){var c,d,h,b,x,w,F,I,W,z,rt,Y,et,ft,Pt,_t,Xt,Gt,le,Jt="sizzle"+1*new Date,Mt=r.document,re=0,qt=0,Rt=ro(),Ye=ro(),io=ro(),de=ro(),Se=function(O,q){return O===q&&(rt=!0),0},Ae={}.hasOwnProperty,ae=[],ke=ae.pop,ge=ae.push,Oe=ae.push,li=ae.slice,Ze=function(O,q){for(var B=0,it=O.length;B<it;B++)if(O[B]===q)return B;return-1},ko="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ut="[\\x20\\t\\r\\n\\f]",Ee="(?:\\\\[\\da-fA-F]{1,6}"+Ut+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",di="\\["+Ut+"*("+Ee+")(?:"+Ut+"*([*^$|!~]?=)"+Ut+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ee+"))|)"+Ut+"*\\]",Oo=":("+Ee+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+di+")*)|.*)\\)|)",ln=new RegExp(Ut+"+","g"),no=new RegExp("^"+Ut+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ut+"+$","g"),dn=new RegExp("^"+Ut+"*,"+Ut+"*"),pi=new RegExp("^"+Ut+"*([>+~]|"+Ut+")"+Ut+"*"),pn=new RegExp(Ut+"|>"),un=new RegExp(Oo),hn=new RegExp("^"+Ee+"$"),so={ID:new RegExp("^#("+Ee+")"),CLASS:new RegExp("^\\.("+Ee+")"),TAG:new RegExp("^("+Ee+"|[*])"),ATTR:new RegExp("^"+di),PSEUDO:new RegExp("^"+Oo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ut+"*(even|odd|(([+-]|)(\\d*)n|)"+Ut+"*(?:([+-]|)"+Ut+"*(\\d+)|))"+Ut+"*\\)|)","i"),bool:new RegExp("^(?:"+ko+")$","i"),needsContext:new RegExp("^"+Ut+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ut+"*((?:-\\d)?\\d*)"+Ut+"*\\)|)(?=[^-]|$)","i")},gn=/HTML$/i,fn=/^(?:input|select|textarea|button)$/i,_n=/^h\d$/i,ze=/^[^{]+\{\s*\[native \w/,mn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,To=/[+~]/,Ce=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ut+"?|\\\\([^\\r\\n\\f])","g"),we=function(O,q){var B="0x"+O.slice(1)-65536;return q||(B<0?String.fromCharCode(B+65536):String.fromCharCode(B>>10|55296,1023&B|56320))},ui=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,hi=function(O,q){return q?"\0"===O?"\ufffd":O.slice(0,-1)+"\\"+O.charCodeAt(O.length-1).toString(16)+" ":"\\"+O},gi=function(){Y()},vn=co(function(O){return!0===O.disabled&&"fieldset"===O.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Oe.apply(ae=li.call(Mt.childNodes),Mt.childNodes)}catch(O){Oe={apply:ae.length?function(q,B){ge.apply(q,li.call(B))}:function(q,B){for(var it=q.length,Q=0;q[it++]=B[Q++];);q.length=it-1}}}function Ht(O,q,B,it){var Q,nt,at,dt,pt,xt,bt,wt=q&&q.ownerDocument,Nt=q?q.nodeType:9;if(B=B||[],"string"!=typeof O||!O||1!==Nt&&9!==Nt&&11!==Nt)return B;if(!it&&(Y(q),q=q||et,Pt)){if(11!==Nt&&(pt=mn.exec(O)))if(Q=pt[1]){if(9===Nt){if(!(at=q.getElementById(Q)))return B;if(at.id===Q)return B.push(at),B}else if(wt&&(at=wt.getElementById(Q))&&le(q,at)&&at.id===Q)return B.push(at),B}else{if(pt[2])return Oe.apply(B,q.getElementsByTagName(O)),B;if((Q=pt[3])&&d.getElementsByClassName&&q.getElementsByClassName)return Oe.apply(B,q.getElementsByClassName(Q)),B}if(d.qsa&&!de[O+" "]&&(!_t||!_t.test(O))&&(1!==Nt||"object"!==q.nodeName.toLowerCase())){if(bt=O,wt=q,1===Nt&&(pn.test(O)||pi.test(O))){for(((wt=To.test(O)&&Po(q.parentNode)||q)!==q||!d.scope)&&((dt=q.getAttribute("id"))?dt=dt.replace(ui,hi):q.setAttribute("id",dt=Jt)),nt=(xt=w(O)).length;nt--;)xt[nt]=(dt?"#"+dt:":scope")+" "+ao(xt[nt]);bt=xt.join(",")}try{return Oe.apply(B,wt.querySelectorAll(bt)),B}catch(Bt){de(O,!0)}finally{dt===Jt&&q.removeAttribute("id")}}}return I(O.replace(no,"$1"),q,B,it)}function ro(){var O=[];return function q(B,it){return O.push(B+" ")>h.cacheLength&&delete q[O.shift()],q[B+" "]=it}}function me(O){return O[Jt]=!0,O}function ve(O){var q=et.createElement("fieldset");try{return!!O(q)}catch(B){return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function Mo(O,q){for(var B=O.split("|"),it=B.length;it--;)h.attrHandle[B[it]]=q}function fi(O,q){var B=q&&O,it=B&&1===O.nodeType&&1===q.nodeType&&O.sourceIndex-q.sourceIndex;if(it)return it;if(B)for(;B=B.nextSibling;)if(B===q)return-1;return O?1:-1}function bn(O){return function(q){return"input"===q.nodeName.toLowerCase()&&q.type===O}}function xn(O){return function(q){var B=q.nodeName.toLowerCase();return("input"===B||"button"===B)&&q.type===O}}function _i(O){return function(q){return"form"in q?q.parentNode&&!1===q.disabled?"label"in q?"label"in q.parentNode?q.parentNode.disabled===O:q.disabled===O:q.isDisabled===O||q.isDisabled!==!O&&vn(q)===O:q.disabled===O:"label"in q&&q.disabled===O}}function Ne(O){return me(function(q){return q=+q,me(function(B,it){for(var Q,nt=O([],B.length,q),at=nt.length;at--;)B[Q=nt[at]]&&(B[Q]=!(it[Q]=B[Q]))})})}function Po(O){return O&&void 0!==O.getElementsByTagName&&O}for(c in d=Ht.support={},x=Ht.isXML=function(O){var B=O&&(O.ownerDocument||O).documentElement;return!gn.test(O&&O.namespaceURI||B&&B.nodeName||"HTML")},Y=Ht.setDocument=function(O){var q,B,it=O?O.ownerDocument||O:Mt;return it==et||9!==it.nodeType||!it.documentElement||(ft=(et=it).documentElement,Pt=!x(et),Mt!=et&&(B=et.defaultView)&&B.top!==B&&(B.addEventListener?B.addEventListener("unload",gi,!1):B.attachEvent&&B.attachEvent("onunload",gi)),d.scope=ve(function(Q){return ft.appendChild(Q).appendChild(et.createElement("div")),void 0!==Q.querySelectorAll&&!Q.querySelectorAll(":scope fieldset div").length}),d.attributes=ve(function(Q){return Q.className="i",!Q.getAttribute("className")}),d.getElementsByTagName=ve(function(Q){return Q.appendChild(et.createComment("")),!Q.getElementsByTagName("*").length}),d.getElementsByClassName=ze.test(et.getElementsByClassName),d.getById=ve(function(Q){return ft.appendChild(Q).id=Jt,!et.getElementsByName||!et.getElementsByName(Jt).length}),d.getById?(h.filter.ID=function(Q){var nt=Q.replace(Ce,we);return function(at){return at.getAttribute("id")===nt}},h.find.ID=function(Q,nt){if(void 0!==nt.getElementById&&Pt){var at=nt.getElementById(Q);return at?[at]:[]}}):(h.filter.ID=function(Q){var nt=Q.replace(Ce,we);return function(at){var dt=void 0!==at.getAttributeNode&&at.getAttributeNode("id");return dt&&dt.value===nt}},h.find.ID=function(Q,nt){if(void 0!==nt.getElementById&&Pt){var at,dt,pt,xt=nt.getElementById(Q);if(xt){if((at=xt.getAttributeNode("id"))&&at.value===Q)return[xt];for(pt=nt.getElementsByName(Q),dt=0;xt=pt[dt++];)if((at=xt.getAttributeNode("id"))&&at.value===Q)return[xt]}return[]}}),h.find.TAG=d.getElementsByTagName?function(Q,nt){return void 0!==nt.getElementsByTagName?nt.getElementsByTagName(Q):d.qsa?nt.querySelectorAll(Q):void 0}:function(Q,nt){var at,dt=[],pt=0,xt=nt.getElementsByTagName(Q);if("*"===Q){for(;at=xt[pt++];)1===at.nodeType&&dt.push(at);return dt}return xt},h.find.CLASS=d.getElementsByClassName&&function(Q,nt){if(void 0!==nt.getElementsByClassName&&Pt)return nt.getElementsByClassName(Q)},Xt=[],_t=[],(d.qsa=ze.test(et.querySelectorAll))&&(ve(function(Q){var nt;ft.appendChild(Q).innerHTML="<a id='"+Jt+"'></a><select id='"+Jt+"-\r\\' msallowcapture=''><option selected=''></option></select>",Q.querySelectorAll("[msallowcapture^='']").length&&_t.push("[*^$]="+Ut+"*(?:''|\"\")"),Q.querySelectorAll("[selected]").length||_t.push("\\["+Ut+"*(?:value|"+ko+")"),Q.querySelectorAll("[id~="+Jt+"-]").length||_t.push("~="),(nt=et.createElement("input")).setAttribute("name",""),Q.appendChild(nt),Q.querySelectorAll("[name='']").length||_t.push("\\["+Ut+"*name"+Ut+"*="+Ut+"*(?:''|\"\")"),Q.querySelectorAll(":checked").length||_t.push(":checked"),Q.querySelectorAll("a#"+Jt+"+*").length||_t.push(".#.+[+~]"),Q.querySelectorAll("\\\f"),_t.push("[\\r\\n\\f]")}),ve(function(Q){Q.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var nt=et.createElement("input");nt.setAttribute("type","hidden"),Q.appendChild(nt).setAttribute("name","D"),Q.querySelectorAll("[name=d]").length&&_t.push("name"+Ut+"*[*^$|!~]?="),2!==Q.querySelectorAll(":enabled").length&&_t.push(":enabled",":disabled"),ft.appendChild(Q).disabled=!0,2!==Q.querySelectorAll(":disabled").length&&_t.push(":enabled",":disabled"),Q.querySelectorAll("*,:x"),_t.push(",.*:")})),(d.matchesSelector=ze.test(Gt=ft.matches||ft.webkitMatchesSelector||ft.mozMatchesSelector||ft.oMatchesSelector||ft.msMatchesSelector))&&ve(function(Q){d.disconnectedMatch=Gt.call(Q,"*"),Gt.call(Q,"[s!='']:x"),Xt.push("!=",Oo)}),_t=_t.length&&new RegExp(_t.join("|")),Xt=Xt.length&&new RegExp(Xt.join("|")),q=ze.test(ft.compareDocumentPosition),le=q||ze.test(ft.contains)?function(Q,nt){var at=9===Q.nodeType?Q.documentElement:Q,dt=nt&&nt.parentNode;return Q===dt||!(!dt||1!==dt.nodeType||!(at.contains?at.contains(dt):Q.compareDocumentPosition&&16&Q.compareDocumentPosition(dt)))}:function(Q,nt){if(nt)for(;nt=nt.parentNode;)if(nt===Q)return!0;return!1},Se=q?function(Q,nt){if(Q===nt)return rt=!0,0;var at=!Q.compareDocumentPosition-!nt.compareDocumentPosition;return at||(1&(at=(Q.ownerDocument||Q)==(nt.ownerDocument||nt)?Q.compareDocumentPosition(nt):1)||!d.sortDetached&&nt.compareDocumentPosition(Q)===at?Q==et||Q.ownerDocument==Mt&&le(Mt,Q)?-1:nt==et||nt.ownerDocument==Mt&&le(Mt,nt)?1:z?Ze(z,Q)-Ze(z,nt):0:4&at?-1:1)}:function(Q,nt){if(Q===nt)return rt=!0,0;var at,dt=0,pt=Q.parentNode,xt=nt.parentNode,bt=[Q],wt=[nt];if(!pt||!xt)return Q==et?-1:nt==et?1:pt?-1:xt?1:z?Ze(z,Q)-Ze(z,nt):0;if(pt===xt)return fi(Q,nt);for(at=Q;at=at.parentNode;)bt.unshift(at);for(at=nt;at=at.parentNode;)wt.unshift(at);for(;bt[dt]===wt[dt];)dt++;return dt?fi(bt[dt],wt[dt]):bt[dt]==Mt?-1:wt[dt]==Mt?1:0}),et},Ht.matches=function(O,q){return Ht(O,null,null,q)},Ht.matchesSelector=function(O,q){if(Y(O),d.matchesSelector&&Pt&&!de[q+" "]&&(!Xt||!Xt.test(q))&&(!_t||!_t.test(q)))try{var B=Gt.call(O,q);if(B||d.disconnectedMatch||O.document&&11!==O.document.nodeType)return B}catch(it){de(q,!0)}return Ht(q,et,null,[O]).length>0},Ht.contains=function(O,q){return(O.ownerDocument||O)!=et&&Y(O),le(O,q)},Ht.attr=function(O,q){(O.ownerDocument||O)!=et&&Y(O);var B=h.attrHandle[q.toLowerCase()],it=B&&Ae.call(h.attrHandle,q.toLowerCase())?B(O,q,!Pt):void 0;return void 0!==it?it:d.attributes||!Pt?O.getAttribute(q):(it=O.getAttributeNode(q))&&it.specified?it.value:null},Ht.escape=function(O){return(O+"").replace(ui,hi)},Ht.error=function(O){throw new Error("Syntax error, unrecognized expression: "+O)},Ht.uniqueSort=function(O){var q,B=[],it=0,Q=0;if(rt=!d.detectDuplicates,z=!d.sortStable&&O.slice(0),O.sort(Se),rt){for(;q=O[Q++];)q===O[Q]&&(it=B.push(Q));for(;it--;)O.splice(B[it],1)}return z=null,O},b=Ht.getText=function(O){var q,B="",it=0,Q=O.nodeType;if(Q){if(1===Q||9===Q||11===Q){if("string"==typeof O.textContent)return O.textContent;for(O=O.firstChild;O;O=O.nextSibling)B+=b(O)}else if(3===Q||4===Q)return O.nodeValue}else for(;q=O[it++];)B+=b(q);return B},(h=Ht.selectors={cacheLength:50,createPseudo:me,match:so,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(O){return O[1]=O[1].replace(Ce,we),O[3]=(O[3]||O[4]||O[5]||"").replace(Ce,we),"~="===O[2]&&(O[3]=" "+O[3]+" "),O.slice(0,4)},CHILD:function(O){return O[1]=O[1].toLowerCase(),"nth"===O[1].slice(0,3)?(O[3]||Ht.error(O[0]),O[4]=+(O[4]?O[5]+(O[6]||1):2*("even"===O[3]||"odd"===O[3])),O[5]=+(O[7]+O[8]||"odd"===O[3])):O[3]&&Ht.error(O[0]),O},PSEUDO:function(O){var q,B=!O[6]&&O[2];return so.CHILD.test(O[0])?null:(O[3]?O[2]=O[4]||O[5]||"":B&&un.test(B)&&(q=w(B,!0))&&(q=B.indexOf(")",B.length-q)-B.length)&&(O[0]=O[0].slice(0,q),O[2]=B.slice(0,q)),O.slice(0,3))}},filter:{TAG:function(O){var q=O.replace(Ce,we).toLowerCase();return"*"===O?function(){return!0}:function(B){return B.nodeName&&B.nodeName.toLowerCase()===q}},CLASS:function(O){var q=Rt[O+" "];return q||(q=new RegExp("(^|"+Ut+")"+O+"("+Ut+"|$)"))&&Rt(O,function(B){return q.test("string"==typeof B.className&&B.className||void 0!==B.getAttribute&&B.getAttribute("class")||"")})},ATTR:function(O,q,B){return function(it){var Q=Ht.attr(it,O);return null==Q?"!="===q:!q||(Q+="","="===q?Q===B:"!="===q?Q!==B:"^="===q?B&&0===Q.indexOf(B):"*="===q?B&&Q.indexOf(B)>-1:"$="===q?B&&Q.slice(-B.length)===B:"~="===q?(" "+Q.replace(ln," ")+" ").indexOf(B)>-1:"|="===q&&(Q===B||Q.slice(0,B.length+1)===B+"-"))}},CHILD:function(O,q,B,it,Q){var nt="nth"!==O.slice(0,3),at="last"!==O.slice(-4),dt="of-type"===q;return 1===it&&0===Q?function(pt){return!!pt.parentNode}:function(pt,xt,bt){var wt,Nt,Bt,yt,Kt,ie,pe=nt!==at?"nextSibling":"previousSibling",Vt=pt.parentNode,Ge=dt&&pt.nodeName.toLowerCase(),$e=!bt&&!dt,ue=!1;if(Vt){if(nt){for(;pe;){for(yt=pt;yt=yt[pe];)if(dt?yt.nodeName.toLowerCase()===Ge:1===yt.nodeType)return!1;ie=pe="only"===O&&!ie&&"nextSibling"}return!0}if(ie=[at?Vt.firstChild:Vt.lastChild],at&&$e){for(ue=(Kt=(wt=(Nt=(Bt=(yt=Vt)[Jt]||(yt[Jt]={}))[yt.uniqueID]||(Bt[yt.uniqueID]={}))[O]||[])[0]===re&&wt[1])&&wt[2],yt=Kt&&Vt.childNodes[Kt];yt=++Kt&&yt&&yt[pe]||(ue=Kt=0)||ie.pop();)if(1===yt.nodeType&&++ue&&yt===pt){Nt[O]=[re,Kt,ue];break}}else if($e&&(ue=Kt=(wt=(Nt=(Bt=(yt=pt)[Jt]||(yt[Jt]={}))[yt.uniqueID]||(Bt[yt.uniqueID]={}))[O]||[])[0]===re&&wt[1]),!1===ue)for(;(yt=++Kt&&yt&&yt[pe]||(ue=Kt=0)||ie.pop())&&((dt?yt.nodeName.toLowerCase()!==Ge:1!==yt.nodeType)||!++ue||($e&&((Nt=(Bt=yt[Jt]||(yt[Jt]={}))[yt.uniqueID]||(Bt[yt.uniqueID]={}))[O]=[re,ue]),yt!==pt)););return(ue-=Q)===it||ue%it==0&&ue/it>=0}}},PSEUDO:function(O,q){var B,it=h.pseudos[O]||h.setFilters[O.toLowerCase()]||Ht.error("unsupported pseudo: "+O);return it[Jt]?it(q):it.length>1?(B=[O,O,"",q],h.setFilters.hasOwnProperty(O.toLowerCase())?me(function(Q,nt){for(var at,dt=it(Q,q),pt=dt.length;pt--;)Q[at=Ze(Q,dt[pt])]=!(nt[at]=dt[pt])}):function(Q){return it(Q,0,B)}):it}},pseudos:{not:me(function(O){var q=[],B=[],it=F(O.replace(no,"$1"));return it[Jt]?me(function(Q,nt,at,dt){for(var pt,xt=it(Q,null,dt,[]),bt=Q.length;bt--;)(pt=xt[bt])&&(Q[bt]=!(nt[bt]=pt))}):function(Q,nt,at){return q[0]=Q,it(q,null,at,B),q[0]=null,!B.pop()}}),has:me(function(O){return function(q){return Ht(O,q).length>0}}),contains:me(function(O){return O=O.replace(Ce,we),function(q){return(q.textContent||b(q)).indexOf(O)>-1}}),lang:me(function(O){return hn.test(O||"")||Ht.error("unsupported lang: "+O),O=O.replace(Ce,we).toLowerCase(),function(q){var B;do{if(B=Pt?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return(B=B.toLowerCase())===O||0===B.indexOf(O+"-")}while((q=q.parentNode)&&1===q.nodeType);return!1}}),target:function(O){var q=r.location&&r.location.hash;return q&&q.slice(1)===O.id},root:function(O){return O===ft},focus:function(O){return O===et.activeElement&&(!et.hasFocus||et.hasFocus())&&!!(O.type||O.href||~O.tabIndex)},enabled:_i(!1),disabled:_i(!0),checked:function(O){var q=O.nodeName.toLowerCase();return"input"===q&&!!O.checked||"option"===q&&!!O.selected},selected:function(O){return!0===O.selected},empty:function(O){for(O=O.firstChild;O;O=O.nextSibling)if(O.nodeType<6)return!1;return!0},parent:function(O){return!h.pseudos.empty(O)},header:function(O){return _n.test(O.nodeName)},input:function(O){return fn.test(O.nodeName)},button:function(O){var q=O.nodeName.toLowerCase();return"input"===q&&"button"===O.type||"button"===q},text:function(O){var q;return"input"===O.nodeName.toLowerCase()&&"text"===O.type&&(null==(q=O.getAttribute("type"))||"text"===q.toLowerCase())},first:Ne(function(){return[0]}),last:Ne(function(O,q){return[q-1]}),eq:Ne(function(O,q,B){return[B<0?B+q:B]}),even:Ne(function(O,q){for(var B=0;B<q;B+=2)O.push(B);return O}),odd:Ne(function(O,q){for(var B=1;B<q;B+=2)O.push(B);return O}),lt:Ne(function(O,q,B){for(var it=B<0?B+q:B>q?q:B;--it>=0;)O.push(it);return O}),gt:Ne(function(O,q,B){for(var it=B<0?B+q:B;++it<q;)O.push(it);return O})}}).pseudos.nth=h.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[c]=bn(c);for(c in{submit:!0,reset:!0})h.pseudos[c]=xn(c);function mi(){}function ao(O){for(var q=0,B=O.length,it="";q<B;q++)it+=O[q].value;return it}function co(O,q,B){var it=q.dir,Q=q.next,nt=Q||it,at=B&&"parentNode"===nt,dt=qt++;return q.first?function(pt,xt,bt){for(;pt=pt[it];)if(1===pt.nodeType||at)return O(pt,xt,bt);return!1}:function(pt,xt,bt){var wt,Nt,Bt,yt=[re,dt];if(bt){for(;pt=pt[it];)if((1===pt.nodeType||at)&&O(pt,xt,bt))return!0}else for(;pt=pt[it];)if(1===pt.nodeType||at)if(Nt=(Bt=pt[Jt]||(pt[Jt]={}))[pt.uniqueID]||(Bt[pt.uniqueID]={}),Q&&Q===pt.nodeName.toLowerCase())pt=pt[it]||pt;else{if((wt=Nt[nt])&&wt[0]===re&&wt[1]===dt)return yt[2]=wt[2];if(Nt[nt]=yt,yt[2]=O(pt,xt,bt))return!0}return!1}}function So(O){return O.length>1?function(q,B,it){for(var Q=O.length;Q--;)if(!O[Q](q,B,it))return!1;return!0}:O[0]}function lo(O,q,B,it,Q){for(var nt,at=[],dt=0,pt=O.length,xt=null!=q;dt<pt;dt++)(nt=O[dt])&&(!B||B(nt,it,Q))&&(at.push(nt),xt&&q.push(dt));return at}function Ao(O,q,B,it,Q,nt){return it&&!it[Jt]&&(it=Ao(it)),Q&&!Q[Jt]&&(Q=Ao(Q,nt)),me(function(at,dt,pt,xt){var bt,wt,Nt,Bt=[],yt=[],Kt=dt.length,ie=at||function yn(O,q,B){for(var it=0,Q=q.length;it<Q;it++)Ht(O,q[it],B);return B}(q||"*",pt.nodeType?[pt]:pt,[]),pe=!O||!at&&q?ie:lo(ie,Bt,O,pt,xt),Vt=B?Q||(at?O:Kt||it)?[]:dt:pe;if(B&&B(pe,Vt,pt,xt),it)for(bt=lo(Vt,yt),it(bt,[],pt,xt),wt=bt.length;wt--;)(Nt=bt[wt])&&(Vt[yt[wt]]=!(pe[yt[wt]]=Nt));if(at){if(Q||O){if(Q){for(bt=[],wt=Vt.length;wt--;)(Nt=Vt[wt])&&bt.push(pe[wt]=Nt);Q(null,Vt=[],bt,xt)}for(wt=Vt.length;wt--;)(Nt=Vt[wt])&&(bt=Q?Ze(at,Nt):Bt[wt])>-1&&(at[bt]=!(dt[bt]=Nt))}}else Vt=lo(Vt===dt?Vt.splice(Kt,Vt.length):Vt),Q?Q(null,dt,Vt,xt):Oe.apply(dt,Vt)})}function Zo(O){for(var q,B,it,Q=O.length,nt=h.relative[O[0].type],at=nt||h.relative[" "],dt=nt?1:0,pt=co(function(wt){return wt===q},at,!0),xt=co(function(wt){return Ze(q,wt)>-1},at,!0),bt=[function(wt,Nt,Bt){var yt=!nt&&(Bt||Nt!==W)||((q=Nt).nodeType?pt(wt,Nt,Bt):xt(wt,Nt,Bt));return q=null,yt}];dt<Q;dt++)if(B=h.relative[O[dt].type])bt=[co(So(bt),B)];else{if((B=h.filter[O[dt].type].apply(null,O[dt].matches))[Jt]){for(it=++dt;it<Q&&!h.relative[O[it].type];it++);return Ao(dt>1&&So(bt),dt>1&&ao(O.slice(0,dt-1).concat({value:" "===O[dt-2].type?"*":""})).replace(no,"$1"),B,dt<it&&Zo(O.slice(dt,it)),it<Q&&Zo(O=O.slice(it)),it<Q&&ao(O))}bt.push(B)}return So(bt)}return mi.prototype=h.filters=h.pseudos,h.setFilters=new mi,w=Ht.tokenize=function(O,q){var B,it,Q,nt,at,dt,pt,xt=Ye[O+" "];if(xt)return q?0:xt.slice(0);for(at=O,dt=[],pt=h.preFilter;at;){for(nt in(!B||(it=dn.exec(at)))&&(it&&(at=at.slice(it[0].length)||at),dt.push(Q=[])),B=!1,(it=pi.exec(at))&&(B=it.shift(),Q.push({value:B,type:it[0].replace(no," ")}),at=at.slice(B.length)),h.filter)(it=so[nt].exec(at))&&(!pt[nt]||(it=pt[nt](it)))&&(B=it.shift(),Q.push({value:B,type:nt,matches:it}),at=at.slice(B.length));if(!B)break}return q?at.length:at?Ht.error(O):Ye(O,dt).slice(0)},F=Ht.compile=function(O,q){var B,it=[],Q=[],nt=io[O+" "];if(!nt){for(q||(q=w(O)),B=q.length;B--;)(nt=Zo(q[B]))[Jt]?it.push(nt):Q.push(nt);nt=io(O,function Cn(O,q){var B=q.length>0,it=O.length>0,Q=function(nt,at,dt,pt,xt){var bt,wt,Nt,Bt=0,yt="0",Kt=nt&&[],ie=[],pe=W,Vt=nt||it&&h.find.TAG("*",xt),Ge=re+=null==pe?1:Math.random()||.1,$e=Vt.length;for(xt&&(W=at==et||at||xt);yt!==$e&&null!=(bt=Vt[yt]);yt++){if(it&&bt){for(wt=0,!at&&bt.ownerDocument!=et&&(Y(bt),dt=!Pt);Nt=O[wt++];)if(Nt(bt,at||et,dt)){pt.push(bt);break}xt&&(re=Ge)}B&&((bt=!Nt&&bt)&&Bt--,nt&&Kt.push(bt))}if(Bt+=yt,B&&yt!==Bt){for(wt=0;Nt=q[wt++];)Nt(Kt,ie,at,dt);if(nt){if(Bt>0)for(;yt--;)Kt[yt]||ie[yt]||(ie[yt]=ke.call(pt));ie=lo(ie)}Oe.apply(pt,ie),xt&&!nt&&ie.length>0&&Bt+q.length>1&&Ht.uniqueSort(pt)}return xt&&(re=Ge,W=pe),Kt};return B?me(Q):Q}(Q,it)),nt.selector=O}return nt},I=Ht.select=function(O,q,B,it){var Q,nt,at,dt,pt,xt="function"==typeof O&&O,bt=!it&&w(O=xt.selector||O);if(B=B||[],1===bt.length){if((nt=bt[0]=bt[0].slice(0)).length>2&&"ID"===(at=nt[0]).type&&9===q.nodeType&&Pt&&h.relative[nt[1].type]){if(!(q=(h.find.ID(at.matches[0].replace(Ce,we),q)||[])[0]))return B;xt&&(q=q.parentNode),O=O.slice(nt.shift().value.length)}for(Q=so.needsContext.test(O)?0:nt.length;Q--&&!h.relative[dt=(at=nt[Q]).type];)if((pt=h.find[dt])&&(it=pt(at.matches[0].replace(Ce,we),To.test(nt[0].type)&&Po(q.parentNode)||q))){if(nt.splice(Q,1),!(O=it.length&&ao(nt)))return Oe.apply(B,it),B;break}}return(xt||F(O,bt))(it,q,!Pt,B,!q||To.test(O)&&Po(q.parentNode)||q),B},d.sortStable=Jt.split("").sort(Se).join("")===Jt,d.detectDuplicates=!!rt,Y(),d.sortDetached=ve(function(O){return 1&O.compareDocumentPosition(et.createElement("fieldset"))}),ve(function(O){return O.innerHTML="<a href='#'></a>","#"===O.firstChild.getAttribute("href")})||Mo("type|href|height|width",function(O,q,B){if(!B)return O.getAttribute(q,"type"===q.toLowerCase()?1:2)}),(!d.attributes||!ve(function(O){return O.innerHTML="<input/>",O.firstChild.setAttribute("value",""),""===O.firstChild.getAttribute("value")}))&&Mo("value",function(O,q,B){if(!B&&"input"===O.nodeName.toLowerCase())return O.defaultValue}),ve(function(O){return null==O.getAttribute("disabled")})||Mo(ko,function(O,q,B){var it;if(!B)return!0===O[q]?q.toLowerCase():(it=O.getAttributeNode(q))&&it.specified?it.value:null}),Ht}(L);u.find=gt,u.expr=gt.selectors,u.expr[":"]=u.expr.pseudos,u.uniqueSort=u.unique=gt.uniqueSort,u.text=gt.getText,u.isXMLDoc=gt.isXML,u.contains=gt.contains,u.escapeSelector=gt.escape;var vt=function(r,c,d){for(var h=[],b=void 0!==d;(r=r[c])&&9!==r.nodeType;)if(1===r.nodeType){if(b&&u(r).is(d))break;h.push(r)}return h},Ot=function(r,c){for(var d=[];r;r=r.nextSibling)1===r.nodeType&&r!==c&&d.push(r);return d},Ct=u.expr.match.needsContext;function Tt(r,c){return r.nodeName&&r.nodeName.toLowerCase()===c.toLowerCase()}var St=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function kt(r,c,d){return D(c)?u.grep(r,function(h,b){return!!c.call(h,b,h)!==d}):c.nodeType?u.grep(r,function(h){return h===c!==d}):"string"!=typeof c?u.grep(r,function(h){return t.call(c,h)>-1!==d}):u.filter(c,r,d)}u.filter=function(r,c,d){var h=c[0];return d&&(r=":not("+r+")"),1===c.length&&1===h.nodeType?u.find.matchesSelector(h,r)?[h]:[]:u.find.matches(r,u.grep(c,function(b){return 1===b.nodeType}))},u.fn.extend({find:function(r){var c,d,h=this.length,b=this;if("string"!=typeof r)return this.pushStack(u(r).filter(function(){for(c=0;c<h;c++)if(u.contains(b[c],this))return!0}));for(d=this.pushStack([]),c=0;c<h;c++)u.find(r,b[c],d);return h>1?u.uniqueSort(d):d},filter:function(r){return this.pushStack(kt(this,r||[],!1))},not:function(r){return this.pushStack(kt(this,r||[],!0))},is:function(r){return!!kt(this,"string"==typeof r&&Ct.test(r)?u(r):r||[],!1).length}});var Et,Zt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ft=u.fn.init=function(r,c,d){var h,b;if(!r)return this;if(d=d||Et,"string"==typeof r){if(!(h="<"===r[0]&&">"===r[r.length-1]&&r.length>=3?[null,r,null]:Zt.exec(r))||!h[1]&&c)return!c||c.jquery?(c||d).find(r):this.constructor(c).find(r);if(h[1]){if(u.merge(this,u.parseHTML(h[1],(c=c instanceof u?c[0]:c)&&c.nodeType?c.ownerDocument||c:tt,!0)),St.test(h[1])&&u.isPlainObject(c))for(h in c)D(this[h])?this[h](c[h]):this.attr(h,c[h]);return this}return(b=tt.getElementById(h[2]))&&(this[0]=b,this.length=1),this}return r.nodeType?(this[0]=r,this.length=1,this):D(r)?void 0!==d.ready?d.ready(r):r(u):u.makeArray(r,this)};Ft.prototype=u.fn,Et=u(tt);var Lt=/^(?:parents|prev(?:Until|All))/,Qt={children:!0,contents:!0,next:!0,prev:!0};function Wt(r,c){for(;(r=r[c])&&1!==r.nodeType;);return r}u.fn.extend({has:function(r){var c=u(r,this),d=c.length;return this.filter(function(){for(var h=0;h<d;h++)if(u.contains(this,c[h]))return!0})},closest:function(r,c){var d,h=0,b=this.length,x=[],w="string"!=typeof r&&u(r);if(!Ct.test(r))for(;h<b;h++)for(d=this[h];d&&d!==c;d=d.parentNode)if(d.nodeType<11&&(w?w.index(d)>-1:1===d.nodeType&&u.find.matchesSelector(d,r))){x.push(d);break}return this.pushStack(x.length>1?u.uniqueSort(x):x)},index:function(r){return r?"string"==typeof r?t.call(u(r),this[0]):t.call(this,r.jquery?r[0]:r):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(r,c){return this.pushStack(u.uniqueSort(u.merge(this.get(),u(r,c))))},addBack:function(r){return this.add(null==r?this.prevObject:this.prevObject.filter(r))}}),u.each({parent:function(r){var c=r.parentNode;return c&&11!==c.nodeType?c:null},parents:function(r){return vt(r,"parentNode")},parentsUntil:function(r,c,d){return vt(r,"parentNode",d)},next:function(r){return Wt(r,"nextSibling")},prev:function(r){return Wt(r,"previousSibling")},nextAll:function(r){return vt(r,"nextSibling")},prevAll:function(r){return vt(r,"previousSibling")},nextUntil:function(r,c,d){return vt(r,"nextSibling",d)},prevUntil:function(r,c,d){return vt(r,"previousSibling",d)},siblings:function(r){return Ot((r.parentNode||{}).firstChild,r)},children:function(r){return Ot(r.firstChild)},contents:function(r){return null!=r.contentDocument&&S(r.contentDocument)?r.contentDocument:(Tt(r,"template")&&(r=r.content||r),u.merge([],r.childNodes))}},function(r,c){u.fn[r]=function(d,h){var b=u.map(this,c,d);return"Until"!==r.slice(-5)&&(h=d),h&&"string"==typeof h&&(b=u.filter(h,b)),this.length>1&&(Qt[r]||u.uniqueSort(b),Lt.test(r)&&b.reverse()),this.pushStack(b)}});var At=/[^\x20\t\r\n\f]+/g;function It(r){return r}function te(r){throw r}function zt(r,c,d,h){var b;try{r&&D(b=r.promise)?b.call(r).done(c).fail(d):r&&D(b=r.then)?b.call(r,c,d):c.apply(void 0,[r].slice(h))}catch(x){d.apply(void 0,[x])}}u.Callbacks=function(r){r="string"==typeof r?function Dt(r){var c={};return u.each(r.match(At)||[],function(d,h){c[h]=!0}),c}(r):u.extend({},r);var c,d,h,b,x=[],w=[],F=-1,I=function(){for(b=b||r.once,h=c=!0;w.length;F=-1)for(d=w.shift();++F<x.length;)!1===x[F].apply(d[0],d[1])&&r.stopOnFalse&&(F=x.length,d=!1);r.memory||(d=!1),c=!1,b&&(x=d?[]:"")},W={add:function(){return x&&(d&&!c&&(F=x.length-1,w.push(d)),function z(rt){u.each(rt,function(Y,et){D(et)?(!r.unique||!W.has(et))&&x.push(et):et&&et.length&&"string"!==X(et)&&z(et)})}(arguments),d&&!c&&I()),this},remove:function(){return u.each(arguments,function(z,rt){for(var Y;(Y=u.inArray(rt,x,Y))>-1;)x.splice(Y,1),Y<=F&&F--}),this},has:function(z){return z?u.inArray(z,x)>-1:x.length>0},empty:function(){return x&&(x=[]),this},disable:function(){return b=w=[],x=d="",this},disabled:function(){return!x},lock:function(){return b=w=[],!d&&!c&&(x=d=""),this},locked:function(){return!!b},fireWith:function(z,rt){return b||(rt=[z,(rt=rt||[]).slice?rt.slice():rt],w.push(rt),c||I()),this},fire:function(){return W.fireWith(this,arguments),this},fired:function(){return!!h}};return W},u.extend({Deferred:function(r){var c=[["notify","progress",u.Callbacks("memory"),u.Callbacks("memory"),2],["resolve","done",u.Callbacks("once memory"),u.Callbacks("once memory"),0,"resolved"],["reject","fail",u.Callbacks("once memory"),u.Callbacks("once memory"),1,"rejected"]],d="pending",h={state:function(){return d},always:function(){return b.done(arguments).fail(arguments),this},catch:function(x){return h.then(null,x)},pipe:function(){var x=arguments;return u.Deferred(function(w){u.each(c,function(F,I){var W=D(x[I[4]])&&x[I[4]];b[I[1]](function(){var z=W&&W.apply(this,arguments);z&&D(z.promise)?z.promise().progress(w.notify).done(w.resolve).fail(w.reject):w[I[0]+"With"](this,W?[z]:arguments)})}),x=null}).promise()},then:function(x,w,F){var I=0;function W(z,rt,Y,et){return function(){var ft=this,Pt=arguments,_t=function(){var Gt,le;if(!(z<I)){if((Gt=Y.apply(ft,Pt))===rt.promise())throw new TypeError("Thenable self-resolution");D(le=Gt&&("object"==typeof Gt||"function"==typeof Gt)&&Gt.then)?et?le.call(Gt,W(I,rt,It,et),W(I,rt,te,et)):(I++,le.call(Gt,W(I,rt,It,et),W(I,rt,te,et),W(I,rt,It,rt.notifyWith))):(Y!==It&&(ft=void 0,Pt=[Gt]),(et||rt.resolveWith)(ft,Pt))}},Xt=et?_t:function(){try{_t()}catch(Gt){u.Deferred.exceptionHook&&u.Deferred.exceptionHook(Gt,Xt.stackTrace),z+1>=I&&(Y!==te&&(ft=void 0,Pt=[Gt]),rt.rejectWith(ft,Pt))}};z?Xt():(u.Deferred.getStackHook&&(Xt.stackTrace=u.Deferred.getStackHook()),L.setTimeout(Xt))}}return u.Deferred(function(z){c[0][3].add(W(0,z,D(F)?F:It,z.notifyWith)),c[1][3].add(W(0,z,D(x)?x:It)),c[2][3].add(W(0,z,D(w)?w:te))}).promise()},promise:function(x){return null!=x?u.extend(x,h):h}},b={};return u.each(c,function(x,w){var F=w[2],I=w[5];h[w[1]]=F.add,I&&F.add(function(){d=I},c[3-x][2].disable,c[3-x][3].disable,c[0][2].lock,c[0][3].lock),F.add(w[3].fire),b[w[0]]=function(){return b[w[0]+"With"](this===b?void 0:this,arguments),this},b[w[0]+"With"]=F.fireWith}),h.promise(b),r&&r.call(b,b),b},when:function(r){var c=arguments.length,d=c,h=Array(d),b=g.call(arguments),x=u.Deferred(),w=function(F){return function(I){h[F]=this,b[F]=arguments.length>1?g.call(arguments):I,--c||x.resolveWith(h,b)}};if(c<=1&&(zt(r,x.done(w(d)).resolve,x.reject,!c),"pending"===x.state()||D(b[d]&&b[d].then)))return x.then();for(;d--;)zt(b[d],w(d),x.reject);return x.promise()}});var ee=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;u.Deferred.exceptionHook=function(r,c){L.console&&L.console.warn&&r&&ee.test(r.name)&&L.console.warn("jQuery.Deferred exception: "+r.message,r.stack,c)},u.readyException=function(r){L.setTimeout(function(){throw r})};var oe=u.Deferred();function ce(){tt.removeEventListener("DOMContentLoaded",ce),L.removeEventListener("load",ce),u.ready()}u.fn.ready=function(r){return oe.then(r).catch(function(c){u.readyException(c)}),this},u.extend({isReady:!1,readyWait:1,ready:function(r){(!0===r?--u.readyWait:u.isReady)||(u.isReady=!0,!(!0!==r&&--u.readyWait>0)&&oe.resolveWith(tt,[u]))}}),u.ready.then=oe.then,"complete"===tt.readyState||"loading"!==tt.readyState&&!tt.documentElement.doScroll?L.setTimeout(u.ready):(tt.addEventListener("DOMContentLoaded",ce),L.addEventListener("load",ce));var xe=function(r,c,d,h,b,x,w){var F=0,I=r.length,W=null==d;if("object"===X(d))for(F in b=!0,d)xe(r,c,F,d[F],!0,x,w);else if(void 0!==h&&(b=!0,D(h)||(w=!0),W&&(w?(c.call(r,h),c=null):(W=c,c=function(z,rt,Y){return W.call(u(z),Y)})),c))for(;F<I;F++)c(r[F],d,w?h:h.call(r[F],F,c(r[F],d)));return b?r:W?c.call(r):I?c(r[0],d):x},vi=/^-ms-/,bi=/-([a-z])/g;function xi(r,c){return c.toUpperCase()}function be(r){return r.replace(vi,"ms-").replace(bi,xi)}var He=function(r){return 1===r.nodeType||9===r.nodeType||!+r.nodeType};function ut(){this.expando=u.expando+ut.uid++}ut.uid=1,ut.prototype={cache:function(r){var c=r[this.expando];return c||(c={},He(r)&&(r.nodeType?r[this.expando]=c:Object.defineProperty(r,this.expando,{value:c,configurable:!0}))),c},set:function(r,c,d){var h,b=this.cache(r);if("string"==typeof c)b[be(c)]=d;else for(h in c)b[be(h)]=c[h];return b},get:function(r,c){return void 0===c?this.cache(r):r[this.expando]&&r[this.expando][be(c)]},access:function(r,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(r,c):(this.set(r,c,d),void 0!==d?d:c)},remove:function(r,c){var d,h=r[this.expando];if(void 0!==h){if(void 0!==c)for((d=(c=Array.isArray(c)?c.map(be):(c=be(c))in h?[c]:c.match(At)||[]).length);d--;)delete h[c[d]];(void 0===c||u.isEmptyObject(h))&&(r.nodeType?r[this.expando]=void 0:delete r[this.expando])}},hasData:function(r){var c=r[this.expando];return void 0!==c&&!u.isEmptyObject(c)}};var mt=new ut,$t=new ut,yi=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ci=/[A-Z]/g;function De(r,c,d){var h;if(void 0===d&&1===r.nodeType)if(h="data-"+c.replace(Ci,"-$&").toLowerCase(),"string"==typeof(d=r.getAttribute(h))){try{d=function wi(r){return"true"===r||"false"!==r&&("null"===r?null:r===+r+""?+r:yi.test(r)?JSON.parse(r):r)}(d)}catch(b){}$t.set(r,c,d)}else d=void 0;return d}u.extend({hasData:function(r){return $t.hasData(r)||mt.hasData(r)},data:function(r,c,d){return $t.access(r,c,d)},removeData:function(r,c){$t.remove(r,c)},_data:function(r,c,d){return mt.access(r,c,d)},_removeData:function(r,c){mt.remove(r,c)}}),u.fn.extend({data:function(r,c){var d,h,b,x=this[0],w=x&&x.attributes;if(void 0===r){if(this.length&&(b=$t.get(x),1===x.nodeType&&!mt.get(x,"hasDataAttrs"))){for(d=w.length;d--;)w[d]&&0===(h=w[d].name).indexOf("data-")&&(h=be(h.slice(5)),De(x,h,b[h]));mt.set(x,"hasDataAttrs",!0)}return b}return"object"==typeof r?this.each(function(){$t.set(this,r)}):xe(this,function(F){var I;if(x&&void 0===F)return void 0!==(I=$t.get(x,r))||void 0!==(I=De(x,r))?I:void 0;this.each(function(){$t.set(this,r,F)})},null,c,arguments.length>1,null,!0)},removeData:function(r){return this.each(function(){$t.remove(this,r)})}}),u.extend({queue:function(r,c,d){var h;if(r)return h=mt.get(r,c=(c||"fx")+"queue"),d&&(!h||Array.isArray(d)?h=mt.access(r,c,u.makeArray(d)):h.push(d)),h||[]},dequeue:function(r,c){var d=u.queue(r,c=c||"fx"),h=d.length,b=d.shift(),x=u._queueHooks(r,c);"inprogress"===b&&(b=d.shift(),h--),b&&("fx"===c&&d.unshift("inprogress"),delete x.stop,b.call(r,function(){u.dequeue(r,c)},x)),!h&&x&&x.empty.fire()},_queueHooks:function(r,c){var d=c+"queueHooks";return mt.get(r,d)||mt.access(r,d,{empty:u.Callbacks("once memory").add(function(){mt.remove(r,[c+"queue",d])})})}}),u.fn.extend({queue:function(r,c){var d=2;return"string"!=typeof r&&(c=r,r="fx",d--),arguments.length<d?u.queue(this[0],r):void 0===c?this:this.each(function(){var h=u.queue(this,r,c);u._queueHooks(this,r),"fx"===r&&"inprogress"!==h[0]&&u.dequeue(this,r)})},dequeue:function(r){return this.each(function(){u.dequeue(this,r)})},clearQueue:function(r){return this.queue(r||"fx",[])},promise:function(r,c){var d,h=1,b=u.Deferred(),x=this,w=this.length,F=function(){--h||b.resolveWith(x,[x])};for("string"!=typeof r&&(c=r,r=void 0),r=r||"fx";w--;)(d=mt.get(x[w],r+"queueHooks"))&&d.empty&&(h++,d.empty.add(F));return F(),b.promise(c)}});var Eo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Be=new RegExp("^(?:([+-])=|)("+Eo+")([a-z%]*)$","i"),ye=["Top","Right","Bottom","Left"],Te=tt.documentElement,qe=function(r){return u.contains(r.ownerDocument,r)},ki={composed:!0};Te.getRootNode&&(qe=function(r){return u.contains(r.ownerDocument,r)||r.getRootNode(ki)===r.ownerDocument});var Xe=function(r,c){return"none"===(r=c||r).style.display||""===r.style.display&&qe(r)&&"none"===u.css(r,"display")};function No(r,c,d,h){var b,x,w=20,F=h?function(){return h.cur()}:function(){return u.css(r,c,"")},I=F(),W=d&&d[3]||(u.cssNumber[c]?"":"px"),z=r.nodeType&&(u.cssNumber[c]||"px"!==W&&+I)&&Be.exec(u.css(r,c));if(z&&z[3]!==W){for(W=W||z[3],z=+(I/=2)||1;w--;)u.style(r,c,z+W),(1-x)*(1-(x=F()/I||.5))<=0&&(w=0),z/=x;u.style(r,c,(z*=2)+W),d=d||[]}return d&&(z=+z||+I||0,b=d[1]?z+(d[1]+1)*d[2]:+d[2],h&&(h.unit=W,h.start=z,h.end=b)),b}var Do={};function Oi(r){var c,d=r.ownerDocument,h=r.nodeName,b=Do[h];return b||(c=d.body.appendChild(d.createElement(h)),b=u.css(c,"display"),c.parentNode.removeChild(c),"none"===b&&(b="block"),Do[h]=b,b)}function Fe(r,c){for(var d,h,b=[],x=0,w=r.length;x<w;x++)(h=r[x]).style&&(d=h.style.display,c?("none"===d&&(b[x]=mt.get(h,"display")||null,b[x]||(h.style.display="")),""===h.style.display&&Xe(h)&&(b[x]=Oi(h))):"none"!==d&&(b[x]="none",mt.set(h,"display",d)));for(x=0;x<w;x++)null!=b[x]&&(r[x].style.display=b[x]);return r}u.fn.extend({show:function(){return Fe(this,!0)},hide:function(){return Fe(this)},toggle:function(r){return"boolean"==typeof r?r?this.show():this.hide():this.each(function(){Xe(this)?u(this).show():u(this).hide()})}});var c,d,je=/^(?:checkbox|radio)$/i,qo=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Fo=/^$|^module$|\/(?:java|ecma)script/i;c=tt.createDocumentFragment().appendChild(tt.createElement("div")),(d=tt.createElement("input")).setAttribute("type","radio"),d.setAttribute("checked","checked"),d.setAttribute("name","t"),c.appendChild(d),J.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",J.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",J.option=!!c.lastChild;var he={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ne(r,c){var d;return d=void 0!==r.getElementsByTagName?r.getElementsByTagName(c||"*"):void 0!==r.querySelectorAll?r.querySelectorAll(c||"*"):[],void 0===c||c&&Tt(r,c)?u.merge([r],d):d}function po(r,c){for(var d=0,h=r.length;d<h;d++)mt.set(r[d],"globalEval",!c||mt.get(c[d],"globalEval"))}he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td,J.option||(he.optgroup=he.option=[1,"<select multiple='multiple'>","</select>"]);var Ti=/<|&#?\w+;/;function Io(r,c,d,h,b){for(var x,w,F,I,W,z,rt=c.createDocumentFragment(),Y=[],et=0,ft=r.length;et<ft;et++)if((x=r[et])||0===x)if("object"===X(x))u.merge(Y,x.nodeType?[x]:x);else if(Ti.test(x)){for(w=w||rt.appendChild(c.createElement("div")),F=(qo.exec(x)||["",""])[1].toLowerCase(),w.innerHTML=(I=he[F]||he._default)[1]+u.htmlPrefilter(x)+I[2],z=I[0];z--;)w=w.lastChild;u.merge(Y,w.childNodes),(w=rt.firstChild).textContent=""}else Y.push(c.createTextNode(x));for(rt.textContent="",et=0;x=Y[et++];)if(h&&u.inArray(x,h)>-1)b&&b.push(x);else if(W=qe(x),w=ne(rt.appendChild(x),"script"),W&&po(w),d)for(z=0;x=w[z++];)Fo.test(x.type||"")&&d.push(x);return rt}var Uo=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function Ue(){return!1}function Mi(r,c){return r===function Pi(){try{return tt.activeElement}catch(r){}}()==("focus"===c)}function uo(r,c,d,h,b,x){var w,F;if("object"==typeof c){for(F in"string"!=typeof d&&(h=h||d,d=void 0),c)uo(r,F,d,h,c[F],x);return r}if(null==h&&null==b?(b=d,h=d=void 0):null==b&&("string"==typeof d?(b=h,h=void 0):(b=h,h=d,d=void 0)),!1===b)b=Ue;else if(!b)return r;return 1===x&&(w=b,b=function(I){return u().off(I),w.apply(this,arguments)},b.guid=w.guid||(w.guid=u.guid++)),r.each(function(){u.event.add(this,c,b,h,d)})}function Ke(r,c,d){d?(mt.set(r,c,!1),u.event.add(r,c,{namespace:!1,handler:function(h){var b,x,w=mt.get(this,c);if(1&h.isTrigger&&this[c]){if(w.length)(u.event.special[c]||{}).delegateType&&h.stopPropagation();else if(w=g.call(arguments),mt.set(this,c,w),b=d(this,c),this[c](),w!==(x=mt.get(this,c))||b?mt.set(this,c,!1):x={},w!==x)return h.stopImmediatePropagation(),h.preventDefault(),x&&x.value}else w.length&&(mt.set(this,c,{value:u.event.trigger(u.extend(w[0],u.Event.prototype),w.slice(1),this)}),h.stopImmediatePropagation())}})):void 0===mt.get(r,c)&&u.event.add(r,c,Ie)}u.event={global:{},add:function(r,c,d,h,b){var x,w,F,I,W,z,rt,Y,et,ft,Pt,_t=mt.get(r);if(He(r))for(d.handler&&(d=(x=d).handler,b=x.selector),b&&u.find.matchesSelector(Te,b),d.guid||(d.guid=u.guid++),(I=_t.events)||(I=_t.events=Object.create(null)),(w=_t.handle)||(w=_t.handle=function(Xt){return void 0!==u&&u.event.triggered!==Xt.type?u.event.dispatch.apply(r,arguments):void 0}),W=(c=(c||"").match(At)||[""]).length;W--;)et=Pt=(F=Uo.exec(c[W])||[])[1],ft=(F[2]||"").split(".").sort(),et&&(rt=u.event.special[et]||{},rt=u.event.special[et=(b?rt.delegateType:rt.bindType)||et]||{},z=u.extend({type:et,origType:Pt,data:h,handler:d,guid:d.guid,selector:b,needsContext:b&&u.expr.match.needsContext.test(b),namespace:ft.join(".")},x),(Y=I[et])||((Y=I[et]=[]).delegateCount=0,(!rt.setup||!1===rt.setup.call(r,h,ft,w))&&r.addEventListener&&r.addEventListener(et,w)),rt.add&&(rt.add.call(r,z),z.handler.guid||(z.handler.guid=d.guid)),b?Y.splice(Y.delegateCount++,0,z):Y.push(z),u.event.global[et]=!0)},remove:function(r,c,d,h,b){var x,w,F,I,W,z,rt,Y,et,ft,Pt,_t=mt.hasData(r)&&mt.get(r);if(_t&&(I=_t.events)){for(W=(c=(c||"").match(At)||[""]).length;W--;)if(et=Pt=(F=Uo.exec(c[W])||[])[1],ft=(F[2]||"").split(".").sort(),et){for(rt=u.event.special[et]||{},Y=I[et=(h?rt.delegateType:rt.bindType)||et]||[],F=F[2]&&new RegExp("(^|\\.)"+ft.join("\\.(?:.*\\.|)")+"(\\.|$)"),w=x=Y.length;x--;)z=Y[x],(b||Pt===z.origType)&&(!d||d.guid===z.guid)&&(!F||F.test(z.namespace))&&(!h||h===z.selector||"**"===h&&z.selector)&&(Y.splice(x,1),z.selector&&Y.delegateCount--,rt.remove&&rt.remove.call(r,z));w&&!Y.length&&((!rt.teardown||!1===rt.teardown.call(r,ft,_t.handle))&&u.removeEvent(r,et,_t.handle),delete I[et])}else for(et in I)u.event.remove(r,et+c[W],d,h,!0);u.isEmptyObject(I)&&mt.remove(r,"handle events")}},dispatch:function(r){var c,d,h,b,x,w,F=new Array(arguments.length),I=u.event.fix(r),W=(mt.get(this,"events")||Object.create(null))[I.type]||[],z=u.event.special[I.type]||{};for(F[0]=I,c=1;c<arguments.length;c++)F[c]=arguments[c];if(I.delegateTarget=this,!z.preDispatch||!1!==z.preDispatch.call(this,I)){for(w=u.event.handlers.call(this,I,W),c=0;(b=w[c++])&&!I.isPropagationStopped();)for(I.currentTarget=b.elem,d=0;(x=b.handlers[d++])&&!I.isImmediatePropagationStopped();)(!I.rnamespace||!1===x.namespace||I.rnamespace.test(x.namespace))&&(I.handleObj=x,I.data=x.data,void 0!==(h=((u.event.special[x.origType]||{}).handle||x.handler).apply(b.elem,F))&&!1===(I.result=h)&&(I.preventDefault(),I.stopPropagation()));return z.postDispatch&&z.postDispatch.call(this,I),I.result}},handlers:function(r,c){var d,h,b,x,w,F=[],I=c.delegateCount,W=r.target;if(I&&W.nodeType&&!("click"===r.type&&r.button>=1))for(;W!==this;W=W.parentNode||this)if(1===W.nodeType&&("click"!==r.type||!0!==W.disabled)){for(x=[],w={},d=0;d<I;d++)void 0===w[b=(h=c[d]).selector+" "]&&(w[b]=h.needsContext?u(b,this).index(W)>-1:u.find(b,this,null,[W]).length),w[b]&&x.push(h);x.length&&F.push({elem:W,handlers:x})}return W=this,I<c.length&&F.push({elem:W,handlers:c.slice(I)}),F},addProp:function(r,c){Object.defineProperty(u.Event.prototype,r,{enumerable:!0,configurable:!0,get:D(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[r]},set:function(d){Object.defineProperty(this,r,{enumerable:!0,configurable:!0,writable:!0,value:d})}})},fix:function(r){return r[u.expando]?r:new u.Event(r)},special:{load:{noBubble:!0},click:{setup:function(r){var c=this||r;return je.test(c.type)&&c.click&&Tt(c,"input")&&Ke(c,"click",Ie),!1},trigger:function(r){var c=this||r;return je.test(c.type)&&c.click&&Tt(c,"input")&&Ke(c,"click"),!0},_default:function(r){var c=r.target;return je.test(c.type)&&c.click&&Tt(c,"input")&&mt.get(c,"click")||Tt(c,"a")}},beforeunload:{postDispatch:function(r){void 0!==r.result&&r.originalEvent&&(r.originalEvent.returnValue=r.result)}}}},u.removeEvent=function(r,c,d){r.removeEventListener&&r.removeEventListener(c,d)},u.Event=function(r,c){if(!(this instanceof u.Event))return new u.Event(r,c);r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented||void 0===r.defaultPrevented&&!1===r.returnValue?Ie:Ue,this.target=r.target&&3===r.target.nodeType?r.target.parentNode:r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget):this.type=r,c&&u.extend(this,c),this.timeStamp=r&&r.timeStamp||Date.now(),this[u.expando]=!0},u.Event.prototype={constructor:u.Event,isDefaultPrevented:Ue,isPropagationStopped:Ue,isImmediatePropagationStopped:Ue,isSimulated:!1,preventDefault:function(){var r=this.originalEvent;this.isDefaultPrevented=Ie,r&&!this.isSimulated&&r.preventDefault()},stopPropagation:function(){var r=this.originalEvent;this.isPropagationStopped=Ie,r&&!this.isSimulated&&r.stopPropagation()},stopImmediatePropagation:function(){var r=this.originalEvent;this.isImmediatePropagationStopped=Ie,r&&!this.isSimulated&&r.stopImmediatePropagation(),this.stopPropagation()}},u.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},u.event.addProp),u.each({focus:"focusin",blur:"focusout"},function(r,c){u.event.special[r]={setup:function(){return Ke(this,r,Mi),!1},trigger:function(){return Ke(this,r),!0},_default:function(){return!0},delegateType:c}}),u.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(r,c){u.event.special[r]={delegateType:c,bindType:c,handle:function(d){var h,b=this,x=d.relatedTarget,w=d.handleObj;return(!x||x!==b&&!u.contains(b,x))&&(d.type=w.origType,h=w.handler.apply(this,arguments),d.type=c),h}}}),u.fn.extend({on:function(r,c,d,h){return uo(this,r,c,d,h)},one:function(r,c,d,h){return uo(this,r,c,d,h,1)},off:function(r,c,d){var h,b;if(r&&r.preventDefault&&r.handleObj)return h=r.handleObj,u(r.delegateTarget).off(h.namespace?h.origType+"."+h.namespace:h.origType,h.selector,h.handler),this;if("object"==typeof r){for(b in r)this.off(b,c,r[b]);return this}return(!1===c||"function"==typeof c)&&(d=c,c=void 0),!1===d&&(d=Ue),this.each(function(){u.event.remove(this,r,d,c)})}});var Si=/<script|<style|<link/i,Ai=/checked\s*(?:[^=]|=\s*.checked.)/i,Zi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lo(r,c){return Tt(r,"table")&&Tt(11!==c.nodeType?c:c.firstChild,"tr")&&u(r).children("tbody")[0]||r}function Ei(r){return r.type=(null!==r.getAttribute("type"))+"/"+r.type,r}function Ni(r){return"true/"===(r.type||"").slice(0,5)?r.type=r.type.slice(5):r.removeAttribute("type"),r}function Jo(r,c){var d,h,b,w,F,I;if(1===c.nodeType){if(mt.hasData(r)&&(I=mt.get(r).events))for(b in mt.remove(c,"handle events"),I)for(d=0,h=I[b].length;d<h;d++)u.event.add(c,b,I[b][d]);$t.hasData(r)&&(w=$t.access(r),F=u.extend({},w),$t.set(c,F))}}function Di(r,c){var d=c.nodeName.toLowerCase();"input"===d&&je.test(r.type)?c.checked=r.checked:("input"===d||"textarea"===d)&&(c.defaultValue=r.defaultValue)}function Le(r,c,d,h){c=A(c);var b,x,w,F,I,W,z=0,rt=r.length,Y=rt-1,et=c[0],ft=D(et);if(ft||rt>1&&"string"==typeof et&&!J.checkClone&&Ai.test(et))return r.each(function(Pt){var _t=r.eq(Pt);ft&&(c[0]=et.call(this,Pt,_t.html())),Le(_t,c,d,h)});if(rt&&(x=(b=Io(c,r[0].ownerDocument,!1,r,h)).firstChild,1===b.childNodes.length&&(b=x),x||h)){for(F=(w=u.map(ne(b,"script"),Ei)).length;z<rt;z++)I=b,z!==Y&&(I=u.clone(I,!0,!0),F&&u.merge(w,ne(I,"script"))),d.call(r[z],I,z);if(F)for(W=w[w.length-1].ownerDocument,u.map(w,Ni),z=0;z<F;z++)Fo.test((I=w[z]).type||"")&&!mt.access(I,"globalEval")&&u.contains(W,I)&&(I.src&&"module"!==(I.type||"").toLowerCase()?u._evalUrl&&!I.noModule&&u._evalUrl(I.src,{nonce:I.nonce||I.getAttribute("nonce")},W):j(I.textContent.replace(Zi,""),I,W))}return r}function Ho(r,c,d){for(var h,b=c?u.filter(c,r):r,x=0;null!=(h=b[x]);x++)!d&&1===h.nodeType&&u.cleanData(ne(h)),h.parentNode&&(d&&qe(h)&&po(ne(h,"script")),h.parentNode.removeChild(h));return r}u.extend({htmlPrefilter:function(r){return r},clone:function(r,c,d){var h,b,x,w,F=r.cloneNode(!0),I=qe(r);if(!(J.noCloneChecked||1!==r.nodeType&&11!==r.nodeType||u.isXMLDoc(r)))for(w=ne(F),h=0,b=(x=ne(r)).length;h<b;h++)Di(x[h],w[h]);if(c)if(d)for(x=x||ne(r),w=w||ne(F),h=0,b=x.length;h<b;h++)Jo(x[h],w[h]);else Jo(r,F);return(w=ne(F,"script")).length>0&&po(w,!I&&ne(r,"script")),F},cleanData:function(r){for(var c,d,h,b=u.event.special,x=0;void 0!==(d=r[x]);x++)if(He(d)){if(c=d[mt.expando]){if(c.events)for(h in c.events)b[h]?u.event.remove(d,h):u.removeEvent(d,h,c.handle);d[mt.expando]=void 0}d[$t.expando]&&(d[$t.expando]=void 0)}}}),u.fn.extend({detach:function(r){return Ho(this,r,!0)},remove:function(r){return Ho(this,r)},text:function(r){return xe(this,function(c){return void 0===c?u.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=c)})},null,r,arguments.length)},append:function(){return Le(this,arguments,function(r){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lo(this,r).appendChild(r)})},prepend:function(){return Le(this,arguments,function(r){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=Lo(this,r);c.insertBefore(r,c.firstChild)}})},before:function(){return Le(this,arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this)})},after:function(){return Le(this,arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling)})},empty:function(){for(var r,c=0;null!=(r=this[c]);c++)1===r.nodeType&&(u.cleanData(ne(r,!1)),r.textContent="");return this},clone:function(r,c){return r=null!=r&&r,c=null==c?r:c,this.map(function(){return u.clone(this,r,c)})},html:function(r){return xe(this,function(c){var d=this[0]||{},h=0,b=this.length;if(void 0===c&&1===d.nodeType)return d.innerHTML;if("string"==typeof c&&!Si.test(c)&&!he[(qo.exec(c)||["",""])[1].toLowerCase()]){c=u.htmlPrefilter(c);try{for(;h<b;h++)1===(d=this[h]||{}).nodeType&&(u.cleanData(ne(d,!1)),d.innerHTML=c);d=0}catch(x){}}d&&this.empty().append(c)},null,r,arguments.length)},replaceWith:function(){var r=[];return Le(this,arguments,function(c){var d=this.parentNode;u.inArray(this,r)<0&&(u.cleanData(ne(this)),d&&d.replaceChild(c,this))},r)}}),u.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(r,c){u.fn[r]=function(d){for(var h,b=[],x=u(d),w=x.length-1,F=0;F<=w;F++)h=F===w?this:this.clone(!0),u(x[F])[c](h),_.apply(b,h.get());return this.pushStack(b)}});var ho=new RegExp("^("+Eo+")(?!px)[a-z%]+$","i"),to=function(r){var c=r.ownerDocument.defaultView;return(!c||!c.opener)&&(c=L),c.getComputedStyle(r)},Bo=function(r,c,d){var h,b,x={};for(b in c)x[b]=r.style[b],r.style[b]=c[b];for(b in h=d.call(r),c)r.style[b]=x[b];return h},qi=new RegExp(ye.join("|"),"i");function We(r,c,d){var h,b,x,w,F=r.style;return(d=d||to(r))&&(""===(w=d.getPropertyValue(c)||d[c])&&!qe(r)&&(w=u.style(r,c)),!J.pixelBoxStyles()&&ho.test(w)&&qi.test(c)&&(h=F.width,b=F.minWidth,x=F.maxWidth,F.minWidth=F.maxWidth=F.width=w,w=d.width,F.width=h,F.minWidth=b,F.maxWidth=x)),void 0!==w?w+"":w}function jo(r,c){return{get:function(){if(!r())return(this.get=c).apply(this,arguments);delete this.get}}}!function(){function r(){if(W){I.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",W.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Te.appendChild(I).appendChild(W);var z=L.getComputedStyle(W);d="1%"!==z.top,F=12===c(z.marginLeft),W.style.right="60%",x=36===c(z.right),h=36===c(z.width),W.style.position="absolute",b=12===c(W.offsetWidth/3),Te.removeChild(I),W=null}}function c(z){return Math.round(parseFloat(z))}var d,h,b,x,w,F,I=tt.createElement("div"),W=tt.createElement("div");!W.style||(W.style.backgroundClip="content-box",W.cloneNode(!0).style.backgroundClip="",J.clearCloneStyle="content-box"===W.style.backgroundClip,u.extend(J,{boxSizingReliable:function(){return r(),h},pixelBoxStyles:function(){return r(),x},pixelPosition:function(){return r(),d},reliableMarginLeft:function(){return r(),F},scrollboxSize:function(){return r(),b},reliableTrDimensions:function(){var z,rt,Y,et;return null==w&&(z=tt.createElement("table"),rt=tt.createElement("tr"),Y=tt.createElement("div"),z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",rt.style.cssText="border:1px solid",rt.style.height="1px",Y.style.height="9px",Y.style.display="block",Te.appendChild(z).appendChild(rt).appendChild(Y),et=L.getComputedStyle(rt),w=parseInt(et.height,10)+parseInt(et.borderTopWidth,10)+parseInt(et.borderBottomWidth,10)===rt.offsetHeight,Te.removeChild(z)),w}}))}();var Wo=["Webkit","Moz","ms"],Qo=tt.createElement("div").style,Vo={};function go(r){return u.cssProps[r]||Vo[r]||(r in Qo?r:Vo[r]=function Fi(r){for(var c=r[0].toUpperCase()+r.slice(1),d=Wo.length;d--;)if((r=Wo[d]+c)in Qo)return r}(r)||r)}var Ii=/^(none|table(?!-c[ea]).+)/,Ro=/^--/,Ui={position:"absolute",visibility:"hidden",display:"block"},Yo={letterSpacing:"0",fontWeight:"400"};function zo(r,c,d){var h=Be.exec(c);return h?Math.max(0,h[2]-(d||0))+(h[3]||"px"):c}function fo(r,c,d,h,b,x){var w="width"===c?1:0,F=0,I=0;if(d===(h?"border":"content"))return 0;for(;w<4;w+=2)"margin"===d&&(I+=u.css(r,d+ye[w],!0,b)),h?("content"===d&&(I-=u.css(r,"padding"+ye[w],!0,b)),"margin"!==d&&(I-=u.css(r,"border"+ye[w]+"Width",!0,b))):(I+=u.css(r,"padding"+ye[w],!0,b),"padding"!==d?I+=u.css(r,"border"+ye[w]+"Width",!0,b):F+=u.css(r,"border"+ye[w]+"Width",!0,b));return!h&&x>=0&&(I+=Math.max(0,Math.ceil(r["offset"+c[0].toUpperCase()+c.slice(1)]-x-I-F-.5))||0),I}function Go(r,c,d){var h=to(r),x=(!J.boxSizingReliable()||d)&&"border-box"===u.css(r,"boxSizing",!1,h),w=x,F=We(r,c,h),I="offset"+c[0].toUpperCase()+c.slice(1);if(ho.test(F)){if(!d)return F;F="auto"}return(!J.boxSizingReliable()&&x||!J.reliableTrDimensions()&&Tt(r,"tr")||"auto"===F||!parseFloat(F)&&"inline"===u.css(r,"display",!1,h))&&r.getClientRects().length&&(x="border-box"===u.css(r,"boxSizing",!1,h),(w=I in r)&&(F=r[I])),(F=parseFloat(F)||0)+fo(r,c,d||(x?"border":"content"),w,h,F)+"px"}function se(r,c,d,h,b){return new se.prototype.init(r,c,d,h,b)}u.extend({cssHooks:{opacity:{get:function(r,c){if(c){var d=We(r,"opacity");return""===d?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(r,c,d,h){if(r&&3!==r.nodeType&&8!==r.nodeType&&r.style){var b,x,w,F=be(c),I=Ro.test(c),W=r.style;if(I||(c=go(F)),w=u.cssHooks[c]||u.cssHooks[F],void 0===d)return w&&"get"in w&&void 0!==(b=w.get(r,!1,h))?b:W[c];if("string"==(x=typeof d)&&(b=Be.exec(d))&&b[1]&&(d=No(r,c,b),x="number"),null==d||d!=d)return;"number"===x&&!I&&(d+=b&&b[3]||(u.cssNumber[F]?"":"px")),!J.clearCloneStyle&&""===d&&0===c.indexOf("background")&&(W[c]="inherit"),(!w||!("set"in w)||void 0!==(d=w.set(r,d,h)))&&(I?W.setProperty(c,d):W[c]=d)}},css:function(r,c,d,h){var b,x,w,F=be(c);return Ro.test(c)||(c=go(F)),(w=u.cssHooks[c]||u.cssHooks[F])&&"get"in w&&(b=w.get(r,!0,d)),void 0===b&&(b=We(r,c,h)),"normal"===b&&c in Yo&&(b=Yo[c]),""===d||d?(x=parseFloat(b),!0===d||isFinite(x)?x||0:b):b}}),u.each(["height","width"],function(r,c){u.cssHooks[c]={get:function(d,h,b){if(h)return!Ii.test(u.css(d,"display"))||d.getClientRects().length&&d.getBoundingClientRect().width?Go(d,c,b):Bo(d,Ui,function(){return Go(d,c,b)})},set:function(d,h,b){var x,w=to(d),F=!J.scrollboxSize()&&"absolute"===w.position,W=(F||b)&&"border-box"===u.css(d,"boxSizing",!1,w),z=b?fo(d,c,b,W,w):0;return W&&F&&(z-=Math.ceil(d["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(w[c])-fo(d,c,"border",!1,w)-.5)),z&&(x=Be.exec(h))&&"px"!==(x[3]||"px")&&(d.style[c]=h,h=u.css(d,c)),zo(0,h,z)}}}),u.cssHooks.marginLeft=jo(J.reliableMarginLeft,function(r,c){if(c)return(parseFloat(We(r,"marginLeft"))||r.getBoundingClientRect().left-Bo(r,{marginLeft:0},function(){return r.getBoundingClientRect().left}))+"px"}),u.each({margin:"",padding:"",border:"Width"},function(r,c){u.cssHooks[r+c]={expand:function(d){for(var h=0,b={},x="string"==typeof d?d.split(" "):[d];h<4;h++)b[r+ye[h]+c]=x[h]||x[h-2]||x[0];return b}},"margin"!==r&&(u.cssHooks[r+c].set=zo)}),u.fn.extend({css:function(r,c){return xe(this,function(d,h,b){var x,w,F={},I=0;if(Array.isArray(h)){for(x=to(d),w=h.length;I<w;I++)F[h[I]]=u.css(d,h[I],!1,x);return F}return void 0!==b?u.style(d,h,b):u.css(d,h)},r,c,arguments.length>1)}}),u.Tween=se,(se.prototype={constructor:se,init:function(r,c,d,h,b,x){this.elem=r,this.prop=d,this.easing=b||u.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=h,this.unit=x||(u.cssNumber[d]?"":"px")},cur:function(){var r=se.propHooks[this.prop];return r&&r.get?r.get(this):se.propHooks._default.get(this)},run:function(r){var c,d=se.propHooks[this.prop];return this.pos=c=this.options.duration?u.easing[this.easing](r,this.options.duration*r,0,1,this.options.duration):r,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):se.propHooks._default.set(this),this}}).init.prototype=se.prototype,(se.propHooks={_default:{get:function(r){var c;return 1!==r.elem.nodeType||null!=r.elem[r.prop]&&null==r.elem.style[r.prop]?r.elem[r.prop]:(c=u.css(r.elem,r.prop,""))&&"auto"!==c?c:0},set:function(r){u.fx.step[r.prop]?u.fx.step[r.prop](r):1!==r.elem.nodeType||!u.cssHooks[r.prop]&&null==r.elem.style[go(r.prop)]?r.elem[r.prop]=r.now:u.style(r.elem,r.prop,r.now+r.unit)}}}).scrollTop=se.propHooks.scrollLeft={set:function(r){r.elem.nodeType&&r.elem.parentNode&&(r.elem[r.prop]=r.now)}},u.easing={linear:function(r){return r},swing:function(r){return.5-Math.cos(r*Math.PI)/2},_default:"swing"},u.fx=se.prototype.init,u.fx.step={};var Je,eo,Li=/^(?:toggle|show|hide)$/,Ji=/queueHooks$/;function _o(){eo&&(!1===tt.hidden&&L.requestAnimationFrame?L.requestAnimationFrame(_o):L.setTimeout(_o,u.fx.interval),u.fx.tick())}function $o(){return L.setTimeout(function(){Je=void 0}),Je=Date.now()}function oo(r,c){var d,h=0,b={height:r};for(c=c?1:0;h<4;h+=2-c)b["margin"+(d=ye[h])]=b["padding"+d]=r;return c&&(b.opacity=b.width=r),b}function Xo(r,c,d){for(var h,b=(_e.tweeners[c]||[]).concat(_e.tweeners["*"]),x=0,w=b.length;x<w;x++)if(h=b[x].call(d,c,r))return h}function _e(r,c,d){var h,b,x=0,w=_e.prefilters.length,F=u.Deferred().always(function(){delete I.elem}),I=function(){if(b)return!1;for(var rt=Je||$o(),Y=Math.max(0,W.startTime+W.duration-rt),ft=1-(Y/W.duration||0),Pt=0,_t=W.tweens.length;Pt<_t;Pt++)W.tweens[Pt].run(ft);return F.notifyWith(r,[W,ft,Y]),ft<1&&_t?Y:(_t||F.notifyWith(r,[W,1,0]),F.resolveWith(r,[W]),!1)},W=F.promise({elem:r,props:u.extend({},c),opts:u.extend(!0,{specialEasing:{},easing:u.easing._default},d),originalProperties:c,originalOptions:d,startTime:Je||$o(),duration:d.duration,tweens:[],createTween:function(rt,Y){var et=u.Tween(r,W.opts,rt,Y,W.opts.specialEasing[rt]||W.opts.easing);return W.tweens.push(et),et},stop:function(rt){var Y=0,et=rt?W.tweens.length:0;if(b)return this;for(b=!0;Y<et;Y++)W.tweens[Y].run(1);return rt?(F.notifyWith(r,[W,1,0]),F.resolveWith(r,[W,rt])):F.rejectWith(r,[W,rt]),this}}),z=W.props;for(function Bi(r,c){var d,h,b,x,w;for(d in r)if(b=c[h=be(d)],x=r[d],Array.isArray(x)&&(b=x[1],x=r[d]=x[0]),d!==h&&(r[h]=x,delete r[d]),(w=u.cssHooks[h])&&"expand"in w)for(d in x=w.expand(x),delete r[h],x)d in r||(r[d]=x[d],c[d]=b);else c[h]=b}(z,W.opts.specialEasing);x<w;x++)if(h=_e.prefilters[x].call(W,r,z,W.opts))return D(h.stop)&&(u._queueHooks(W.elem,W.opts.queue).stop=h.stop.bind(h)),h;return u.map(z,Xo,W),D(W.opts.start)&&W.opts.start.call(r,W),W.progress(W.opts.progress).done(W.opts.done,W.opts.complete).fail(W.opts.fail).always(W.opts.always),u.fx.timer(u.extend(I,{elem:r,anim:W,queue:W.opts.queue})),W}u.Animation=u.extend(_e,{tweeners:{"*":[function(r,c){var d=this.createTween(r,c);return No(d.elem,r,Be.exec(c),d),d}]},tweener:function(r,c){D(r)?(c=r,r=["*"]):r=r.match(At);for(var d,h=0,b=r.length;h<b;h++)(_e.tweeners[d=r[h]]=_e.tweeners[d]||[]).unshift(c)},prefilters:[function Hi(r,c,d){var h,b,x,w,F,I,W,z,rt="width"in c||"height"in c,Y=this,et={},ft=r.style,Pt=r.nodeType&&Xe(r),_t=mt.get(r,"fxshow");for(h in d.queue||(null==(w=u._queueHooks(r,"fx")).unqueued&&(w.unqueued=0,F=w.empty.fire,w.empty.fire=function(){w.unqueued||F()}),w.unqueued++,Y.always(function(){Y.always(function(){w.unqueued--,u.queue(r,"fx").length||w.empty.fire()})})),c)if(Li.test(b=c[h])){if(delete c[h],x=x||"toggle"===b,b===(Pt?"hide":"show")){if("show"!==b||!_t||void 0===_t[h])continue;Pt=!0}et[h]=_t&&_t[h]||u.style(r,h)}if((I=!u.isEmptyObject(c))||!u.isEmptyObject(et))for(h in rt&&1===r.nodeType&&(d.overflow=[ft.overflow,ft.overflowX,ft.overflowY],null==(W=_t&&_t.display)&&(W=mt.get(r,"display")),"none"===(z=u.css(r,"display"))&&(W?z=W:(Fe([r],!0),W=r.style.display||W,z=u.css(r,"display"),Fe([r]))),("inline"===z||"inline-block"===z&&null!=W)&&"none"===u.css(r,"float")&&(I||(Y.done(function(){ft.display=W}),null==W&&(W="none"===(z=ft.display)?"":z)),ft.display="inline-block")),d.overflow&&(ft.overflow="hidden",Y.always(function(){ft.overflow=d.overflow[0],ft.overflowX=d.overflow[1],ft.overflowY=d.overflow[2]})),I=!1,et)I||(_t?"hidden"in _t&&(Pt=_t.hidden):_t=mt.access(r,"fxshow",{display:W}),x&&(_t.hidden=!Pt),Pt&&Fe([r],!0),Y.done(function(){for(h in Pt||Fe([r]),mt.remove(r,"fxshow"),et)u.style(r,h,et[h])})),I=Xo(Pt?_t[h]:0,h,Y),h in _t||(_t[h]=I.start,Pt&&(I.end=I.start,I.start=0))}],prefilter:function(r,c){c?_e.prefilters.unshift(r):_e.prefilters.push(r)}}),u.speed=function(r,c,d){var h=r&&"object"==typeof r?u.extend({},r):{complete:d||!d&&c||D(r)&&r,duration:r,easing:d&&c||c&&!D(c)&&c};return u.fx.off?h.duration=0:"number"!=typeof h.duration&&(h.duration=h.duration in u.fx.speeds?u.fx.speeds[h.duration]:u.fx.speeds._default),(null==h.queue||!0===h.queue)&&(h.queue="fx"),h.old=h.complete,h.complete=function(){D(h.old)&&h.old.call(this),h.queue&&u.dequeue(this,h.queue)},h},u.fn.extend({fadeTo:function(r,c,d,h){return this.filter(Xe).css("opacity",0).show().end().animate({opacity:c},r,d,h)},animate:function(r,c,d,h){var b=u.isEmptyObject(r),x=u.speed(c,d,h),w=function(){var F=_e(this,u.extend({},r),x);(b||mt.get(this,"finish"))&&F.stop(!0)};return w.finish=w,b||!1===x.queue?this.each(w):this.queue(x.queue,w)},stop:function(r,c,d){var h=function(b){var x=b.stop;delete b.stop,x(d)};return"string"!=typeof r&&(d=c,c=r,r=void 0),c&&this.queue(r||"fx",[]),this.each(function(){var b=!0,x=null!=r&&r+"queueHooks",w=u.timers,F=mt.get(this);if(x)F[x]&&F[x].stop&&h(F[x]);else for(x in F)F[x]&&F[x].stop&&Ji.test(x)&&h(F[x]);for(x=w.length;x--;)w[x].elem===this&&(null==r||w[x].queue===r)&&(w[x].anim.stop(d),b=!1,w.splice(x,1));(b||!d)&&u.dequeue(this,r)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var c,d=mt.get(this),h=d[r+"queue"],b=d[r+"queueHooks"],x=u.timers,w=h?h.length:0;for(d.finish=!0,u.queue(this,r,[]),b&&b.stop&&b.stop.call(this,!0),c=x.length;c--;)x[c].elem===this&&x[c].queue===r&&(x[c].anim.stop(!0),x.splice(c,1));for(c=0;c<w;c++)h[c]&&h[c].finish&&h[c].finish.call(this);delete d.finish})}}),u.each(["toggle","show","hide"],function(r,c){var d=u.fn[c];u.fn[c]=function(h,b,x){return null==h||"boolean"==typeof h?d.apply(this,arguments):this.animate(oo(c,!0),h,b,x)}}),u.each({slideDown:oo("show"),slideUp:oo("hide"),slideToggle:oo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(r,c){u.fn[r]=function(d,h,b){return this.animate(c,d,h,b)}}),u.timers=[],u.fx.tick=function(){var r,c=0,d=u.timers;for(Je=Date.now();c<d.length;c++)!(r=d[c])()&&d[c]===r&&d.splice(c--,1);d.length||u.fx.stop(),Je=void 0},u.fx.timer=function(r){u.timers.push(r),u.fx.start()},u.fx.interval=13,u.fx.start=function(){eo||(eo=!0,_o())},u.fx.stop=function(){eo=null},u.fx.speeds={slow:600,fast:200,_default:400},u.fn.delay=function(r,c){return r=u.fx&&u.fx.speeds[r]||r,this.queue(c=c||"fx",function(d,h){var b=L.setTimeout(d,r);h.stop=function(){L.clearTimeout(b)}})},function(){var r=tt.createElement("input"),d=tt.createElement("select").appendChild(tt.createElement("option"));r.type="checkbox",J.checkOn=""!==r.value,J.optSelected=d.selected,(r=tt.createElement("input")).value="t",r.type="radio",J.radioValue="t"===r.value}();var Ko,Qe=u.expr.attrHandle;u.fn.extend({attr:function(r,c){return xe(this,u.attr,r,c,arguments.length>1)},removeAttr:function(r){return this.each(function(){u.removeAttr(this,r)})}}),u.extend({attr:function(r,c,d){var h,b,x=r.nodeType;if(3!==x&&8!==x&&2!==x)return void 0===r.getAttribute?u.prop(r,c,d):((1!==x||!u.isXMLDoc(r))&&(b=u.attrHooks[c.toLowerCase()]||(u.expr.match.bool.test(c)?Ko:void 0)),void 0!==d?null===d?void u.removeAttr(r,c):b&&"set"in b&&void 0!==(h=b.set(r,d,c))?h:(r.setAttribute(c,d+""),d):b&&"get"in b&&null!==(h=b.get(r,c))?h:null==(h=u.find.attr(r,c))?void 0:h)},attrHooks:{type:{set:function(r,c){if(!J.radioValue&&"radio"===c&&Tt(r,"input")){var d=r.value;return r.setAttribute("type",c),d&&(r.value=d),c}}}},removeAttr:function(r,c){var d,h=0,b=c&&c.match(At);if(b&&1===r.nodeType)for(;d=b[h++];)r.removeAttribute(d)}}),Ko={set:function(r,c,d){return!1===c?u.removeAttr(r,d):r.setAttribute(d,d),d}},u.each(u.expr.match.bool.source.match(/\w+/g),function(r,c){var d=Qe[c]||u.find.attr;Qe[c]=function(h,b,x){var w,F,I=b.toLowerCase();return x||(F=Qe[I],Qe[I]=w,w=null!=d(h,b,x)?I:null,Qe[I]=F),w}});var ji=/^(?:input|select|textarea|button)$/i,Wi=/^(?:a|area)$/i;function Me(r){return(r.match(At)||[]).join(" ")}function Pe(r){return r.getAttribute&&r.getAttribute("class")||""}function mo(r){return Array.isArray(r)?r:"string"==typeof r&&r.match(At)||[]}u.fn.extend({prop:function(r,c){return xe(this,u.prop,r,c,arguments.length>1)},removeProp:function(r){return this.each(function(){delete this[u.propFix[r]||r]})}}),u.extend({prop:function(r,c,d){var h,b,x=r.nodeType;if(3!==x&&8!==x&&2!==x)return(1!==x||!u.isXMLDoc(r))&&(b=u.propHooks[c=u.propFix[c]||c]),void 0!==d?b&&"set"in b&&void 0!==(h=b.set(r,d,c))?h:r[c]=d:b&&"get"in b&&null!==(h=b.get(r,c))?h:r[c]},propHooks:{tabIndex:{get:function(r){var c=u.find.attr(r,"tabindex");return c?parseInt(c,10):ji.test(r.nodeName)||Wi.test(r.nodeName)&&r.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),J.optSelected||(u.propHooks.selected={get:function(r){return null},set:function(r){}}),u.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){u.propFix[this.toLowerCase()]=this}),u.fn.extend({addClass:function(r){var c,d,h,b,x,w,F,I=0;if(D(r))return this.each(function(W){u(this).addClass(r.call(this,W,Pe(this)))});if((c=mo(r)).length)for(;d=this[I++];)if(b=Pe(d),h=1===d.nodeType&&" "+Me(b)+" "){for(w=0;x=c[w++];)h.indexOf(" "+x+" ")<0&&(h+=x+" ");b!==(F=Me(h))&&d.setAttribute("class",F)}return this},removeClass:function(r){var c,d,h,b,x,w,F,I=0;if(D(r))return this.each(function(W){u(this).removeClass(r.call(this,W,Pe(this)))});if(!arguments.length)return this.attr("class","");if((c=mo(r)).length)for(;d=this[I++];)if(b=Pe(d),h=1===d.nodeType&&" "+Me(b)+" "){for(w=0;x=c[w++];)for(;h.indexOf(" "+x+" ")>-1;)h=h.replace(" "+x+" "," ");b!==(F=Me(h))&&d.setAttribute("class",F)}return this},toggleClass:function(r,c){var d=typeof r,h="string"===d||Array.isArray(r);return"boolean"==typeof c&&h?c?this.addClass(r):this.removeClass(r):D(r)?this.each(function(b){u(this).toggleClass(r.call(this,b,Pe(this),c),c)}):this.each(function(){var b,x,w,F;if(h)for(x=0,w=u(this),F=mo(r);b=F[x++];)w.hasClass(b)?w.removeClass(b):w.addClass(b);else(void 0===r||"boolean"===d)&&((b=Pe(this))&&mt.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===r?"":mt.get(this,"__className__")||""))})},hasClass:function(r){var c,d,h=0;for(c=" "+r+" ";d=this[h++];)if(1===d.nodeType&&(" "+Me(Pe(d))+" ").indexOf(c)>-1)return!0;return!1}});var Qi=/\r/g;u.fn.extend({val:function(r){var c,d,h,b=this[0];return arguments.length?(h=D(r),this.each(function(x){var w;1===this.nodeType&&(null==(w=h?r.call(this,x,u(this).val()):r)?w="":"number"==typeof w?w+="":Array.isArray(w)&&(w=u.map(w,function(F){return null==F?"":F+""})),(!(c=u.valHooks[this.type]||u.valHooks[this.nodeName.toLowerCase()])||!("set"in c)||void 0===c.set(this,w,"value"))&&(this.value=w))})):b?(c=u.valHooks[b.type]||u.valHooks[b.nodeName.toLowerCase()])&&"get"in c&&void 0!==(d=c.get(b,"value"))?d:"string"==typeof(d=b.value)?d.replace(Qi,""):null==d?"":d:void 0}}),u.extend({valHooks:{option:{get:function(r){var c=u.find.attr(r,"value");return null!=c?c:Me(u.text(r))}},select:{get:function(r){var c,d,h,b=r.options,x=r.selectedIndex,w="select-one"===r.type,F=w?null:[],I=w?x+1:b.length;for(h=x<0?I:w?x:0;h<I;h++)if(((d=b[h]).selected||h===x)&&!d.disabled&&(!d.parentNode.disabled||!Tt(d.parentNode,"optgroup"))){if(c=u(d).val(),w)return c;F.push(c)}return F},set:function(r,c){for(var d,h,b=r.options,x=u.makeArray(c),w=b.length;w--;)((h=b[w]).selected=u.inArray(u.valHooks.option.get(h),x)>-1)&&(d=!0);return d||(r.selectedIndex=-1),x}}}}),u.each(["radio","checkbox"],function(){u.valHooks[this]={set:function(r,c){if(Array.isArray(c))return r.checked=u.inArray(u(r).val(),c)>-1}},J.checkOn||(u.valHooks[this].get=function(r){return null===r.getAttribute("value")?"on":r.value})}),J.focusin="onfocusin"in L;var ti=/^(?:focusinfocus|focusoutblur)$/,ei=function(r){r.stopPropagation()};u.extend(u.event,{trigger:function(r,c,d,h){var b,x,w,F,I,W,z,rt,Y=[d||tt],et=f.call(r,"type")?r.type:r,ft=f.call(r,"namespace")?r.namespace.split("."):[];if(x=rt=w=d=d||tt,3!==d.nodeType&&8!==d.nodeType&&!ti.test(et+u.event.triggered)&&(et.indexOf(".")>-1&&(ft=et.split("."),et=ft.shift(),ft.sort()),I=et.indexOf(":")<0&&"on"+et,(r=r[u.expando]?r:new u.Event(et,"object"==typeof r&&r)).isTrigger=h?2:3,r.namespace=ft.join("."),r.rnamespace=r.namespace?new RegExp("(^|\\.)"+ft.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=void 0,r.target||(r.target=d),c=null==c?[r]:u.makeArray(c,[r]),z=u.event.special[et]||{},h||!z.trigger||!1!==z.trigger.apply(d,c))){if(!h&&!z.noBubble&&!V(d)){for(ti.test((F=z.delegateType||et)+et)||(x=x.parentNode);x;x=x.parentNode)Y.push(x),w=x;w===(d.ownerDocument||tt)&&Y.push(w.defaultView||w.parentWindow||L)}for(b=0;(x=Y[b++])&&!r.isPropagationStopped();)rt=x,r.type=b>1?F:z.bindType||et,(W=(mt.get(x,"events")||Object.create(null))[r.type]&&mt.get(x,"handle"))&&W.apply(x,c),(W=I&&x[I])&&W.apply&&He(x)&&(r.result=W.apply(x,c),!1===r.result&&r.preventDefault());return r.type=et,!h&&!r.isDefaultPrevented()&&(!z._default||!1===z._default.apply(Y.pop(),c))&&He(d)&&I&&D(d[et])&&!V(d)&&((w=d[I])&&(d[I]=null),u.event.triggered=et,r.isPropagationStopped()&&rt.addEventListener(et,ei),d[et](),r.isPropagationStopped()&&rt.removeEventListener(et,ei),u.event.triggered=void 0,w&&(d[I]=w)),r.result}},simulate:function(r,c,d){var h=u.extend(new u.Event,d,{type:r,isSimulated:!0});u.event.trigger(h,null,c)}}),u.fn.extend({trigger:function(r,c){return this.each(function(){u.event.trigger(r,c,this)})},triggerHandler:function(r,c){var d=this[0];if(d)return u.event.trigger(r,c,d,!0)}}),J.focusin||u.each({focus:"focusin",blur:"focusout"},function(r,c){var d=function(h){u.event.simulate(c,h.target,u.event.fix(h))};u.event.special[c]={setup:function(){var h=this.ownerDocument||this.document||this,b=mt.access(h,c);b||h.addEventListener(r,d,!0),mt.access(h,c,(b||0)+1)},teardown:function(){var h=this.ownerDocument||this.document||this,b=mt.access(h,c)-1;b?mt.access(h,c,b):(h.removeEventListener(r,d,!0),mt.remove(h,c))}}});var Ve=L.location,oi={guid:Date.now()},vo=/\?/;u.parseXML=function(r){var c,d;if(!r||"string"!=typeof r)return null;try{c=(new L.DOMParser).parseFromString(r,"text/xml")}catch(h){}return d=c&&c.getElementsByTagName("parsererror")[0],(!c||d)&&u.error("Invalid XML: "+(d?u.map(d.childNodes,function(h){return h.textContent}).join("\n"):r)),c};var Vi=/\[\]$/,ii=/\r?\n/g,Ri=/^(?:submit|button|image|reset|file)$/i,Yi=/^(?:input|select|textarea|keygen)/i;function bo(r,c,d,h){var b;if(Array.isArray(c))u.each(c,function(x,w){d||Vi.test(r)?h(r,w):bo(r+"["+("object"==typeof w&&null!=w?x:"")+"]",w,d,h)});else if(d||"object"!==X(c))h(r,c);else for(b in c)bo(r+"["+b+"]",c[b],d,h)}u.param=function(r,c){var d,h=[],b=function(x,w){var F=D(w)?w():w;h[h.length]=encodeURIComponent(x)+"="+encodeURIComponent(null==F?"":F)};if(null==r)return"";if(Array.isArray(r)||r.jquery&&!u.isPlainObject(r))u.each(r,function(){b(this.name,this.value)});else for(d in r)bo(d,r[d],c,b);return h.join("&")},u.fn.extend({serialize:function(){return u.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var r=u.prop(this,"elements");return r?u.makeArray(r):this}).filter(function(){var r=this.type;return this.name&&!u(this).is(":disabled")&&Yi.test(this.nodeName)&&!Ri.test(r)&&(this.checked||!je.test(r))}).map(function(r,c){var d=u(this).val();return null==d?null:Array.isArray(d)?u.map(d,function(h){return{name:c.name,value:h.replace(ii,"\r\n")}}):{name:c.name,value:d.replace(ii,"\r\n")}}).get()}});var zi=/%20/g,Gi=/#.*$/,$i=/([?&])_=[^&]*/,Xi=/^(.*?):[ \t]*([^\r\n]*)$/gm,tn=/^(?:GET|HEAD)$/,en=/^\/\//,ni={},xo={},si="*/".concat("*"),yo=tt.createElement("a");function ri(r){return function(c,d){"string"!=typeof c&&(d=c,c="*");var h,b=0,x=c.toLowerCase().match(At)||[];if(D(d))for(;h=x[b++];)"+"===h[0]?(h=h.slice(1)||"*",(r[h]=r[h]||[]).unshift(d)):(r[h]=r[h]||[]).push(d)}}function ai(r,c,d,h){var b={},x=r===xo;function w(F){var I;return b[F]=!0,u.each(r[F]||[],function(W,z){var rt=z(c,d,h);return"string"!=typeof rt||x||b[rt]?x?!(I=rt):void 0:(c.dataTypes.unshift(rt),w(rt),!1)}),I}return w(c.dataTypes[0])||!b["*"]&&w("*")}function Co(r,c){var d,h,b=u.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((b[d]?r:h||(h={}))[d]=c[d]);return h&&u.extend(!0,r,h),r}yo.href=Ve.href,u.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ve.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ve.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":si,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":u.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(r,c){return c?Co(Co(r,u.ajaxSettings),c):Co(u.ajaxSettings,r)},ajaxPrefilter:ri(ni),ajaxTransport:ri(xo),ajax:function(r,c){"object"==typeof r&&(c=r,r=void 0);var d,h,b,x,w,F,I,W,z,rt,Y=u.ajaxSetup({},c=c||{}),et=Y.context||Y,ft=Y.context&&(et.nodeType||et.jquery)?u(et):u.event,Pt=u.Deferred(),_t=u.Callbacks("once memory"),Xt=Y.statusCode||{},Gt={},le={},Jt="canceled",Mt={readyState:0,getResponseHeader:function(qt){var Rt;if(I){if(!x)for(x={};Rt=Xi.exec(b);)x[Rt[1].toLowerCase()+" "]=(x[Rt[1].toLowerCase()+" "]||[]).concat(Rt[2]);Rt=x[qt.toLowerCase()+" "]}return null==Rt?null:Rt.join(", ")},getAllResponseHeaders:function(){return I?b:null},setRequestHeader:function(qt,Rt){return null==I&&(qt=le[qt.toLowerCase()]=le[qt.toLowerCase()]||qt,Gt[qt]=Rt),this},overrideMimeType:function(qt){return null==I&&(Y.mimeType=qt),this},statusCode:function(qt){var Rt;if(qt)if(I)Mt.always(qt[Mt.status]);else for(Rt in qt)Xt[Rt]=[Xt[Rt],qt[Rt]];return this},abort:function(qt){var Rt=qt||Jt;return d&&d.abort(Rt),re(0,Rt),this}};if(Pt.promise(Mt),Y.url=((r||Y.url||Ve.href)+"").replace(en,Ve.protocol+"//"),Y.type=c.method||c.type||Y.method||Y.type,Y.dataTypes=(Y.dataType||"*").toLowerCase().match(At)||[""],null==Y.crossDomain){F=tt.createElement("a");try{F.href=Y.url,F.href=F.href,Y.crossDomain=yo.protocol+"//"+yo.host!=F.protocol+"//"+F.host}catch(qt){Y.crossDomain=!0}}if(Y.data&&Y.processData&&"string"!=typeof Y.data&&(Y.data=u.param(Y.data,Y.traditional)),ai(ni,Y,c,Mt),I)return Mt;for(z in(W=u.event&&Y.global)&&0==u.active++&&u.event.trigger("ajaxStart"),Y.type=Y.type.toUpperCase(),Y.hasContent=!tn.test(Y.type),h=Y.url.replace(Gi,""),Y.hasContent?Y.data&&Y.processData&&0===(Y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Y.data=Y.data.replace(zi,"+")):(rt=Y.url.slice(h.length),Y.data&&(Y.processData||"string"==typeof Y.data)&&(h+=(vo.test(h)?"&":"?")+Y.data,delete Y.data),!1===Y.cache&&(h=h.replace($i,"$1"),rt=(vo.test(h)?"&":"?")+"_="+oi.guid+++rt),Y.url=h+rt),Y.ifModified&&(u.lastModified[h]&&Mt.setRequestHeader("If-Modified-Since",u.lastModified[h]),u.etag[h]&&Mt.setRequestHeader("If-None-Match",u.etag[h])),(Y.data&&Y.hasContent&&!1!==Y.contentType||c.contentType)&&Mt.setRequestHeader("Content-Type",Y.contentType),Mt.setRequestHeader("Accept",Y.dataTypes[0]&&Y.accepts[Y.dataTypes[0]]?Y.accepts[Y.dataTypes[0]]+("*"!==Y.dataTypes[0]?", "+si+"; q=0.01":""):Y.accepts["*"]),Y.headers)Mt.setRequestHeader(z,Y.headers[z]);if(Y.beforeSend&&(!1===Y.beforeSend.call(et,Mt,Y)||I))return Mt.abort();if(Jt="abort",_t.add(Y.complete),Mt.done(Y.success),Mt.fail(Y.error),d=ai(xo,Y,c,Mt)){if(Mt.readyState=1,W&&ft.trigger("ajaxSend",[Mt,Y]),I)return Mt;Y.async&&Y.timeout>0&&(w=L.setTimeout(function(){Mt.abort("timeout")},Y.timeout));try{I=!1,d.send(Gt,re)}catch(qt){if(I)throw qt;re(-1,qt)}}else re(-1,"No Transport");function re(qt,Rt,Ye,io){var de,Se,Ae,ae,ke,ge=Rt;I||(I=!0,w&&L.clearTimeout(w),d=void 0,b=io||"",Mt.readyState=qt>0?4:0,de=qt>=200&&qt<300||304===qt,Ye&&(ae=function on(r,c,d){for(var h,b,x,w,F=r.contents,I=r.dataTypes;"*"===I[0];)I.shift(),void 0===h&&(h=r.mimeType||c.getResponseHeader("Content-Type"));if(h)for(b in F)if(F[b]&&F[b].test(h)){I.unshift(b);break}if(I[0]in d)x=I[0];else{for(b in d){if(!I[0]||r.converters[b+" "+I[0]]){x=b;break}w||(w=b)}x=x||w}if(x)return x!==I[0]&&I.unshift(x),d[x]}(Y,Mt,Ye)),!de&&u.inArray("script",Y.dataTypes)>-1&&u.inArray("json",Y.dataTypes)<0&&(Y.converters["text script"]=function(){}),ae=function nn(r,c,d,h){var b,x,w,F,I,W={},z=r.dataTypes.slice();if(z[1])for(w in r.converters)W[w.toLowerCase()]=r.converters[w];for(x=z.shift();x;)if(r.responseFields[x]&&(d[r.responseFields[x]]=c),!I&&h&&r.dataFilter&&(c=r.dataFilter(c,r.dataType)),I=x,x=z.shift())if("*"===x)x=I;else if("*"!==I&&I!==x){if(!(w=W[I+" "+x]||W["* "+x]))for(b in W)if((F=b.split(" "))[1]===x&&(w=W[I+" "+F[0]]||W["* "+F[0]])){!0===w?w=W[b]:!0!==W[b]&&(x=F[0],z.unshift(F[1]));break}if(!0!==w)if(w&&r.throws)c=w(c);else try{c=w(c)}catch(rt){return{state:"parsererror",error:w?rt:"No conversion from "+I+" to "+x}}}return{state:"success",data:c}}(Y,ae,Mt,de),de?(Y.ifModified&&((ke=Mt.getResponseHeader("Last-Modified"))&&(u.lastModified[h]=ke),(ke=Mt.getResponseHeader("etag"))&&(u.etag[h]=ke)),204===qt||"HEAD"===Y.type?ge="nocontent":304===qt?ge="notmodified":(ge=ae.state,Se=ae.data,de=!(Ae=ae.error))):(Ae=ge,(qt||!ge)&&(ge="error",qt<0&&(qt=0))),Mt.status=qt,Mt.statusText=(Rt||ge)+"",de?Pt.resolveWith(et,[Se,ge,Mt]):Pt.rejectWith(et,[Mt,ge,Ae]),Mt.statusCode(Xt),Xt=void 0,W&&ft.trigger(de?"ajaxSuccess":"ajaxError",[Mt,Y,de?Se:Ae]),_t.fireWith(et,[Mt,ge]),W&&(ft.trigger("ajaxComplete",[Mt,Y]),--u.active||u.event.trigger("ajaxStop")))}return Mt},getJSON:function(r,c,d){return u.get(r,c,d,"json")},getScript:function(r,c){return u.get(r,void 0,c,"script")}}),u.each(["get","post"],function(r,c){u[c]=function(d,h,b,x){return D(h)&&(x=x||b,b=h,h=void 0),u.ajax(u.extend({url:d,type:c,dataType:x,data:h,success:b},u.isPlainObject(d)&&d))}}),u.ajaxPrefilter(function(r){var c;for(c in r.headers)"content-type"===c.toLowerCase()&&(r.contentType=r.headers[c]||"")}),u._evalUrl=function(r,c,d){return u.ajax({url:r,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(h){u.globalEval(h,c,d)}})},u.fn.extend({wrapAll:function(r){var c;return this[0]&&(D(r)&&(r=r.call(this[0])),c=u(r,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var d=this;d.firstElementChild;)d=d.firstElementChild;return d}).append(this)),this},wrapInner:function(r){return D(r)?this.each(function(c){u(this).wrapInner(r.call(this,c))}):this.each(function(){var c=u(this),d=c.contents();d.length?d.wrapAll(r):c.append(r)})},wrap:function(r){var c=D(r);return this.each(function(d){u(this).wrapAll(c?r.call(this,d):r)})},unwrap:function(r){return this.parent(r).not("body").each(function(){u(this).replaceWith(this.childNodes)}),this}}),u.expr.pseudos.hidden=function(r){return!u.expr.pseudos.visible(r)},u.expr.pseudos.visible=function(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)},u.ajaxSettings.xhr=function(){try{return new L.XMLHttpRequest}catch(r){}};var sn={0:200,1223:204},Re=u.ajaxSettings.xhr();J.cors=!!Re&&"withCredentials"in Re,J.ajax=Re=!!Re,u.ajaxTransport(function(r){var c,d;if(J.cors||Re&&!r.crossDomain)return{send:function(h,b){var x,w=r.xhr();if(w.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(x in r.xhrFields)w[x]=r.xhrFields[x];for(x in r.mimeType&&w.overrideMimeType&&w.overrideMimeType(r.mimeType),!r.crossDomain&&!h["X-Requested-With"]&&(h["X-Requested-With"]="XMLHttpRequest"),h)w.setRequestHeader(x,h[x]);c=function(F){return function(){c&&(c=d=w.onload=w.onerror=w.onabort=w.ontimeout=w.onreadystatechange=null,"abort"===F?w.abort():"error"===F?"number"!=typeof w.status?b(0,"error"):b(w.status,w.statusText):b(sn[w.status]||w.status,w.statusText,"text"!==(w.responseType||"text")||"string"!=typeof w.responseText?{binary:w.response}:{text:w.responseText},w.getAllResponseHeaders()))}},w.onload=c(),d=w.onerror=w.ontimeout=c("error"),void 0!==w.onabort?w.onabort=d:w.onreadystatechange=function(){4===w.readyState&&L.setTimeout(function(){c&&d()})},c=c("abort");try{w.send(r.hasContent&&r.data||null)}catch(F){if(c)throw F}},abort:function(){c&&c()}}}),u.ajaxPrefilter(function(r){r.crossDomain&&(r.contents.script=!1)}),u.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(r){return u.globalEval(r),r}}}),u.ajaxPrefilter("script",function(r){void 0===r.cache&&(r.cache=!1),r.crossDomain&&(r.type="GET")}),u.ajaxTransport("script",function(r){var c,d;if(r.crossDomain||r.scriptAttrs)return{send:function(h,b){c=u("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",d=function(x){c.remove(),d=null,x&&b("error"===x.type?404:200,x.type)}),tt.head.appendChild(c[0])},abort:function(){d&&d()}}});var r,ci=[],wo=/(=)\?(?=&|$)|\?\?/;u.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var r=ci.pop()||u.expando+"_"+oi.guid++;return this[r]=!0,r}}),u.ajaxPrefilter("json jsonp",function(r,c,d){var h,b,x,w=!1!==r.jsonp&&(wo.test(r.url)?"url":"string"==typeof r.data&&0===(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&wo.test(r.data)&&"data");if(w||"jsonp"===r.dataTypes[0])return h=r.jsonpCallback=D(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,w?r[w]=r[w].replace(wo,"$1"+h):!1!==r.jsonp&&(r.url+=(vo.test(r.url)?"&":"?")+r.jsonp+"="+h),r.converters["script json"]=function(){return x||u.error(h+" was not called"),x[0]},r.dataTypes[0]="json",b=L[h],L[h]=function(){x=arguments},d.always(function(){void 0===b?u(L).removeProp(h):L[h]=b,r[h]&&(r.jsonpCallback=c.jsonpCallback,ci.push(h)),x&&D(b)&&b(x[0]),x=b=void 0}),"script"}),J.createHTMLDocument=((r=tt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===r.childNodes.length),u.parseHTML=function(r,c,d){return"string"!=typeof r?[]:("boolean"==typeof c&&(d=c,c=!1),c||(J.createHTMLDocument?((h=(c=tt.implementation.createHTMLDocument("")).createElement("base")).href=tt.location.href,c.head.appendChild(h)):c=tt),x=!d&&[],(b=St.exec(r))?[c.createElement(b[1])]:(b=Io([r],c,x),x&&x.length&&u(x).remove(),u.merge([],b.childNodes)));var h,b,x},u.fn.load=function(r,c,d){var h,b,x,w=this,F=r.indexOf(" ");return F>-1&&(h=Me(r.slice(F)),r=r.slice(0,F)),D(c)?(d=c,c=void 0):c&&"object"==typeof c&&(b="POST"),w.length>0&&u.ajax({url:r,type:b||"GET",dataType:"html",data:c}).done(function(I){x=arguments,w.html(h?u("<div>").append(u.parseHTML(I)).find(h):I)}).always(d&&function(I,W){w.each(function(){d.apply(this,x||[I.responseText,W,I])})}),this},u.expr.pseudos.animated=function(r){return u.grep(u.timers,function(c){return r===c.elem}).length},u.offset={setOffset:function(r,c,d){var h,b,x,w,F,I,z=u.css(r,"position"),rt=u(r),Y={};"static"===z&&(r.style.position="relative"),F=rt.offset(),x=u.css(r,"top"),I=u.css(r,"left"),("absolute"===z||"fixed"===z)&&(x+I).indexOf("auto")>-1?(w=(h=rt.position()).top,b=h.left):(w=parseFloat(x)||0,b=parseFloat(I)||0),D(c)&&(c=c.call(r,d,u.extend({},F))),null!=c.top&&(Y.top=c.top-F.top+w),null!=c.left&&(Y.left=c.left-F.left+b),"using"in c?c.using.call(r,Y):rt.css(Y)}},u.fn.extend({offset:function(r){if(arguments.length)return void 0===r?this:this.each(function(b){u.offset.setOffset(this,r,b)});var c,d,h=this[0];return h?h.getClientRects().length?{top:(c=h.getBoundingClientRect()).top+(d=h.ownerDocument.defaultView).pageYOffset,left:c.left+d.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var r,c,d,h=this[0],b={top:0,left:0};if("fixed"===u.css(h,"position"))c=h.getBoundingClientRect();else{for(c=this.offset(),d=h.ownerDocument,r=h.offsetParent||d.documentElement;r&&(r===d.body||r===d.documentElement)&&"static"===u.css(r,"position");)r=r.parentNode;r&&r!==h&&1===r.nodeType&&((b=u(r).offset()).top+=u.css(r,"borderTopWidth",!0),b.left+=u.css(r,"borderLeftWidth",!0))}return{top:c.top-b.top-u.css(h,"marginTop",!0),left:c.left-b.left-u.css(h,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var r=this.offsetParent;r&&"static"===u.css(r,"position");)r=r.offsetParent;return r||Te})}}),u.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,c){var d="pageYOffset"===c;u.fn[r]=function(h){return xe(this,function(b,x,w){var F;if(V(b)?F=b:9===b.nodeType&&(F=b.defaultView),void 0===w)return F?F[c]:b[x];F?F.scrollTo(d?F.pageXOffset:w,d?w:F.pageYOffset):b[x]=w},r,h,arguments.length)}}),u.each(["top","left"],function(r,c){u.cssHooks[c]=jo(J.pixelPosition,function(d,h){if(h)return h=We(d,c),ho.test(h)?u(d).position()[c]+"px":h})}),u.each({Height:"height",Width:"width"},function(r,c){u.each({padding:"inner"+r,content:c,"":"outer"+r},function(d,h){u.fn[h]=function(b,x){var w=arguments.length&&(d||"boolean"!=typeof b),F=d||(!0===b||!0===x?"margin":"border");return xe(this,function(I,W,z){var rt;return V(I)?0===h.indexOf("outer")?I["inner"+r]:I.document.documentElement["client"+r]:9===I.nodeType?(rt=I.documentElement,Math.max(I.body["scroll"+r],rt["scroll"+r],I.body["offset"+r],rt["offset"+r],rt["client"+r])):void 0===z?u.css(I,W,F):u.style(I,W,z,F)},c,w?b:void 0,w)}})}),u.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(r,c){u.fn[c]=function(d){return this.on(c,d)}}),u.fn.extend({bind:function(r,c,d){return this.on(r,null,c,d)},unbind:function(r,c){return this.off(r,null,c)},delegate:function(r,c,d,h){return this.on(c,r,d,h)},undelegate:function(r,c,d){return 1===arguments.length?this.off(r,"**"):this.off(c,r||"**",d)},hover:function(r,c){return this.mouseenter(r).mouseleave(c||r)}}),u.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(r,c){u.fn[c]=function(d,h){return arguments.length>0?this.on(c,null,d,h):this.trigger(c)}});var rn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;u.proxy=function(r,c){var d,h,b;if("string"==typeof c&&(d=r[c],c=r,r=d),D(r))return h=g.call(arguments,2),b=function(){return r.apply(c||this,h.concat(g.call(arguments)))},b.guid=r.guid=r.guid||u.guid++,b},u.holdReady=function(r){r?u.readyWait++:u.ready(!0)},u.isArray=Array.isArray,u.parseJSON=JSON.parse,u.nodeName=Tt,u.isFunction=D,u.isWindow=V,u.camelCase=be,u.type=X,u.now=Date.now,u.isNumeric=function(r){var c=u.type(r);return("number"===c||"string"===c)&&!isNaN(r-parseFloat(r))},u.trim=function(r){return null==r?"":(r+"").replace(rn,"")},void 0!==(T=function(){return u}.apply(P,[]))&&(ct.exports=T);var an=L.jQuery,cn=L.$;return u.noConflict=function(r){return L.$===u&&(L.$=cn),r&&L.jQuery===u&&(L.jQuery=an),u},void 0===M&&(L.jQuery=L.$=u),u})},3257:(ct,P)=>{P.encode=function(E){var T="";for(var L in E)E.hasOwnProperty(L)&&(T.length&&(T+="&"),T+=encodeURIComponent(L)+"="+encodeURIComponent(E[L]));return T},P.decode=function(E){for(var T={},L=E.split("&"),M=0,p=L.length;M<p;M++){var S=L[M].split("=");T[decodeURIComponent(S[0])]=decodeURIComponent(S[1])}return T}},1757:ct=>{var P=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,E=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];ct.exports=function(p){var S=p,g=p.indexOf("["),A=p.indexOf("]");-1!=g&&-1!=A&&(p=p.substring(0,g)+p.substring(g,A).replace(/:/g,";")+p.substring(A,p.length));for(var _=P.exec(p||""),t={},C=14;C--;)t[E[C]]=_[C]||"";return-1!=g&&-1!=A&&(t.source=S,t.host=t.host.substring(1,t.host.length-1).replace(/;/g,":"),t.authority=t.authority.replace("[","").replace("]","").replace(/;/g,":"),t.ipv6uri=!0),t.pathNames=function T(M,p){var g=p.replace(/\/{2,9}/g,"/").split("/");return("/"==p.substr(0,1)||0===p.length)&&g.splice(0,1),"/"==p.substr(p.length-1,1)&&g.splice(g.length-1,1),g}(0,t.path),t.queryKey=function L(M,p){var S={};return p.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(g,A,_){A&&(S[A]=_)}),S}(0,t.query),t}},685:(ct,P,E)=>{var T=E(1958),L=E(1086),M=E(2276),p=E(3039)("socket.io-client");ct.exports=P=g;var S=P.managers={};function g(A,_){"object"==typeof A&&(_=A,A=void 0),_=_||{};var J,t=T(A),C=t.source,y=t.id;return _.forceNew||_["force new connection"]||!1===_.multiplex||S[y]&&t.path in S[y].nsps?(p("ignoring socket cache for %s",C),J=M(C,_)):(S[y]||(p("new io instance for %s",C),S[y]=M(C,_)),J=S[y]),t.query&&!_.query&&(_.query=t.query),J.socket(t.path,_)}P.protocol=L.protocol,P.connect=g,P.Manager=E(2276),P.Socket=E(5157)},2276:(ct,P,E)=>{var T=E(7410),L=E(5157),M=E(1264),p=E(1086),S=E(1865),g=E(1213),A=E(3039)("socket.io-client:manager"),_=E(4068),t=E(2150),C=Object.prototype.hasOwnProperty;function y(f,k){if(!(this instanceof y))return new y(f,k);f&&"object"==typeof f&&(k=f,f=void 0),(k=k||{}).path=k.path||"/socket.io",this.nsps={},this.subs=[],this.opts=k,this.reconnection(!1!==k.reconnection),this.reconnectionAttempts(k.reconnectionAttempts||1/0),this.reconnectionDelay(k.reconnectionDelay||1e3),this.reconnectionDelayMax(k.reconnectionDelayMax||5e3),this.randomizationFactor(k.randomizationFactor||.5),this.backoff=new t({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==k.timeout?2e4:k.timeout),this.readyState="closed",this.uri=f,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var N=k.parser||p;this.encoder=new N.Encoder,this.decoder=new N.Decoder,this.autoConnect=!1!==k.autoConnect,this.autoConnect&&this.open()}ct.exports=y,y.prototype.emitAll=function(){for(var f in this.emit.apply(this,arguments),this.nsps)C.call(this.nsps,f)&&this.nsps[f].emit.apply(this.nsps[f],arguments)},y.prototype.updateSocketIds=function(){for(var f in this.nsps)C.call(this.nsps,f)&&(this.nsps[f].id=this.generateId(f))},y.prototype.generateId=function(f){return("/"===f?"":f+"#")+this.engine.id},M(y.prototype),y.prototype.reconnection=function(f){return arguments.length?(this._reconnection=!!f,this):this._reconnection},y.prototype.reconnectionAttempts=function(f){return arguments.length?(this._reconnectionAttempts=f,this):this._reconnectionAttempts},y.prototype.reconnectionDelay=function(f){return arguments.length?(this._reconnectionDelay=f,this.backoff&&this.backoff.setMin(f),this):this._reconnectionDelay},y.prototype.randomizationFactor=function(f){return arguments.length?(this._randomizationFactor=f,this.backoff&&this.backoff.setJitter(f),this):this._randomizationFactor},y.prototype.reconnectionDelayMax=function(f){return arguments.length?(this._reconnectionDelayMax=f,this.backoff&&this.backoff.setMax(f),this):this._reconnectionDelayMax},y.prototype.timeout=function(f){return arguments.length?(this._timeout=f,this):this._timeout},y.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},y.prototype.open=y.prototype.connect=function(f,k){if(A("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;A("opening %s",this.uri),this.engine=T(this.uri,this.opts);var N=this.engine,J=this;this.readyState="opening",this.skipReconnect=!1;var D=S(N,"open",function(){J.onopen(),f&&f()}),V=S(N,"error",function(j){if(A("connect_error"),J.cleanup(),J.readyState="closed",J.emitAll("connect_error",j),f){var X=new Error("Connection error");X.data=j,f(X)}else J.maybeReconnectOnOpen()});if(!1!==this._timeout){var tt=this._timeout;A("connect attempt will timeout after %d",tt),0===tt&&D.destroy();var st=setTimeout(function(){A("connect attempt timed out after %d",tt),D.destroy(),N.close(),N.emit("error","timeout"),J.emitAll("connect_timeout",tt)},tt);this.subs.push({destroy:function(){clearTimeout(st)}})}return this.subs.push(D),this.subs.push(V),this},y.prototype.onopen=function(){A("open"),this.cleanup(),this.readyState="open",this.emit("open");var f=this.engine;this.subs.push(S(f,"data",g(this,"ondata"))),this.subs.push(S(f,"ping",g(this,"onping"))),this.subs.push(S(f,"pong",g(this,"onpong"))),this.subs.push(S(f,"error",g(this,"onerror"))),this.subs.push(S(f,"close",g(this,"onclose"))),this.subs.push(S(this.decoder,"decoded",g(this,"ondecoded")))},y.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},y.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},y.prototype.ondata=function(f){this.decoder.add(f)},y.prototype.ondecoded=function(f){this.emit("packet",f)},y.prototype.onerror=function(f){A("error",f),this.emitAll("error",f)},y.prototype.socket=function(f,k){var N=this.nsps[f];if(!N){N=new L(this,f,k),this.nsps[f]=N;var J=this;N.on("connecting",D),N.on("connect",function(){N.id=J.generateId(f)}),this.autoConnect&&D()}function D(){~_(J.connecting,N)||J.connecting.push(N)}return N},y.prototype.destroy=function(f){var k=_(this.connecting,f);~k&&this.connecting.splice(k,1),!this.connecting.length&&this.close()},y.prototype.packet=function(f){A("writing packet %j",f);var k=this;f.query&&0===f.type&&(f.nsp+="?"+f.query),k.encoding?k.packetBuffer.push(f):(k.encoding=!0,this.encoder.encode(f,function(N){for(var J=0;J<N.length;J++)k.engine.write(N[J],f.options);k.encoding=!1,k.processPacketQueue()}))},y.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var f=this.packetBuffer.shift();this.packet(f)}},y.prototype.cleanup=function(){A("cleanup");for(var f=this.subs.length,k=0;k<f;k++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},y.prototype.close=y.prototype.disconnect=function(){A("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},y.prototype.onclose=function(f){A("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",f),this._reconnection&&!this.skipReconnect&&this.reconnect()},y.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var f=this;if(this.backoff.attempts>=this._reconnectionAttempts)A("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var k=this.backoff.duration();A("will wait %dms before reconnect attempt",k),this.reconnecting=!0;var N=setTimeout(function(){f.skipReconnect||(A("attempting reconnect"),f.emitAll("reconnect_attempt",f.backoff.attempts),f.emitAll("reconnecting",f.backoff.attempts),!f.skipReconnect&&f.open(function(J){J?(A("reconnect attempt error"),f.reconnecting=!1,f.reconnect(),f.emitAll("reconnect_error",J.data)):(A("reconnect success"),f.onreconnect())}))},k);this.subs.push({destroy:function(){clearTimeout(N)}})}},y.prototype.onreconnect=function(){var f=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",f)}},1865:ct=>{ct.exports=function P(E,T,L){return E.on(T,L),{destroy:function(){E.removeListener(T,L)}}}},5157:(ct,P,E)=>{var T=E(1086),L=E(1264),M=E(1898),p=E(1865),S=E(1213),g=E(3039)("socket.io-client:socket"),A=E(3257),_=E(988);ct.exports=y;var t={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},C=L.prototype.emit;function y(f,k,N){this.io=f,this.nsp=k,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},N&&N.query&&(this.query=N.query),this.io.autoConnect&&this.open()}L(y.prototype),y.prototype.subEvents=function(){if(!this.subs){var f=this.io;this.subs=[p(f,"open",S(this,"onopen")),p(f,"packet",S(this,"onpacket")),p(f,"close",S(this,"onclose"))]}},y.prototype.open=y.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},y.prototype.send=function(){var f=M(arguments);return f.unshift("message"),this.emit.apply(this,f),this},y.prototype.emit=function(f){if(t.hasOwnProperty(f))return C.apply(this,arguments),this;var k=M(arguments),N={type:(void 0!==this.flags.binary?this.flags.binary:_(k))?T.BINARY_EVENT:T.EVENT,data:k,options:{}};return N.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof k[k.length-1]&&(g("emitting packet with ack id %d",this.ids),this.acks[this.ids]=k.pop(),N.id=this.ids++),this.connected?this.packet(N):this.sendBuffer.push(N),this.flags={},this},y.prototype.packet=function(f){f.nsp=this.nsp,this.io.packet(f)},y.prototype.onopen=function(){if(g("transport is open - connecting"),"/"!==this.nsp)if(this.query){var f="object"==typeof this.query?A.encode(this.query):this.query;g("sending connect packet with query %s",f),this.packet({type:T.CONNECT,query:f})}else this.packet({type:T.CONNECT})},y.prototype.onclose=function(f){g("close (%s)",f),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",f)},y.prototype.onpacket=function(f){if(f.nsp===this.nsp||f.type===T.ERROR&&"/"===f.nsp)switch(f.type){case T.CONNECT:this.onconnect();break;case T.EVENT:case T.BINARY_EVENT:this.onevent(f);break;case T.ACK:case T.BINARY_ACK:this.onack(f);break;case T.DISCONNECT:this.ondisconnect();break;case T.ERROR:this.emit("error",f.data)}},y.prototype.onevent=function(f){var k=f.data||[];g("emitting event %j",k),null!=f.id&&(g("attaching ack callback to event"),k.push(this.ack(f.id))),this.connected?C.apply(this,k):this.receiveBuffer.push(k)},y.prototype.ack=function(f){var k=this,N=!1;return function(){if(!N){N=!0;var J=M(arguments);g("sending ack %j",J),k.packet({type:_(J)?T.BINARY_ACK:T.ACK,id:f,data:J})}}},y.prototype.onack=function(f){var k=this.acks[f.id];"function"==typeof k?(g("calling ack %s with %j",f.id,f.data),k.apply(this,f.data),delete this.acks[f.id]):g("bad ack %s",f.id)},y.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},y.prototype.emitBuffered=function(){var f;for(f=0;f<this.receiveBuffer.length;f++)C.apply(this,this.receiveBuffer[f]);for(this.receiveBuffer=[],f=0;f<this.sendBuffer.length;f++)this.packet(this.sendBuffer[f]);this.sendBuffer=[]},y.prototype.ondisconnect=function(){g("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},y.prototype.destroy=function(){if(this.subs){for(var f=0;f<this.subs.length;f++)this.subs[f].destroy();this.subs=null}this.io.destroy(this)},y.prototype.close=y.prototype.disconnect=function(){return this.connected&&(g("performing disconnect (%s)",this.nsp),this.packet({type:T.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},y.prototype.compress=function(f){return this.flags.compress=f,this},y.prototype.binary=function(f){return this.flags.binary=f,this}},1958:(ct,P,E)=>{var T=E(1757),L=E(3039)("socket.io-client:url");ct.exports=function M(p,S){var g=p;S=S||"undefined"!=typeof location&&location,null==p&&(p=S.protocol+"//"+S.host),"string"==typeof p&&("/"===p.charAt(0)&&(p="/"===p.charAt(1)?S.protocol+p:S.host+p),/^(https?|wss?):\/\//.test(p)||(L("protocol-less url %s",p),p=void 0!==S?S.protocol+"//"+p:"https://"+p),L("parse %s",p),g=T(p)),g.port||(/^(http|ws)$/.test(g.protocol)?g.port="80":/^(http|ws)s$/.test(g.protocol)&&(g.port="443")),g.path=g.path||"/";var _=-1!==g.host.indexOf(":")?"["+g.host+"]":g.host;return g.id=g.protocol+"://"+_+":"+g.port,g.href=g.protocol+"://"+_+(S&&S.port===g.port?"":":"+g.port),g}},3039:(ct,P,E)=>{function S(){var A;try{A=P.storage.debug}catch(_){}return!A&&"undefined"!=typeof process&&"env"in process&&(A=process.env.DEBUG),A}(P=ct.exports=E(8596)).log=function M(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},P.formatArgs=function L(A){var _=this.useColors;if(A[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+A[0]+(_?"%c ":" ")+"+"+P.humanize(this.diff),_){var t="color: "+this.color;A.splice(1,0,t,"color: inherit");var C=0,y=0;A[0].replace(/%[a-zA-Z%]/g,function(f){"%%"!==f&&(C++,"%c"===f&&(y=C))}),A.splice(y,0,t)}},P.save=function p(A){try{null==A?P.storage.removeItem("debug"):P.storage.debug=A}catch(_){}},P.load=S,P.useColors=function T(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},P.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function g(){try{return window.localStorage}catch(A){}}(),P.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],P.formatters.j=function(A){try{return JSON.stringify(A)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}},P.enable(S())},8596:(ct,P,E)=>{function L(_){var t;function C(){if(C.enabled){var y=C,f=+new Date,k=f-(t||f);y.diff=k,y.prev=t,y.curr=f,t=f;for(var N=new Array(arguments.length),J=0;J<N.length;J++)N[J]=arguments[J];N[0]=P.coerce(N[0]),"string"!=typeof N[0]&&N.unshift("%O");var D=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(tt,st){if("%%"===tt)return tt;D++;var j=P.formatters[st];return"function"==typeof j&&(tt=j.call(y,N[D]),N.splice(D,1),D--),tt}),P.formatArgs.call(y,N);var V=C.log||P.log||console.log.bind(console);V.apply(y,N)}}return C.namespace=_,C.enabled=P.enabled(_),C.useColors=P.useColors(),C.color=function T(_){var C,t=0;for(C in _)t=(t<<5)-t+_.charCodeAt(C),t|=0;return P.colors[Math.abs(t)%P.colors.length]}(_),C.destroy=M,"function"==typeof P.init&&P.init(C),P.instances.push(C),C}function M(){var _=P.instances.indexOf(this);return-1!==_&&(P.instances.splice(_,1),!0)}(P=ct.exports=L.debug=L.default=L).coerce=function A(_){return _ instanceof Error?_.stack||_.message:_},P.disable=function S(){P.enable("")},P.enable=function p(_){P.save(_),P.names=[],P.skips=[];var t,C=("string"==typeof _?_:"").split(/[\s,]+/),y=C.length;for(t=0;t<y;t++)!C[t]||("-"===(_=C[t].replace(/\*/g,".*?"))[0]?P.skips.push(new RegExp("^"+_.substr(1)+"$")):P.names.push(new RegExp("^"+_+"$")));for(t=0;t<P.instances.length;t++){var f=P.instances[t];f.enabled=P.enabled(f.namespace)}},P.enabled=function g(_){if("*"===_[_.length-1])return!0;var t,C;for(t=0,C=P.skips.length;t<C;t++)if(P.skips[t].test(_))return!1;for(t=0,C=P.names.length;t<C;t++)if(P.names[t].test(_))return!0;return!1},P.humanize=E(8149),P.instances=[],P.names=[],P.skips=[],P.formatters={}},4456:ct=>{var P={}.toString;ct.exports=Array.isArray||function(E){return"[object Array]"==P.call(E)}},8149:ct=>{var P=1e3,E=60*P,T=60*E,L=24*T;function A(_,t,C){if(!(_<t))return _<1.5*t?Math.floor(_/t)+" "+C:Math.ceil(_/t)+" "+C+"s"}ct.exports=function(_,t){t=t||{};var C=typeof _;if("string"===C&&_.length>0)return function p(_){if(!((_=String(_)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(_);if(t){var C=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*C;case"days":case"day":case"d":return C*L;case"hours":case"hour":case"hrs":case"hr":case"h":return C*T;case"minutes":case"minute":case"mins":case"min":case"m":return C*E;case"seconds":case"second":case"secs":case"sec":case"s":return C*P;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}}(_);if("number"===C&&!1===isNaN(_))return t.long?function g(_){return A(_,L,"day")||A(_,T,"hour")||A(_,E,"minute")||A(_,P,"second")||_+" ms"}(_):function S(_){return _>=L?Math.round(_/L)+"d":_>=T?Math.round(_/T)+"h":_>=E?Math.round(_/E)+"m":_>=P?Math.round(_/P)+"s":_+"ms"}(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))}},3386:(ct,P,E)=>{var T=E(4456),L=E(8138),M=Object.prototype.toString,p="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===M.call(Blob),S="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===M.call(File);function g(_,t){if(!_)return _;if(L(_)){var C={_placeholder:!0,num:t.length};return t.push(_),C}if(T(_)){for(var y=new Array(_.length),f=0;f<_.length;f++)y[f]=g(_[f],t);return y}if("object"==typeof _&&!(_ instanceof Date)){for(var k in y={},_)y[k]=g(_[k],t);return y}return _}function A(_,t){if(!_)return _;if(_&&_._placeholder)return t[_.num];if(T(_))for(var C=0;C<_.length;C++)_[C]=A(_[C],t);else if("object"==typeof _)for(var y in _)_[y]=A(_[y],t);return _}P.deconstructPacket=function(_){var t=[],y=_;return y.data=g(_.data,t),y.attachments=t.length,{packet:y,buffers:t}},P.reconstructPacket=function(_,t){return _.data=A(_.data,t),_.attachments=void 0,_},P.removeBlobs=function(_,t){var y=0,f=_;(function C(k,N,J){if(!k)return k;if(p&&k instanceof Blob||S&&k instanceof File){y++;var D=new FileReader;D.onload=function(){J?J[N]=this.result:f=this.result,--y||t(f)},D.readAsArrayBuffer(k)}else if(T(k))for(var V=0;V<k.length;V++)C(k[V],V,k);else if("object"==typeof k&&!L(k))for(var tt in k)C(k[tt],tt,k)})(f),y||t(f)}},1086:(ct,P,E)=>{var T=E(3039)("socket.io-parser"),L=E(1264),M=E(3386),p=E(4456),S=E(8138);function g(){}P.protocol=4,P.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],P.CONNECT=0,P.DISCONNECT=1,P.EVENT=2,P.ACK=3,P.ERROR=4,P.BINARY_EVENT=5,P.BINARY_ACK=6,P.Encoder=g,P.Decoder=y;var A=P.ERROR+'"encode error"';function _(D){var V=""+D.type;if((P.BINARY_EVENT===D.type||P.BINARY_ACK===D.type)&&(V+=D.attachments+"-"),D.nsp&&"/"!==D.nsp&&(V+=D.nsp+","),null!=D.id&&(V+=D.id),null!=D.data){var tt=function t(D){try{return JSON.stringify(D)}catch(V){return!1}}(D.data);if(!1===tt)return A;V+=tt}return T("encoded %j as %s",D,V),V}function y(){this.reconstructor=null}function N(D){this.reconPack=D,this.buffers=[]}function J(D){return{type:P.ERROR,data:"parser error: "+D}}g.prototype.encode=function(D,V){T("encoding packet %j",D),P.BINARY_EVENT===D.type||P.BINARY_ACK===D.type?function C(D,V){M.removeBlobs(D,function tt(st){var j=M.deconstructPacket(st),X=_(j.packet),ot=j.buffers;ot.unshift(X),V(ot)})}(D,V):V([_(D)])},L(y.prototype),y.prototype.add=function(D){var V;if("string"==typeof D)V=function f(D){var V=0,tt={type:Number(D.charAt(0))};if(null==P.types[tt.type])return J("unknown packet type "+tt.type);if(P.BINARY_EVENT===tt.type||P.BINARY_ACK===tt.type){for(var st=V+1;"-"!==D.charAt(++V)&&V!=D.length;);var j=D.substring(st,V);if(j!=Number(j)||"-"!==D.charAt(V))throw new Error("Illegal attachments");tt.attachments=Number(j)}if("/"===D.charAt(V+1)){for(st=V+1;++V&&(","!==(X=D.charAt(V))&&V!==D.length););tt.nsp=D.substring(st,V)}else tt.nsp="/";var ot=D.charAt(V+1);if(""!==ot&&Number(ot)==ot){for(st=V+1;++V;){var X;if(null==(X=D.charAt(V))||Number(X)!=X){--V;break}if(V===D.length)break}tt.id=Number(D.substring(st,V+1))}if(D.charAt(++V)){var u=function k(D){try{return JSON.parse(D)}catch(V){return!1}}(D.substr(V));if(!1===u||tt.type!==P.ERROR&&!p(u))return J("invalid payload");tt.data=u}return T("decoded %s as %j",D,tt),tt}(D),P.BINARY_EVENT===V.type||P.BINARY_ACK===V.type?(this.reconstructor=new N(V),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",V)):this.emit("decoded",V);else{if(!S(D)&&!D.base64)throw new Error("Unknown type: "+D);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(V=this.reconstructor.takeBinaryData(D))&&(this.reconstructor=null,this.emit("decoded",V))}},y.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},N.prototype.takeBinaryData=function(D){if(this.buffers.push(D),this.buffers.length===this.reconPack.attachments){var V=M.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),V}return null},N.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},8138:ct=>{ct.exports=function L(M){return P&&Buffer.isBuffer(M)||E&&(M instanceof ArrayBuffer||function(M){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(M):M.buffer instanceof ArrayBuffer}(M))};var P="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,E="function"==typeof ArrayBuffer},1898:ct=>{ct.exports=function P(E,T){for(var L=[],M=(T=T||0)||0;M<E.length;M++)L[M-T]=E[M];return L}},5379:ct=>{"use strict";var p,P="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),T={},L=0,M=0;function S(_){var t="";do{t=P[_%64]+t,_=Math.floor(_/64)}while(_>0);return t}function A(){var _=S(+new Date);return _!==p?(L=0,p=_):_+"."+S(L++)}for(;M<64;M++)T[P[M]]=M;A.encode=S,A.decode=function g(_){var t=0;for(M=0;M<_.length;M++)t=64*t+T[_.charAt(M)];return t},ct.exports=A},7020:()=>{}}]);